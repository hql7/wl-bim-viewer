/*!
 * LMV v7.15.1
 * 
 * Copyright 2020 Autodesk, Inc.
 * All rights reserved.
 * 
 * This computer source code and related instructions and comments are the
 * unpublished confidential and proprietary information of Autodesk, Inc.
 * and are protected under Federal copyright and state trade secret law.
 * They may not be disclosed to, copied or used by any third party without
 * the prior written consent of Autodesk, Inc.
 * 
 * Autodesk Forge Viewer Usage Limitations:
 * 
 * The Autodesk Forge viewer can only be used to view files generated by
 * Autodesk Forge services. The Autodesk Forge Viewer JavaScript must be
 * delivered from an Autodesk hosted URL.
 */
Autodesk.Extensions.CompGeom=function(t){var e={};function i(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=320)}({194:function(t,e,i){var n,r,s,o;function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}o=function(){return function t(e,i,n){function r(o,a){if(!i[o]){if(!e[o]){if(s)return s(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var h=i[o]={exports:{}};e[o][0].call(h.exports,(function(t){return r(e[o][1][t]||t)}),h,h.exports,t,e,i,n)}return i[o].exports}for(var s=!1,o=0;o<n.length;o++)r(n[o]);return r}({1:[function(t,e,i){"use strict";function n(t,e,i){i=i||2;var n,a,l,h,u,f,y,v=e&&e.length,x=v?e[0]*i:t.length,P=r(t,0,x,i,!0),g=[];if(!P||P.next===P.prev)return g;if(v&&(P=function(t,e,i,n){var o,a,l,h=[];for(o=0,a=e.length;o<a;o++)(l=r(t,e[o]*n,o<a-1?e[o+1]*n:t.length,n,!1))===l.next&&(l.steiner=!0),h.push(c(l));for(h.sort(p),o=0;o<h.length;o++)d(h[o],i),i=s(i,i.next);return i}(t,e,P,i)),t.length>80*i){n=l=t[0],a=h=t[1];for(var m=i;m<x;m+=i)(u=t[m])<n&&(n=u),(f=t[m+1])<a&&(a=f),l<u&&(l=u),h<f&&(h=f);y=0!==(y=Math.max(l-n,h-a))?1/y:0}return o(P,g,i,n,a,y),g}function r(t,e,i,n,r){var s,o;if(r===0<T(t,e,i,n))for(s=e;s<i;s+=n)o=I(s,t[s],t[s+1],o);else for(s=i-n;e<=s;s-=n)o=I(s,t[s],t[s+1],o);return o&&x(o,o.next)&&(E(o),o=o.next),o}function s(t,e){if(!t)return t;e=e||t;var i,n=t;do{if(i=!1,n.steiner||!x(n,n.next)&&0!==v(n.prev,n,n.next))n=n.next;else{if(E(n),(n=e=n.prev)===n.next)break;i=!0}}while(i||n!==e);return e}function o(t,e,i,n,r,p,d){if(t){!d&&p&&function(t,e,i,n){for(var r=t;null===r.z&&(r.z=f(r.x,r.y,e,i,n)),r.prevZ=r.prev,r.nextZ=r.next,(r=r.next)!==t;);r.prevZ.nextZ=null,r.prevZ=null,function(t){var e,i,n,r,s,o,a,l,h=1;do{for(i=t,s=t=null,o=0;i;){for(o++,n=i,e=a=0;e<h&&(a++,n=n.nextZ);e++);for(l=h;0<a||0<l&&n;)0!==a&&(0===l||!n||i.z<=n.z)?(i=(r=i).nextZ,a--):(n=(r=n).nextZ,l--),s?s.nextZ=r:t=r,r.prevZ=s,s=r;i=n}s.nextZ=null,h*=2}while(1<o)}(r)}(t,n,r,p);for(var c,y,v=t;t.prev!==t.next;)if(c=t.prev,y=t.next,p?l(t,n,r,p):a(t))e.push(c.i/i),e.push(t.i/i),e.push(y.i/i),E(t),t=y.next,v=y.next;else if((t=y)===v){d?1===d?o(t=h(s(t),e,i),e,i,n,r,p,2):2===d&&u(t,e,i,n,r,p):o(s(t),e,i,n,r,p,1);break}}}function a(t){var e=t.prev,i=t,n=t.next;if(0<=v(e,i,n))return!1;for(var r=t.next.next;r!==t.prev;){if(y(e.x,e.y,i.x,i.y,n.x,n.y,r.x,r.y)&&0<=v(r.prev,r,r.next))return!1;r=r.next}return!0}function l(t,e,i,n){var r=t.prev,s=t,o=t.next;if(0<=v(r,s,o))return!1;for(var a=r.x<s.x?r.x<o.x?r.x:o.x:s.x<o.x?s.x:o.x,l=r.y<s.y?r.y<o.y?r.y:o.y:s.y<o.y?s.y:o.y,h=r.x>s.x?r.x>o.x?r.x:o.x:s.x>o.x?s.x:o.x,u=r.y>s.y?r.y>o.y?r.y:o.y:s.y>o.y?s.y:o.y,p=f(a,l,e,i,n),d=f(h,u,e,i,n),c=t.prevZ,x=t.nextZ;c&&c.z>=p&&x&&x.z<=d;){if(c!==t.prev&&c!==t.next&&y(r.x,r.y,s.x,s.y,o.x,o.y,c.x,c.y)&&0<=v(c.prev,c,c.next))return!1;if(c=c.prevZ,x!==t.prev&&x!==t.next&&y(r.x,r.y,s.x,s.y,o.x,o.y,x.x,x.y)&&0<=v(x.prev,x,x.next))return!1;x=x.nextZ}for(;c&&c.z>=p;){if(c!==t.prev&&c!==t.next&&y(r.x,r.y,s.x,s.y,o.x,o.y,c.x,c.y)&&0<=v(c.prev,c,c.next))return!1;c=c.prevZ}for(;x&&x.z<=d;){if(x!==t.prev&&x!==t.next&&y(r.x,r.y,s.x,s.y,o.x,o.y,x.x,x.y)&&0<=v(x.prev,x,x.next))return!1;x=x.nextZ}return!0}function h(t,e,i){var n=t;do{var r=n.prev,o=n.next.next;!x(r,o)&&P(r,n,n.next,o)&&C(r,o)&&C(o,r)&&(e.push(r.i/i),e.push(n.i/i),e.push(o.i/i),E(n),E(n.next),n=t=o),n=n.next}while(n!==t);return s(n)}function u(t,e,i,n,r,a){var l,h,u=t;do{for(var p=u.next.next;p!==u.prev;){if(u.i!==p.i&&(h=p,(l=u).next.i!==h.i&&l.prev.i!==h.i&&!function(t,e){var i=t;do{if(i.i!==t.i&&i.next.i!==t.i&&i.i!==e.i&&i.next.i!==e.i&&P(i,i.next,t,e))return!0;i=i.next}while(i!==t);return!1}(l,h)&&(C(l,h)&&C(h,l)&&function(t,e){for(var i=t,n=!1,r=(t.x+e.x)/2,s=(t.y+e.y)/2;i.y>s!=i.next.y>s&&i.next.y!==i.y&&r<(i.next.x-i.x)*(s-i.y)/(i.next.y-i.y)+i.x&&(n=!n),(i=i.next)!==t;);return n}(l,h)&&(v(l.prev,l,h.prev)||v(l,h.prev,h))||x(l,h)&&0<v(l.prev,l,l.next)&&0<v(h.prev,h,h.next)))){var d=_(u,p);return u=s(u,u.next),d=s(d,d.next),o(u,e,i,n,r,a),void o(d,e,i,n,r,a)}p=p.next}u=u.next}while(u!==t)}function p(t,e){return t.x-e.x}function d(t,e){if(e=function(t,e){var i,n=e,r=t.x,s=t.y,o=-1/0;do{if(s<=n.y&&s>=n.next.y&&n.next.y!==n.y){var a=n.x+(s-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(a<=r&&o<a){if((o=a)===r){if(s===n.y)return n;if(s===n.next.y)return n.next}i=n.x<n.next.x?n:n.next}}n=n.next}while(n!==e);if(!i)return null;if(r===o)return i;var l,h,u,p=i,d=i.x,f=i.y,c=1/0;for(n=i;r>=n.x&&n.x>=d&&r!==n.x&&y(s<f?r:o,s,d,f,s<f?o:r,s,n.x,n.y)&&(l=Math.abs(s-n.y)/(r-n.x),C(n,t)&&(l<c||l===c&&(n.x>i.x||n.x===i.x&&(u=n,v((h=i).prev,h,u.prev)<0&&v(u.next,h,h.next)<0)))&&(i=n,c=l)),(n=n.next)!==p;);return i}(t,e)){var i=_(e,t);s(i,i.next)}}function f(t,e,i,n,r){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-i)*r)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*r)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function c(t){for(var e=t,i=t;(e.x<i.x||e.x===i.x&&e.y<i.y)&&(i=e),(e=e.next)!==t;);return i}function y(t,e,i,n,r,s,o,a){return 0<=(r-o)*(e-a)-(t-o)*(s-a)&&0<=(t-o)*(n-a)-(i-o)*(e-a)&&0<=(i-o)*(s-a)-(r-o)*(n-a)}function v(t,e,i){return(e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y)}function x(t,e){return t.x===e.x&&t.y===e.y}function P(t,e,i,n){var r=m(v(t,e,i)),s=m(v(t,e,n)),o=m(v(i,n,t)),a=m(v(i,n,e));return r!==s&&o!==a||!(0!==r||!g(t,i,e))||!(0!==s||!g(t,n,e))||!(0!==o||!g(i,t,n))||!(0!==a||!g(i,e,n))}function g(t,e,i){return e.x<=Math.max(t.x,i.x)&&e.x>=Math.min(t.x,i.x)&&e.y<=Math.max(t.y,i.y)&&e.y>=Math.min(t.y,i.y)}function m(t){return 0<t?1:t<0?-1:0}function C(t,e){return v(t.prev,t,t.next)<0?0<=v(t,e,t.next)&&0<=v(t,t.prev,e):v(t,e,t.prev)<0||v(t,t.next,e)<0}function _(t,e){var i=new b(t.i,t.x,t.y),n=new b(e.i,e.x,e.y),r=t.next,s=e.prev;return(t.next=e).prev=t,(i.next=r).prev=i,(n.next=i).prev=n,(s.next=n).prev=s,n}function I(t,e,i,n){var r=new b(t,e,i);return n?(r.next=n.next,(r.prev=n).next.prev=r,n.next=r):(r.prev=r).next=r,r}function E(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function b(t,e,i){this.i=t,this.x=e,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function T(t,e,i,n){for(var r=0,s=e,o=i-n;s<i;s+=n)r+=(t[o]-t[s])*(t[s+1]+t[o+1]),o=s;return r}e.exports=n,(e.exports.default=n).deviation=function(t,e,i,n){var r=e&&e.length,s=r?e[0]*i:t.length,o=Math.abs(T(t,0,s,i));if(r)for(var a=0,l=e.length;a<l;a++){var h=e[a]*i,u=a<l-1?e[a+1]*i:t.length;o-=Math.abs(T(t,h,u,i))}var p=0;for(a=0;a<n.length;a+=3){var d=n[a]*i,f=n[a+1]*i,c=n[a+2]*i;p+=Math.abs((t[d]-t[c])*(t[1+f]-t[1+d])-(t[d]-t[f])*(t[1+c]-t[1+d]))}return 0===o&&0===p?0:Math.abs((p-o)/o)},n.flatten=function(t){for(var e=t[0][0].length,i={vertices:[],holes:[],dimensions:e},n=0,r=0;r<t.length;r++){for(var s=0;s<t[r].length;s++)for(var o=0;o<e;o++)i.vertices.push(t[r][s][o]);0<r&&(n+=t[r-1].length,i.holes.push(n))}return i}},{}]},{},[1])(1)},"object"==a(e)&&void 0!==t?t.exports=o():(r=[],void 0===(s="function"==typeof(n=o)?n.apply(e,r):n)||(t.exports=s))},320:function(t,e,i){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function s(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function o(t){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var l=Autodesk.Viewing,h=AutodeskNamespace("Autodesk.Viewing.Extensions.CompGeom");function u(e,i){for(var n in e)e.hasOwnProperty(n)&&(t.exports[n]=e[n],i[n]=e[n])}u(i(68),h),u(i(321),h),u(i(322),h),u(i(9),h),u(i(66),h),u(i(77),h),u(i(323),h),u(i(76),h),u(i(49),h),u(i(324),h),u(i(69),h),u(i(97),h),u(i(64),h),u(i(62),h),u(i(65),h),u(i(63),h),u(i(325),h),u(i(70),h),u(i(326),h),u(i(78),h);var p=function(t){"use strict";function e(t,i){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),s(this,o(e).call(this,t,i))}var i,n,l;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(e,t),i=e,(n=[{key:"load",value:function(){return!0}},{key:"unload",value:function(){return!0}},{key:"activate",value:function(){return!0}},{key:"deactivate",value:function(){return!1}}])&&r(i.prototype,n),l&&r(i,l),e}(l.Extension);l.theExtensionManager.registerExtension("Autodesk.CompGeom",p)},321:function(t,e,i){"use strict";i.r(e),i.d(e,"EdgeSet",(function(){return l}));var n=i(64),r=i(65),s=i(62);function o(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var a=Autodesk.Viewing.Private,l=function(){function t(e,i,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.edges=e,this.bbox=i,this.verts=new r.UniquePointList(i,n),this.polygon=null}var e,i,l;return e=t,(i=[{key:"getPointIndex",value:function(t,e){return this.verts.findOrAddPoint(t,e).id}},{key:"snapEdges",value:function(){for(var t=0;t<this.edges.length;t++){var e=this.edges[t];e.p1=this.getPointIndex(e.v1.x,e.v1.y),e.p2=this.getPointIndex(e.v2.x,e.v2.y)}}},{key:"sanitizeEdges",value:function(){for(var t={},e=[],i=0,n=this.edges.length;i<n;i++){var r=this.edges[i];if(r.p1!==r.p2){var s=Math.min(r.p1,r.p2)+":"+Math.max(r.p1,r.p2);!0!==t[s]&&(t[s]=!0,e.push(r))}}this.edges=e}},{key:"stitchContours",value:function(){this.contours=[];for(var t={},e=0;e<this.edges.length;e++){var i=this.edges[e];i.p1!==i.p2&&(void 0!==t[i.p1]?t[i.p1].push(i.p2):t[i.p1]=[i.p2],void 0!==t[i.p2]?t[i.p2].push(i.p1):t[i.p2]=[i.p1])}var n=[];for(var r in t)if(2!==t[r].length){a.logger.warn("Incomplete edge table");break}for(;;){var s=void 0;for(var r in t)if(t[r].length>1){s=r;break}if(!s)for(var r in t)if(t[r].length>0){s=r;break}if(!s)break;var o=-1,l=parseInt(s),h=t[s];for(n.push(l);h&&h.length;){var u=h.shift();if(u===o&&(u=h.shift()),void 0===u){delete t[l];break}n.push(u),(0==h.length||h[0]===o)&&delete t[l],o=l,l=u,h=t[u]}n.length&&(this.contours.push(n),n=[])}var p=[];for(e=0;e<this.contours.length;e++)(y=this.contours[e])[0]!==y[y.length-1]&&p.push(y);if(p.length)for(var d=!0;d;){d=!1;var f={},c=this.contours;for(e=0;e<c.length;e++){var y,v=(y=c[e])[0],x=y[y.length-1];v!==x&&(f[v]?f[v].push(-e-1):f[v]=[-e-1],f[x]?f[x].push(e):f[x]=[e])}for(var r in f){var P=f[r];if(2==P.length){var g=void 0;if(P[0]<0&&P[1]<0){var m=-P[0]-1;c[C=-P[1]-1].shift(),Array.prototype.push.apply(c[m].reverse(),c[C]),g=C}if(P[0]<0&&P[1]>0&&(m=-P[0]-1,c[C=P[1]].pop(),Array.prototype.push.apply(c[C],c[m]),g=m),P[0]>0&&P[1]<0){m=P[0];var C=-P[1]-1;c[m].pop(),Array.prototype.push.apply(c[m],c[C]),g=C}P[0]>0&&P[1]>0&&(m=P[0],C=P[1],c[m].pop(),Array.prototype.push.apply(c[m],c[C].reverse()),g=C),void 0!==g&&(c.splice(g,1),d=!0);break}}}}},{key:"cleanupFlatEdges",value:function(){for(var t=this.verts.pts,e=this.verts.precisionTolerance,i=0;i<this.contours.length;i++)for(var n=this.contours[i];;){for(var r=-1,s=1;s<n.length-1;s++){var o=n[s-1],a=n[s],l=n[s+1],h=t[o],u=t[a],p=t[l],d=u.x-h.x,f=u.y-h.y,c=p.x-u.x,y=p.y-u.y,v=Math.sqrt(d*d+f*f);if(v<e){r=s;break}var x=Math.sqrt(c*c+y*y);if(x<e){r=s;break}var P=(d/=v)*(c/=x)+(f/=v)*(y/=x);if(Math.abs(P-1)<.01){r=s;break}}if(r<0)break;n.splice(r,1)}}},{key:"triangulate",value:function(){var t=new n.IntervalTree(this.verts.pts,this.edges,this.bbox);t.build();var e=new s.ComplexPolygon(this.verts.pts,t,this.bbox);return e.contours=this.contours,e.triangulate(),e}}])&&o(e.prototype,i),l&&o(e,l),t}()},322:function(t,e,i){"use strict";i.r(e),i.d(e,"DCEL",(function(){return c}));var n=i(49),r=i(9),s=i(68),o=i(66),a=i(65);function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function h(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function u(t,e,i){return e&&h(t.prototype,e),i&&h(t,i),t}var p=Autodesk.Viewing.Private.logger,d=function(){function t(e,i){l(this,t),this.x=e,this.y=i,this.edges=[],this.dbIds=[],this.dbIdsChanged=!1}return u(t,[{key:"isDegenerate",value:function(){return this.edges.length<2}},{key:"addEdge",value:function(t){for(var e=0;e<this.edges.length;e++){var i=this.edges[e];if(i.v1===t.v1&&i.v2===t.v2)return i}return this.edges.push(t),t}},{key:"removeEdge",value:function(t){var e=this.edges.indexOf(t);e>=0?this.edges.splice(e,1):p.warn("Failed to find edge in vertex list")}},{key:"findEdgeTo",value:function(t){for(var e=0;e<this.edges.length;e++){var i=this.edges[e];if(i.getOppositeVertex(this)===t)return i}return null}},{key:"disconnect",value:function(){for(var t=0;t<this.edges.length;t++){var e=this.edges[t];e.getOppositeVertex(this).removeEdge(e)}var i=this.edges;return this.edges=[],i}},{key:"sortEdges",value:function(){var t=this;this.edges.sort((function(e,i){var n=e.angle;e.v1!==t&&(n-=Math.PI);var r=i.angle;return i.v1!==t&&(r-=Math.PI),n-r}))}},{key:"_canTraverse",value:function(t){return t.v1!==this||t.flagFwd?t.v2===this&&!t.flagRev&&(t.flagRev=1,!0):(t.flagFwd=1,!0)}},{key:"findUntraversedEdge",value:function(){for(var t=0;t<this.edges.length;t++){var e=this.edges[t];if(this._canTraverse(e))return e}return null}},{key:"findNextCCWEdge",value:function(t){var e=this.edges.indexOf(t);if(-1===e)return p.error("This edge isn't mine."),null;if(this.isDegenerate())return null;var i=(e+1)%this.edges.length,n=this.edges[i];return this._canTraverse(n)?n:null}}]),t}(),f=function(){function t(e,i,n){l(this,t);var s=!1;i.y<e.y?s=!0:i.y===e.y&&(s=i.x<e.x),s?(this.v1=i,this.v2=e):(this.v1=e,this.v2=i),this.dx=this.v2.x-this.v1.x,this.dy=this.v2.y-this.v1.y,this.length2=this.dx*this.dx+this.dy*this.dy,this.length=Math.sqrt(this.length2),this.angle=Math.atan2(this.dy,this.dx),this.angle<0&&(Object(r.isZero)(this.angle)?this.angle=0:Object(r.isEqual)(this.angle,-Math.PI)&&(this.angle=Math.PI),this.angle<0&&p.warn("Unexpected edge slope <0 :",this.angle)),this.id=n,this.minx=Math.min(this.v1.x,this.v2.x),this.miny=Math.min(this.v1.y,this.v2.y),this.maxx=Math.max(this.v1.x,this.v2.x),this.maxy=Math.max(this.v1.y,this.v2.y),this.flagFwd=0,this.flagRev=0,this.dbIdsCached=null}return u(t,[{key:"paramAlong",value:function(t,e){return((t-this.v1.x)*this.dx+(e-this.v1.y)*this.dy)/this.length2}},{key:"getOppositeVertex",value:function(t){return this.v1===t?this.v2:this.v2===t?this.v1:void p.warn("Edge does not own this vertex.")}},{key:"getDbIds",value:function(){if(!this.v1.dbIdsChanged&&!this.v2.dbIdsChanged)return this.dbIdsCached;for(var t=[],e=this.v1.dbIds,i=this.v2.dbIds,n=0;n<e.length;n++)-1!==i.indexOf(e[n])&&t.push(e[n]);return this.dbIdsCached=t,this.v1.dbIdsChanged=!1,this.v2.dbIdsChanged=!1,t}}]),t}(),c=function(){function t(e,i){l(this,t),this.bbox=e,this.boxSize=this.bbox.size().length(),this.precisionTolerance="number"==typeof i?i:r.TOL*this.boxSize,this.edges=[],this.verts=new a.UniquePointList(this.bbox,this.precisionTolerance,d,!0),this.quadTreeEdges=new o.QuadTree(this.bbox.min.x,this.bbox.min.y,this.bbox.max.x,this.bbox.max.y,this.precisionTolerance),this.nextEdgeId=1}return u(t,[{key:"_addVertex",value:function(t,e,i){return this.verts.findOrAddPoint(t,e,i)}},{key:"splitEdge",value:function(t,e){var i=[];i.push({x:t.v1.x,y:t.v1.y,u:0});for(var n=t.getDbIds(),s=0;s<e.length;s+=2){var o={x:e[s],y:e[s+1],u:t.paramAlong(e[s],e[s+1])};Object(r.isZero)(o.u)||Object(r.isEqual)(o.u,1)||i.push(o)}if(1!==i.length){i.push({x:t.v2.x,y:t.v2.y,u:1}),i.sort((function(t,e){return t.u-e.u})),this.removeDirectedEdge(t);for(var a=1;a<i.length;a++)this.addDirectedEdge(i[a-1].x,i[a-1].y,i[a].x,i[a].y,!0,n)}}},{key:"_enumNearEdges",value:function(t,e){this.quadTreeEdges.enumNearItems(t,e)}},{key:"addDirectedEdge",value:function(t,e,i,r,s,o){var a=this,l=this._addVertex(t,e,o),h=this._addVertex(i,r,o);if(l!==h&&!l.findEdgeTo(h)){var u=new f(l,h,this.nextEdgeId++),p=u.v1.addEdge(u);if(p!==u)return p;if(u.v2.addEdge(u),u.sourcePts=[t,e,i,r],this.edges[u.id]=u,this.quadTreeEdges.addItem(u),s)return p;var d=[],c={};for(var y in this._enumNearEdges(u,(function(t){var e=Object(n.segmentsIntersect)(t,u,a.precisionTolerance);e&&(e.e1&&e.e1.length&&(c[t.id]=e.e1),e.e2&&e.e2.length&&d.push.apply(d,e.e2))})),c)this.splitEdge(this.edges[parseInt(y)],c[y]);return d.length&&this.splitEdge(u,d),this.dirty=!0,p}}},{key:"removeDirectedEdge",value:function(t){t.v1.removeEdge(t),t.v2.removeEdge(t),this.edges[t.id]=void 0,this.quadTreeEdges.deleteItem(t)}},{key:"removeDanglingPolyline",value:function(t){for(;1===t.edges.length;){var e=t.edges[0],i=e.getOppositeVertex(t);this.removeDirectedEdge(e),t=i}}},{key:"cleanupFlatEdges",value:function(){var t=[];this.verts.forEach((function(e){if(e&&2===e.edges.length){var i=e.edges[0],n=e.edges[1],r=Math.abs(i.angle-n.angle);(r<.002||Math.abs(r-Math.PI)<.002)&&t.push(e);var s=i.getOppositeVertex(e),o=n.getOppositeVertex(e);if(s.findEdgeTo(o)).5*Math.abs(i.dx*n.dy-n.dx*i.dy)<.001&&t.push(e)}}));for(var e=0;e<t.length;e++){var i=t[e];if(2===i.edges.length){var n=i.edges[0],r=i.edges[1],s=n.getOppositeVertex(i),o=r.getOppositeVertex(i);this.removeDirectedEdge(n),this.removeDirectedEdge(r),this.verts.delete(i),this.addDirectedEdge(s.x,s.y,o.x,o.y,!0)}}if(t.length)return this.cleanupFlatEdges()}},{key:"_compactLists",value:function(){this.verts.compact();for(var t=[],e=0,i=this.edges.length;e<i;e++){var n=this.edges[e];n&&(n.oldid=n.id,n.flagFwd=0,n.flagRev=0,n.id=t.length,t.push(n))}this.edges=t}},{key:"_detectHolesNonZero",value:function(t){this.holes=[],this.outerPerimeter=this.closedAreas[this.closedAreas.length-1],this.outerPerimeter&&this.outerPerimeter.triangulate();for(var e=0,i=this.closedAreas.length-1;e<i;e++){for(var n=this.closedAreas[e],r=e-1;r>=0;r--){var s=this.closedAreas[r];if(n.containsPointFrom(s)){if(!s.isHole){n.isHole=!0,this.holes.push(n);break}n.addContourSet(s)}}n.isHole||n.triangulate(t)}for(var o=0,a=this.holes.length;o<a;o++){var l=this.holes[o];l.triangulate(t);for(var h=o-1;h>=0;h--){var u=this.holes[h];u.holeProcessFlag||l.containsPointFrom(u)&&(l.addContourSet(u),l.isHole=!1,u.holeProcessFlag=!0)}l.isHole||l.triangulate(t)}for(var p=[],d=0;d<this.closedAreas.length-1;d++){var f=this.closedAreas[d];f.isHole||(f.id=p.length,p.push(f))}this.closedAreas=p}},{key:"_detectHolesEvenOdd",value:function(t){var e=this.closedAreas;if(this.openAreas&&this.openAreas.length&&(e=e.concat(this.openAreas)),!e.length)return this.closedAreas=[],void(this.openAreas=null);for(var i={},n=0;n<e.length;n++){var r=e[n],o=r.hash();i[o]?0:i[o]=r}e=Object.values(i);for(var a=new s.ContourSet,l=0;l<e.length;l++)a.addContourSet(e[l]);a.triangulate(t||this.quadTreeEdges),a.triangulationFailed?this._detectHolesNonZero(t||this.quadTreeEdges):(this.closedAreas=[a],this.openAreas=[])}},{key:"finalize",value:function(t,e){this.cleanupFlatEdges(),this._compactLists(),this.verts.forEach((function(t){return t.sortEdges()}));var i=[],n=[];this.verts.forEach((function(t){var e=t.findUntraversedEdge();if(e){var r=[t],s=e.getOppositeVertex(t);do{if(r.push(s),!(e=s.findNextCCWEdge(e)))break;s=e.getOppositeVertex(s)}while(s&&s!==t);s===t?(r.push(t),i.push(r)):n.push(r)}})),this.closedAreas=[];for(var r=0,o=i.length;r<o;r++){var a=new s.ContourSet;a.addContour(i[r]),this.closedAreas.push(a)}if(this.closedAreas.sort((function(t,e){return t.area()-e.area()})),t?this._detectHolesEvenOdd(e):this._detectHolesNonZero(e),this.openAreas=[],n.length){for(var l=[],h=new s.ContourSet,u=0,p=n.length;u<p;u++)h.addContour(n[u]);h.stitchContours(),h.triangulate(),l.push(h),this.openAreas=l}}},{key:"deleteEdgesOnLine",value:function(t,e,i,r){var s=this,o=new d(t,e),a=new d(i,r),l=new f(o,a,-1),h={};for(var u in this._enumNearEdges(l,(function(t){var e=Object(n.segmentsIntersect)(t,l,s.precisionTolerance);e&&e.e1&&e.e1.length&&(h[t.id]=e.e1)})),h){var p=parseInt(u),c=this.edges[p];this.removeDirectedEdge(c),this.removeDanglingPolyline(c.v1),this.removeDanglingPolyline(c.v2)}this.dirty=!0}},{key:"deleteEdgesInRectangle",value:function(t,e,i,n){var r=Math.min(t,i),s=Math.min(e,n),o=Math.max(t,i),a=Math.max(e,n),l={};for(var h in this.quadTreeEdges.enumInBox(r,s,o,a,(function(t){l[t.id]=t})),l){var u=parseInt(h),p=this.edges[u];p&&(this.removeDirectedEdge(p),this.removeDanglingPolyline(p.v1),this.removeDanglingPolyline(p.v2))}this.dirty=!0}},{key:"findNearestVertex",value:function(t,e,i){"number"!=typeof i&&(i=this.precisionTolerance);var n=1/0,r=null;return this.verts.enumInBox(t-i,e-i,t+i,e+i,(function(i){var s=(i.x-t)*(i.x-t)+(i.y-e)*(i.y-e);s<n&&(n=s,r=i)})),n<=i*i?r:null}},{key:"findNearestPointOnEdge",value:function(t,e,i){"number"!=typeof i&&(i=this.precisionTolerance);var r={x:0,y:0,u:0,d:-1},s={x:0,y:0,d:1/0,e:null};return this.quadTreeEdges.enumInBox(t-i,e-i,t+i,e+i,(function(o){Object(n.pointOnLine)(t,e,o,!0,i,r)&&r.d<s.d&&(s.x=r.x,s.y=r.y,s.d=r.d,s.e=o)})),s.d<=i?s:null}}]),t}()},323:function(t,e,i){"use strict";i.r(e),i.d(e,"xBoxPlane",(function(){return r}));var n=new THREE.Vector3;function r(t,e){n.set(e.min.x,e.min.y,e.min.z);var i=t.distanceToPoint(n),r=Math.sign(i);n.set(e.min.x,e.min.y,e.max.z);var s=t.distanceToPoint(n);return Math.sign(s)!==r||(n.set(e.min.x,e.max.y,e.min.z),s=t.distanceToPoint(n),Math.sign(s)!==r||(n.set(e.min.x,e.max.y,e.max.z),s=t.distanceToPoint(n),Math.sign(s)!==r||(n.set(e.max.x,e.min.y,e.min.z),s=t.distanceToPoint(n),Math.sign(s)!==r||(n.set(e.max.x,e.min.y,e.max.z),s=t.distanceToPoint(n),Math.sign(s)!==r||(n.set(e.max.x,e.max.y,e.min.z),s=t.distanceToPoint(n),Math.sign(s)!==r||(n.set(e.max.x,e.max.y,e.max.z),s=t.distanceToPoint(n),Math.sign(s)!==r))))))}},324:function(t,e,i){"use strict";i.r(e),i.d(e,"xMeshPlane",(function(){return l})),i.d(e,"makePlaneBasis",(function(){return h})),i.d(e,"convertToPlaneCoords",(function(){return u}));var n=i(9),r=i(97),s=Autodesk.Viewing.Private.VertexEnumerator,o=new THREE.Matrix4,a=new THREE.Plane;function l(t,e,i){var n=e.geometry;if(n){var l=i.length,h=e.matrixWorld;o.getInverse(h),a.copy(t).applyMatrix4(o),s.enumMeshTriangles(n,(function(t,n,s,o,l,h){Object(r.xTrianglePlane)(a,t,n,s,o,l,h,i,e.fragId)}));for(var u=l,p=i.length;u<p;u++)i[u].v1.applyMatrix4(h),i[u].v2.applyMatrix4(h)}}function h(t){var e=new THREE.Vector3(0,0,1),i=t.normal.clone().cross(e);i=i.normalize();var r=e.dot(t.normal),s=new THREE.Matrix4;return Object(n.isZero)(i.x)&&Object(n.isZero)(i.y)&&Object(n.isZero)(i.z)?s.elements[14]=r*t.constant:(!function(t,e,i){var n=e,r=Math.sqrt(1-n*n),s=1-n,o=t.x,a=t.y,l=t.z,h=s*o,u=s*a;i.set(h*o+n,h*a-r*l,h*l+r*a,0,h*a+r*l,u*a+n,u*l-r*o,0,h*l-r*a,u*l+r*o,s*l*l+n,0,0,0,0,1)}(i,r,s),s.elements[14]=t.constant),s}function u(t,e,i){for(var n=0;n<e.length;n++){var r=e[n];r.v1.applyMatrix4(t),r.v2.applyMatrix4(t),i.expandByPoint(r.v1),i.expandByPoint(r.v2)}}},325:function(t,e,i){"use strict";function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}i.r(e),i.d(e,"getEllipsePoint",(function(){return r})),i.d(e,"getEllipseArcPoint",(function(){return s})),i.d(e,"normalizeAngle",(function(){return o})),i.d(e,"angleInsideArcCCW",(function(){return a})),i.d(e,"angleInsideArc",(function(){return l})),i.d(e,"EllipseArc",(function(){return u}));var r=function(t,e,i,n,r){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=o||new THREE.Vector2,l=e+n*Math.cos(t),h=i+r*Math.sin(t);if(0!==s){var u=Math.cos(s),p=Math.sin(s),d=l-e,f=h-i;l=d*u-f*p+e,h=d*p+f*u+i}return a.set(l,h)},s=function(t,e,i,n,s,a,l){var h=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null,p=l-a,d=Math.abs(p)<Number.EPSILON;if(d)return r(0,e,i,n,s,h,u);var f=(p=o(p))<Number.EPSILON;f&&(p=2*Math.PI);var c=a+t*p;return r(c,e,i,n,s,h,u)},o=function(t){return t/=2*Math.PI,(t-=Math.trunc(t))<0&&(t+=1),2*t*Math.PI},a=function(t,e,i){return t=o(t),(e=o(e))<(i=o(i))?t>=e&&t<=i:t>=e||t<=i},l=function(t,e,i){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r=a(t,e,i);return n?r:!r},h=function(t,e,i,n){var r=t*i+e*n,s=Math.sqrt(t*t+e*e)*Math.sqrt(i*i+n*n),o=Math.acos(Math.max(-1,Math.min(1,r/s)));return t*n-e*i<0&&(o=-o),o},u=function(){function t(e,i,n,r,s,o,a,l){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.set(e,i,n,r,s,o,a,l)}var e,i,o;return e=t,(i=[{key:"set",value:function(t,e,i,n,r,s,o,a){return this.cx=t,this.cy=e,this.rx=i,this.ry=n,this.startAngle=s,this.endAngle=o,this.ccw=a,this.rotation=r,this}},{key:"setFromSvgArc",value:function(t,e,i,n,r,s,o){var a=i*Math.PI/180;t=Math.abs(t),e=Math.abs(e);var l=(s.x-o.x)/2,u=(s.y-o.y)/2,p=Math.cos(a)*l+Math.sin(a)*u,d=-Math.sin(a)*l+Math.cos(a)*u,f=t*t,c=e*e,y=p*p,v=d*d,x=y/f+v/c;if(x>1){var P=Math.sqrt(x);f=(t*=P)*t,c=(e*=P)*e}var g=f*v+c*y,m=(f*c-g)/g,C=Math.sqrt(Math.max(0,m));n===r&&(C=-C);var _=C*t*d/e,I=-C*e*p/t,E=Math.cos(a)*_-Math.sin(a)*I+(s.x+o.x)/2,b=Math.sin(a)*_+Math.cos(a)*I+(s.y+o.y)/2,T=h(1,0,(p-_)/t,(d-I)/e),L=h((p-_)/t,(d-I)/e,(-p-_)/t,(-d-I)/e)%(2*Math.PI);return this.cx=E,this.cy=b,this.rx=t,this.ry=e,this.rotation=a,this.startAngle=T,this.endAngle=T+L,this.ccw=r,this}},{key:"getPoint",value:function(t,e){var i=this.startAngle,n=this.endAngle;return this.ccw||(i=this.endAngle,n=this.startAngle,t=1-t),s(t,this.cx,this.cy,this.rx,this.ry,i,n,this.rotation,e)}},{key:"computeBBox",value:function(t){var e=this,i=Math.tan(this.rotation),n=-Math.atan(this.ry*i/this.rx),s=Math.PI-Math.atan(this.ry*i/this.rx),o=Math.atan(this.ry/(i*this.rx)),a=Math.PI+Math.atan(this.ry/(i*this.rx)),h=t||new THREE.Box2,u=function(t){var i=r(t,e.cx,e.cy,e.rx,e.ry,e.rotation);h.expandByPoint(i)};return u(this.startAngle),u(this.endAngle),l(n,this.startAngle,this.endAngle,this.ccw)&&u(n),l(s,this.startAngle,this.endAngle,this.ccw)&&u(s),l(o,this.startAngle,this.endAngle,this.ccw)&&u(o),l(a,this.startAngle,this.endAngle,this.ccw)&&u(a),h}},{key:"tesselate",value:function(t,e,i){for(var n=new THREE.Vector2,r=this.getPoint(0),s=1;s<e;s++){var o=s/e,a=this.getPoint(o,n);a.distanceTo(r)<i||(t.lineTo(a.x,a.y),r.copy(a))}var l=this.getPoint(1,n);t.lineTo(l.x,l.y)}}])&&n(e.prototype,i),o&&n(e,o),t}()},326:function(t,e,i){"use strict";i.r(e),i.d(e,"hijackContextAPI",(function(){return u})),i.d(e,"LmvCanvasContext",(function(){return g}));var n=i(78);function r(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function s(t,e,i){return e&&r(t.prototype,e),i&&r(t,i),t}var o=Autodesk.Viewing,a=o.Private,l=a.VertexBufferBuilder,h=o.getGlobal().document;function u(t,e){["fillRect","strokeRect","clearRect","beginPath","closePath","moveTo","lineTo","arc","arcTo","quadraticCurveTo","bezierCurveTo","rect","fill","stroke","clip","strokeText","fillText","drawImage","save","restore","setLineDash","createPattern","beginMarkedContent","beginMarkedContentProps","endMarkedContent","setCurrentOperatorIndex","needDelegateInlineImageGroup","isLMVCanvasContext"].forEach((function(i){t["_original"+i]=t[i],t[i]=e[i].bind(e)}))}var p=new Array(6),d=new THREE.Vector2,f=new THREE.Box2,c=new THREE.Vector3,y=new THREE.Quaternion,v=new THREE.Vector3,x=new THREE.Vector3,P=new THREE.Matrix4,g=function(){function t(e,i,n,r,s,a,p){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var d=h.createElement("canvas"),f=d.getContext("2d");if(d.height=e.height,d.width=e.width,this.canvasContext=f,this.viewport=e,this.toPageUnits=i,this.meshCallback=n,1==e.clipToViewport){var c=e.offsetX||0,y=e.offsetY||0;this.bounds=new THREE.Vector4(c*i,y*i,(e.width+c)*i,(e.height+y)*i)}this.currentMeshIndex=0,this.imageNumber=0,this.currentVbb=new l(!1),this._curPath=null,this._curClip=null,this.first=!0,this.states=[],this.glyphCache={},this.usingTextLayer=s,this.precisionTolerance=.1,this.dbId=-1,this.consecutiveIds=!1,o.isMobileDevice()&&Autodesk.Extensions.CompGeom.SetTesselationParams(void 0,.1),this.fontEngine=r,this.lineStyle=0,this.isScreenSpace=!1,u(f,this),this.layers={},this.defaultLayerId=0,this.currentLayerId=this.defaultLayerId,this.sequencedDbId=-1,this.taggedId=null,this.defaultVPId=0,this.currentVpId=this.defaultVPId,this.viewports=[this.createViewPortData((new THREE.Matrix4).elements)],this.viewportMap={},this.ocgStack=[],this.idRemap=[],this.idIndexMap={},this.msdfRender=!0,this.fontAtlas=a,this.pdfRefMap=p||{}}return s(t,null,[{key:"isRef",value:function(t){return null!=t&&"number"==typeof t.num&&"number"==typeof t.gen}},{key:"refKey",value:function(t){return"".concat(t.num,"-").concat(t.gen)}}]),s(t,[{key:"destroy",value:function(){this.canvasContext=null,this.meshCallback=null}},{key:"updateDBId",value:function(){null!=this.taggedId?null!=this.idIndexMap[this.taggedId]?this.dbId=this.idIndexMap[this.taggedId]:(this.sequencedDbId++,this.dbId=this.sequencedDbId,this.idRemap[this.dbId]=this.taggedId,this.idIndexMap[this.taggedId]=this.dbId):(this.consecutiveIds&&(this.sequencedDbId++,this.dbId=this.sequencedDbId),this.idRemap[this.dbId]=this.dbId)}},{key:"save",value:function(){this.states.push({clip:this._curClip,consecutiveIds:this.consecutiveIds,lineDashedDef:this.lineDashedDef,lineStyle:this.lineStyle}),this.canvasContext._originalsave()}},{key:"restore",value:function(){var t=this.states.pop();t&&(this._curClip=t.clip,this.consecutiveIds=t.consecutiveIds,this.lineDashedDef=t.lineDashedDef,this.lineStyle=t.lineStyle),this.canvasContext._originalrestore()}},{key:"flushBuffer",value:function(t,e,i){if(this.currentVbb.vcount||e){var n=e;if((n=n||this.currentVbb.isFull(t))&&this.currentVbb.vcount){var r=this.currentVbb.toMesh();r.material={skipEllipticals:!this.currentVbb.numEllipticals,skipCircles:!this.currentVbb.numCirculars,skipTriangleGeoms:!this.currentVbb.numTriangleGeoms,useInstancing:this.currentVbb.useInstancing,isScreenSpace:!this.currentImage,hasLineStyles:this.currentVbb.hasLineStyles,msdfFontTexture:!!this.hasMSDFContent,viewportBounds:this.bounds,imageUVTexture:2===i},this.currentImage&&(r.material.image=this.currentImage,r.material.image.name=this.currentImage.cacheKey||this.imageNumber++,r.material.compositeOperation=this.canvasContext.globalCompositeOperation,r.material.compositeCanvasColor="#ffffff",r.material.opacity=this.canvasContext.globalAlpha,this.currentImage=null),this.meshCallback(r,this.currentMeshIndex++),this.currentVbb.reset(0),this.hasMSDFContent=!1}}}},{key:"addPolyTriangle",value:function(t,e,i,n,r,s){var o=this,a=null,l=this.currentVpId;function h(t,e){if(t>e){var i=t;t=e,e=i}if(a[t]){var n=a[t],r=n.lastIndexOf(e);-1==r?n.push(e):n[r]=-1}else a[t]=[e]}function u(e,s){if(e>s){var h=e;e=s,s=h}var u=a[e];u&&(-1!=u.indexOf(s)&&(o.flushBuffer(4),o.currentVbb.addSegment(t[2*e],t[2*e+1],t[2*s],t[2*s+1],o.currentLayerId,-.5,i,n,r,l,o.lineStyle)))}if(s){a=new Array(t.length/2);for(var p=0,d=e.length;p<d;p+=3){var f=e[p],c=e[p+1],y=e[p+2];h(f,c),h(c,y),h(y,f)}}if(isNaN(i)&&!0===i.isPattern){this.flushBuffer(0,!0);var v=i.image,x=t.length/2;this.flushBuffer(x);var P=(S=this.currentVbb).vcount,g=this.getCurrentTransform(),m=this.tx(0,0,g),C=this.ty(0,0,g),_=Math.abs(this.tx(v.width,v.height,g)-m),I=Math.abs(this.ty(v.width,v.height,g)-C);if("no-repeat"===i.repetition){var E=this.tx(v.width,v.height,g),b=this.ty(v.width,v.height,g);S.addVertexImagePolytriangle(m,C,0,0,4294967295,n,r,l),S.addVertexImagePolytriangle(m,b,0,-1,4294967295,n,r,l),S.addVertexImagePolytriangle(E,b,1,-1,4294967295,n,r,l),S.addVertexImagePolytriangle(E,C,1,0,4294967295,n,r,l),e=[0,1,2,0,2,3]}else for(p=0;p<x;++p){var T=((O=t[2*p])-m)/_,L=((N=t[2*p+1])-C)/I;S.addVertexImagePolytriangle(O,N,T,L,4294967295,n,r,l)}this.currentImage=v,S.addIndices(e,P),this.flushBuffer(0,!0,2)}else if(this.currentVbb.useInstancing)for(x=e.length,p=0;p<x;p+=3){f=e[p],c=e[p+1],y=e[p+2];this.flushBuffer(4),this.currentVbb.addTriangleGeom(t[2*f],t[2*f+1],t[2*c],t[2*c+1],t[2*y],t[2*y+1],i,n,r,l),s&&(u(f,c),u(c,y),u(y,f))}else{x=t.length/2;this.flushBuffer(x);var S;for(P=(S=this.currentVbb).vcount,p=0;p<x;++p){var O=t[2*p],N=t[2*p+1];S.addVertexPolytriangle(O,N,i,n,r,l)}S.addIndices(e,P),s&&function(){for(var e=0,s=a.length;e<s;e++){var h=a[e];if(h)for(var u=0;u<h.length;u++){var p=h[u];-1!=p&&(o.flushBuffer(4),o.currentVbb.addSegment(t[2*e],t[2*e+1],t[2*p],t[2*p+1],o.currentLayerId,-.5,i,n,r,l,o.lineStyle))}}}()}}},{key:"getFillColor",value:function(){if(this.canvasContext.fillStyle&&!0===this.canvasContext.fillStyle.isPattern)return this.canvasContext.fillStyle;if("string"!=typeof this.canvasContext.fillStyle)return console.warn("Unsupported fill style."),0;var t=parseInt(this.canvasContext.fillStyle.slice(1),16);return 255*this.canvasContext.globalAlpha<<24|(255&t)<<16|65280&t|t>>16&255}},{key:"getStrokeColor",value:function(){var t=this.canvasContext;if(this.lastStrokeStyle===t.strokeStyle&&t.globalAlpha===this.lastAlpha)return this.lastRgb;var e=parseInt(t.strokeStyle.slice(1),16),i=255*t.globalAlpha<<24|(255&e)<<16|65280&e|e>>16&255;return this.lastRgb=i,this.lastStrokeStyle=t.strokeStyle,this.lastAlpha=t.globalAlpha,i}},{key:"getCurrentTransform",value:function(){var t=this.canvasContext.mozCurrentTransform;if(this.isFontChar){var e=this.invXform,i=t[0],n=t[1],r=t[2],s=t[3],o=t[4],a=t[5];return p[0]=e[0]*i+e[2]*n,p[1]=e[1]*i+e[3]*n,p[2]=e[0]*r+e[2]*s,p[3]=e[1]*r+e[3]*s,p[4]=e[0]*o+e[2]*a+e[4],p[5]=e[1]*o+e[3]*a+e[5],p}return t}},{key:"tx",value:function(t,e,i){return(t*(i=i||this.getCurrentTransform())[0]+e*i[2]+i[4])*(this.isFontChar?1:this.toPageUnits)}},{key:"ty",value:function(t,e,i){return(t*(i=i||this.getCurrentTransform())[1]+e*i[3]+i[5])*(this.isFontChar?1:this.toPageUnits)}},{key:"scaleValue",value:function(t,e){return e=e||this.getCurrentTransform(),this.toPageUnits*Math.sqrt(Math.abs(e[0]*e[3]-e[1]*e[2]))*t}},{key:"transformBox",value:function(t,e,i){return e=e||this.getCurrentTransform(),f.makeEmpty(),d.set(this.tx(t.min.x,t.min.y,e),this.ty(t.min.x,t.min.y,e)),f.expandByPoint(d),d.set(this.tx(t.max.x,t.min.y,e),this.ty(t.max.x,t.min.y,e)),f.expandByPoint(d),d.set(this.tx(t.max.x,t.max.y,e),this.ty(t.max.x,t.max.y,e)),f.expandByPoint(d),d.set(this.tx(t.min.x,t.max.y,e),this.ty(t.min.x,t.max.y,e)),f.expandByPoint(d),i?(i.copy(f),i):f.clone()}},{key:"fillRect",value:function(t,e,i,n){this.updateDBId(),this.rect(t,e,i,n),this.dbId=this.first?-1:this.dbId,this.first=!1,this.fill(),this.beginPath()}},{key:"strokeRect",value:function(t,e,i,n){console.log("strokeRect")}},{key:"clearRect",value:function(t,e,i,n){console.log("clearRect")}},{key:"_beginTextChar",value:function(t,e,i,n,r){this.isFontChar=!0,this.invXform=this.canvasContext.mozCurrentTransformInverse,this.hashKey=t.charCodeAt(0)+"/"+n.loadedName+"/"+r,this.cachedGlyph=this.glyphCache[this.hashKey],this.cachedGlyph?this.skipPath=!0:this.skipPath=!1}},{key:"drawMSDFText",value:function(t,e,i,r,s){var o=r.name;function a(t,e,i,n,r,s){return Math.abs((s-n)*t-(r-i)*e+r*n-s*i)/Math.sqrt((s-n)*(s-n)+(r-i)*(r-i))}if(this.fontAtlas&&this.fontAtlas.charsMap&&this.fontAtlas.charsMap[o]){var l=this.fontAtlas.charsMap[o][t.charCodeAt(0)];if(null==l)return!1;this.currentVbb.isFull(4)&&this.flushBuffer(0,!0),this.hasMSDFContent=!0;var h=this.fontAtlas.chars[l];if(h.page>0)return!1;for(var u=this.fontAtlas.common[h.common],p=s/this.fontAtlas.info[h.info].size,d=h.width*(p+0),f=h.inverseYAxis?-1:1,c=h.height*(p+i)*f,y=h.txoffset*(p+0),v=h.tyoffset*(p+i)*-f,x=[y,v,y,v+c,y+d,v+c,y+d,v],P=[],g=0;g<x.length;g+=2)P.push(this.tx(x[g],x[g+1])),P.push(this.ty(x[g],x[g+1]));if(h.inverseYAxis)var m=[h.x/u.scaleW,1-h.y/u.scaleH,h.x/u.scaleW,1-(h.y+h.height)/u.scaleH,(h.x+h.width)/u.scaleW,1-(h.y+h.height)/u.scaleH,(h.x+h.width)/u.scaleW,1-h.y/u.scaleH];else m=[h.x/u.scaleW,1-(h.y+h.height)/u.scaleH,h.x/u.scaleW,1-h.y/u.scaleH,(h.x+h.width)/u.scaleW,1-h.y/u.scaleH,(h.x+h.width)/u.scaleW,1-(h.y+h.height)/u.scaleH];if(this._curClip){var C=new n.Path2D(this.precisionTolerance),_=0;C.moveTo(P[_++],P[_++]),C.lineTo(P[_++],P[_++]),C.lineTo(P[_++],P[_++]),C.lineTo(P[_++],P[_++]),C.closePath();var I=C.flattened||C.flatten(!0),E=this._curClip.flattened||this._curClip.flatten(!0),b=C.preCheckForClipping(this,E,I,!1,!1);if(b.needClipping){for(var T=C.msdfClipping(E),L=P[0],S=P[1],O=P[6],N=P[7],A=P[2],w=P[3],X=Math.sqrt((O-L)*(O-L)+(N-S)*(N-S)),Y=Math.sqrt((A-L)*(A-L)+(w-S)*(w-S)),F=0;F<T.length;F++){var B=T[F];this.currentVbb.isFull(B.vertices.length)&&this.flushBuffer(0,!0);for(var M=this.currentVbb.vcount,D=0;D<B.vertices.length;D+=2){var k=B.vertices[D],W=B.vertices[D+1],R=a(k,W,L,S,O,N),z=a(k,W,L,S,A,w),q=m[0]+(m[4]-m[0])*(z/X),V=m[1]+(m[5]-m[1])*(R/Y);this.currentVbb.addVertexMSDFPolytriangle(k,W,q,V,this.getFillColor(),this.dbId,this.currentLayerId,0)}this.currentVbb.addIndices(B.indices,M)}return this.currentImage=this.fontAtlas.pages[h.page],!0}if(b.needCancel)return!0}this.currentVbb.isFull(4)&&this.flushBuffer(0,!0);for(var H=this.currentVbb.vcount,Z=x.length/2,j=0;j<Z;j++)this.currentVbb.addVertexMSDFPolytriangle(P[2*j],P[2*j+1],m[2*j],m[2*j+1],this.getFillColor(),this.dbId,this.currentLayerId,0);return this.currentVbb.addIndices([0,2,1,0,2,3],H),this.currentImage=this.fontAtlas.pages[h.page],!0}return!1}},{key:"beginPath",value:function(t,e,i,r,s){this.updateDBId(),"string"==typeof t&&r&&s?this.fontAtlas&&this.drawMSDFText(t,e,i,r,s)||!0===this.usingTextLayer?this.skipPath=!0:this._beginTextChar(t,e,i,r,s):(this.skipPath=!1,this.isFontChar=!1,this.cachedGlyph=null),this.skipPath?this._curPath=null:(this._curPath=new n.Path2D(this.isFontChar?1e-4:this.precisionTolerance),this._curPath.setTessParams(this.tessParams))}},{key:"closePath",value:function(){this.skipPath||(this._curPath.closePath(),this.cachedGlyph=null)}},{key:"moveTo",value:function(t,e){if(!this.skipPath){this._curPath||this.beginPath();var i=this.getCurrentTransform();this._curPath.moveTo(this.tx(t,e,i),this.ty(t,e,i))}}},{key:"lineTo",value:function(t,e){if(!this.skipPath){var i=this.getCurrentTransform();this._curPath.lineTo(this.tx(t,e,i),this.ty(t,e,i))}}},{key:"arc",value:function(t,e,i,n,r,s){this.skipPath||this._curPath.arc(t,e,i,n,r,s)}},{key:"arcTo",value:function(t,e,i,n,r){if(!this.skipPath){var s=this.getCurrentTransform();this._curPath.arcTo(this.tx(t,e,s),this.ty(t,e,s),this.tx(i,n,s),this.ty(i,n,s),this.scaleValue(r,s))}}},{key:"quadraticCurveTo",value:function(t,e,i,n){if(!this.skipPath){var r=this.getCurrentTransform();this._curPath.quadraticCurveTo(this.tx(t,e,r),this.ty(t,e,r),this.tx(i,n,r),this.ty(i,n,r))}}},{key:"bezierCurveTo",value:function(t,e,i,n,r,s){if(!this.skipPath){var o=this.getCurrentTransform();this._curPath.bezierCurveTo(this.tx(t,e,o),this.ty(t,e,o),this.tx(i,n,o),this.ty(i,n,o),this.tx(r,s,o),this.ty(r,s,o))}}},{key:"ellipse",value:function(t,e,i,n,r,s,o,a){if(!this.skipPath){var l=this.getCurrentTransform();this._curPath.ellipse(this.tx(t,e,l),this.ty(t,e,l),this.scaleValue(i,l),this.scaleValue(n,l),r,s,o,a)}}},{key:"rect",value:function(t,e,i,n){if(!this.skipPath){var r=this.getCurrentTransform();this._curPath||this.beginPath(),this._curPath.moveTo(this.tx(t,e,r),this.ty(t,e,r)),this._curPath.lineTo(this.tx(t+i,e,r),this.ty(t+i,e,r)),this._curPath.lineTo(this.tx(t+i,e+n,r),this.ty(t+i,e+n,r)),this._curPath.lineTo(this.tx(t,e+n,r),this.ty(t,e+n,r)),this._curPath.closePath()}}},{key:"fill",value:function(){var t=!1;if(arguments.length){var e,i=(e=arguments.length-1)<0||arguments.length<=e?void 0:arguments[e];"boolean"==typeof i&&(t=i)}this.isFontChar&&!this.cachedGlyph&&(this.glyphCache[this.hashKey]=this._curPath,this.cachedGlyph=this._curPath,this.cachedGlyph.isFontChar=!0),this.isFontChar=!1,this.cachedGlyph?this.cachedGlyph.fill(this,this.getFillColor(),this.dbId,this.currentLayerId,this._curClip,!0):this._curPath&&this._curPath.fill(this,this.getFillColor(),this.dbId,this.currentLayerId,this._curClip,!1,t),this.skipPath=!1}},{key:"stroke",value:function(){this.isFontChar&&!this.cachedGlyph&&(this.glyphCache[this.hashKey]=this._curPath,this.cachedGlyph=this._curPath,this.cachedGlyph.isFontChar=!0),this.updateLineDashStyle(),this.isFontChar=!1;var t=this.isScreenSpace?-1:1;this.cachedGlyph?this.cachedGlyph.stroke(this,t*this.scaleValue(this.canvasContext.lineWidth),this.getStrokeColor(),this.dbId,this.currentLayerId,this._curClip,!0,this.lineStyle):this._curPath&&this._curPath.stroke(this,t*this.scaleValue(this.canvasContext.lineWidth),this.getStrokeColor(),this.dbId,this.currentLayerId,this._curClip,!1,this.lineStyle),this.skipPath=!1}},{key:"clip",value:function(t,e){void 0!==e&&void 0!==t?(this._curClip=t,console.log("Probably unsupported use case")):(this._curClip?this._curClip=this._curClip.clip(this._curPath,t):this._curClip=this._curPath,this._curPath=null)}},{key:"strokeText",value:function(t,e,i,n,r,s){var o=this.canvasContext;o.save(),o.translate(e,i),this.fontEngine.drawText(this,t,0,0,r,s),this.stroke(),o.restore()}},{key:"fillText",value:function(t,e,i,n,r,s){var o=this.canvasContext;o.save(),o.translate(e,i),this.fontEngine.drawText(this,t,0,0,r,s),this.fill(),o.restore()}},{key:"drawImage",value:function(t,e,i,n,r,s,o,a,l){if(this.inlineImageGroups&&null!=this.inlineImageGroups.map[this.currentOpIndex]){var h=this.inlineImageGroups.map[this.currentOpIndex],u=this.inlineImageGroups.groups[h];if(1==u.rendered)return;u.rendered=!0,t=u.canvas;var p=1/u.minScale;s=u.bounds.min.x,o=u.bounds.min.y,a=t.width/p,l=t.height/p}if(0!==t.width&&0!==t.height)if(void 0===s&&(s=e,o=i,a=n,l=r),void 0===a&&(a=t.width,l=t.height),a){var d=this.getCurrentTransform(),f=this.tx(s+a/2,o+l/2),g=this.ty(s+a/2,o+l/2);P.elements[0]=d[0],P.elements[1]=d[1],P.elements[4]=d[2],P.elements[5]=d[3],P.elements[12]=d[4],P.elements[13]=d[5],P.decompose(c,y,v);var m=a*v.x*this.toPageUnits,C=-l*v.y*this.toPageUnits,_=Math.sqrt(1-y.w*y.w);x.set(y.x/_,y.y/_,y.z/_);var I=2*Math.acos(Math.max(Math.min(1,y.w),-1));y.z<0&&(I=-I),I<0&&(I+=2*Math.PI),this.flushBuffer(0,!0),this.currentVbb.addTexturedQuad(f,g,m,C,I,4294902015,0,this.currentLayerId,0),this.currentImage=t,this.flushBuffer(0,!0,1)}else console.warn("Zero size image, skipping");else console.warn("Zero size image, skipping")}},{key:"_processProperties",value:function(e){for(var i in t.isRef(e)&&(e=this.pdfRefMap[t.refKey(e)]),e)t.isRef(e[i])&&(e[i]=this.pdfRefMap[t.refKey(e[i])]);return e}},{key:"beginMarkedContent",value:function(t){t&&(t=this._processProperties(t));var e=t.name||t.DBID;isNaN(e)?this.taggedId=null:this.taggedId=parseInt(e),null!=this.taggedId&&this.dbId!=this.taggedId&&this.updateDBId(),t.VP&&(this.currentVpId=this.viewports.length,this.viewports.push(this.createViewPortData(JSON.parse(t.VP),t.UNITS))),this.ocgStack.push({taggedId:this.taggedId,viewPortId:this.currentVpId})}},{key:"beginMarkedContentProps",value:function(t,e){if(e&&(e=this._processProperties(e)),"OC"===t){var i=e.ocgId,n=this.layers[i];null==n&&(n=this.defaultLayerId),this.currentLayerId=n,this.ocgStack.push({layerId:this.currentLayerId})}else isNaN(t)||(this.taggedId=parseInt(t),this.dbId!=this.taggedId&&this.updateDBId()),e?(e.VP&&(this.currentVpId=this.viewports.length,this.viewports.push(this.createViewPortData(JSON.parse(e.VP),e.UNITS))),this.ocgStack.push({viewPortId:this.currentVpId,taggedId:this.taggedId})):this.ocgStack.push({})}},{key:"endMarkedContent",value:function(){var t=this.ocgStack.pop(),e=this.taggedId;if(t&&(null!=t.taggedId&&(this.taggedId=null),t.layerId&&(this.currentLayerId=this.defaultLayerId),t.viewPortId&&(this.currentVpId=this.defaultVPId)),this.ocgStack.length>0){var i=this.ocgStack[this.ocgStack.length-1];null!=i.taggedId&&(this.taggedId=i.taggedId),null!=i.currentLayerId&&(this.currentLayerId=i.currentLayerId),null!=i.viewPortId&&(this.currentVpId=i.viewPortId)}else this.currentLayerId=this.defaultLayerId,this.taggedId=null,this.currentVpId=this.defaultVPId;e!=this.taggedId&&this.updateDBId()}},{key:"setLineStyleParam",value:function(t){if(!this.lineStyleInitialized){for(var e=a.LineStyleDefs.length,i=1,n=0;n<a.LineStyleDefs.length;n++)i=Math.max(a.LineStyleDefs[n].def.length,i);var r=a.createLinePatternTextureData(Math.max(t.width,i),t.height+e+1),s=r.tex,o=r.pw,l=r.lineStyleTex;this.lineStyleIndex=0,this.lineStylePw=o,this.lineStyleTexData=s,this.lineStyleTexture=l,this.lineStyleIndexMap={};for(n=0;n<a.LineStyleDefs.length;n++)this.addNewDashedLineStyle(a.LineStyleDefs[n],96);this.lineStyle=0,this.lineStyleInitialized=!0}}},{key:"addNewDashedLineStyle",value:function(t,e){var i=t.def.join("/");if(null!=this.lineStyleIndexMap[i])return this.lineStyleIndexMap[i];a.createLinePatternForDef(t,this.lineStyleTexData,this.lineStyleIndex,this.lineStylePw,e);var n=this.lineStyleIndex;return this.lineStyleIndexMap[i]=n,this.lineStyleIndex++,n}},{key:"setLineDash",value:function(t){this.lineStyleInitialized||this.setLineStyleParam({width:5,height:4}),this.lineDashedDef=t}},{key:"createPattern",value:function(t,e){var i=this.canvasContext._originalcreatePattern(t,e);return i.image=t,i.repetition=e,i.isPattern=!0,i}},{key:"updateLineDashStyle",value:function(){var t=this.lineDashedDef;if(t)if(t.length>0){for(var e=this.getCurrentTransform(),i=[],n=0;n<t.length;n++){var r=(t[n]*e[0]+t[n]*e[2])*this.toPageUnits;r=parseFloat(r.toFixed(6)),i.push(r)}this.lineStyle=this.addNewDashedLineStyle({def:i},96/72/this.toPageUnits)}else this.lineStyle=0}},{key:"setCircleInfo",value:function(t){this.circleInfo=t}},{key:"setCurrentOperatorIndex",value:function(t){if(this.currentOpIndex=t,this.circleInfo&&this.circleInfo[t]){var e=this.getCurrentTransform(),i=this.tx(this.circleInfo[t][0],this.circleInfo[t][1],e),n=this.ty(this.circleInfo[t][0],this.circleInfo[t][1],e),r=this.currentVbb.addVertexLine(i,n,0,1e-4,0,0,33554431,this.dbId,this.currentLayerId,this.currentVpId);this.currentVbb.finalizeQuad(r)}}},{key:"setInlineImageGroups",value:function(t){t&&t.groups.length>0&&(this.inlineImageGroups=t)}},{key:"needDelegateInlineImageGroup",value:function(){return this.inlineImageGroups&&null!=this.inlineImageGroups.map[this.currentOpIndex]}},{key:"setTessParams",value:function(t){this.tessParams=t}},{key:"finish",value:function(){this.flushBuffer(0,!0),this.fontAtlas=null}},{key:"createViewPortData",value:function(t,e){return{units:e||"feet and inches",transform:t,geom_metrics:this.initGeomMetrics()}}},{key:"isLMVCanvasContext",value:function(){return!0}},{key:"initGeomMetrics",value:function(){return{arcs:0,circles:0,circ_arcs:0,viewports:0,clips:0,colors:0,db_ids:0,dots:0,fills:0,layers:0,line_caps:0,line_joins:0,line_patterns:0,line_pat_refs:0,plines:0,pline_points:0,line_weights:0,links:0,miters:0,ptris:0,ptri_indices:0,ptri_points:0,rasters:0,texts:0,strings:[]}}},{key:"addContextCurrentTransform",value:function(){var t=this.canvasContext;t.mozCurrentTransform||(t._originalSave=t.save,t._originalRestore=t.restore,t._originalRotate=t.rotate,t._originalScale=t.scale,t._originalTranslate=t.translate,t._originalTransform=t.transform,t._originalSetTransform=t.setTransform,t._transformMatrix=t._transformMatrix||[1,0,0,1,0,0],t._transformStack=[],Object.defineProperty(t,"mozCurrentTransform",{get:function(){return this._transformMatrix}}),Object.defineProperty(t,"mozCurrentTransformInverse",{get:function(){var t=this._transformMatrix,e=t[0],i=t[1],n=t[2],r=t[3],s=t[4],o=t[5],a=e*r-i*n,l=i*n-e*r;return[r/a,i/l,n/l,e/a,(r*s-n*o)/l,(i*s-e*o)/a]}}),t.save=function(){var t=this._transformMatrix;this._transformStack.push(t),this._transformMatrix=t.slice(0,6),this._originalSave()},t.restore=function(){var t=this._transformStack.pop();t&&(this._transformMatrix=t,this._originalRestore())},t.translate=function(t,e){var i=this._transformMatrix;i[4]=i[0]*t+i[2]*e+i[4],i[5]=i[1]*t+i[3]*e+i[5],this._originalTranslate(t,e)},t.scale=function(t,e){var i=this._transformMatrix;i[0]=i[0]*t,i[1]=i[1]*t,i[2]=i[2]*e,i[3]=i[3]*e,this._originalScale(t,e)},t.transform=function(e,i,n,r,s,o){var a=this._transformMatrix;this._transformMatrix=[a[0]*e+a[2]*i,a[1]*e+a[3]*i,a[0]*n+a[2]*r,a[1]*n+a[3]*r,a[0]*s+a[2]*o+a[4],a[1]*s+a[3]*o+a[5]],t._originalTransform(e,i,n,r,s,o)},t.setTransform=function(e,i,n,r,s,o){this._transformMatrix=[e,i,n,r,s,o],t._originalSetTransform(e,i,n,r,s,o)},t.rotate=function(t){var e=Math.cos(t),i=Math.sin(t),n=this._transformMatrix;this._transformMatrix=[n[0]*e+n[2]*i,n[1]*e+n[3]*i,n[0]*-i+n[2]*e,n[1]*-i+n[3]*e,n[4],n[5]],this._originalRotate(t)})}}]),t}()},49:function(t,e,i){"use strict";function n(t){return Math.abs(t)}i.r(e),i.d(e,"ONE_INTERSECTION",(function(){return s})),i.d(e,"OVERLAP",(function(){return o})),i.d(e,"pointOnLine",(function(){return a})),i.d(e,"segmentsIntersect",(function(){return l}));var r=i(9).TOL,s=4,o=5;function a(t,e,i,n,s,o){if(i.length<r)return!1;var a=(t-i.v1.x)*i.dx+(e-i.v1.y)*i.dy;s||(s=r*i.length);var l=a/i.length2;if(n&&(l*i.length<-s||l*i.length>i.length+s))return!1;var h=i.v1.x+l*i.dx,u=i.v1.y+l*i.dy,p=(h-t)*(h-t)+(u-e)*(u-e);return o&&(o.x=h,o.y=u,o.d=Math.sqrt(p),o.u=l),p<s*s}function l(t,e,i){var l=e.dy*t.dx-e.dx*t.dy,h=e.dx*(t.v1.y-e.v1.y)-e.dy*(t.v1.x-e.v1.x),u=t.dx*(t.v1.y-e.v1.y)-t.dy*(t.v1.x-e.v1.x);if(n(h)<r&&n(u)<r&&n(l)<r)return null;if(n(l)<r)return function(t,e,i){if(!a(e.v1.x,e.v1.y,t,!1,i))return null;var n={status:o,e1:[],e2:[]},r=a(e.v1.x,e.v1.y,t,!0,i),s=a(e.v2.x,e.v2.y,t,!0,i);if(r&&s)return n.e1.push(e.v1.x,e.v1.y,e.v2.x,e.v2.y),n;var l=a(t.v1.x,t.v1.y,e,!0,i),h=a(t.v2.x,t.v2.y,e,!0,i);return r&&n.e1.push(e.v1.x,e.v1.y),s&&n.e1.push(e.v2.x,e.v2.y),l&&n.e2.push(t.v1.x,t.v1.y),h&&n.e2.push(t.v2.x,t.v2.y),n}(t,e,i);var p=h/l,d=p*t.length;if(d<-i||d>t.length+i)return null;var f=u/l*e.length;if(f<-i||f>e.length+i)return null;var c=t.v1.x+p*t.dx,y=t.v1.y+p*t.dy;return{status:s,e1:[c,y],e2:[c,y]}}},50:function(t,e){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch(t){"object"==typeof window&&(i=window)}t.exports=i},62:function(t,e,i){"use strict";i.r(e),i.d(e,"ComplexPolygon",(function(){return l}));var n=i(63),r=i(64),s=i(49);function o(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var a=Autodesk.Viewing.Private;a.logger;var l=function(){function t(e,i,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.pts=e,this.contours=[],this.customInsideChecker=i,this.bbox=n}var e,i,l;return e=t,(i=[{key:"addContour",value:function(t){this.contours.push(t)}},{key:"pointInContour",value:function(t,e,i){var n,r,s,o,a,l,h=!1,u=this.pts;s=u[i[i.length-1]].x,n=(o=u[i[i.length-1]].y)>=e;for(var p=0,d=i.length;p<d;++p)a=u[i[p]].x,n!=(r=(l=u[i[p]].y)>=e)&&(l-e)*(s-a)>=(a-t)*(o-l)==r&&(h=!h),n=r,s=a,o=l;return h}},{key:"pointInPolygon",value:function(t,e){for(var i=!1,n=0;n<this.contours.length;n++)this.pointInContour(t,e,this.contours[n])&&(i=!i);return i}},{key:"triangulate",value:function(){try{this.triangulateInternal()}catch(t){if(-1!==t.message.indexOf("Collinear not supported!"))try{this.triangulateInternal(!0)}catch(t){this.triangulationFailed=!0}else this.triangulationFailed=!0}}},{key:"createPointInPolygonChecker",value:function(){for(var t=[],e=0;e<this.contours.length;e++)for(var i=this.contours[e],n=i.length,s=0;s<n-1;s++){var o={p1:i[s],p2:i[s+1]};t.push(o)}var a=new r.IntervalTree(this.pts,t,this.bbox);a.build(),this.customInsideChecker=a}},{key:"triangulateInternal",value:function(t){if(!this.contours.length)return this.triangulationFailed=!0,void(this.indices=null);this.indices=[];var e=function(t,e){for(var i=e.size(),n=e.min.x+.5*i.x,r=e.min.y+.5*i.y,s=2/i.length(),o=[],a=0,l=t.length;a<l;a++)o.push({x:(t[a].x-n)*s,y:(t[a].y-r)*s,_triidx:a+1});return o}(this.pts,this.bbox);t&&function(t){for(var e=0,i=t.length;e<i;e++)t[e].x+=1e-9*(Math.random()-.5),t[e].y+=1e-9*(Math.random()-.5)}(e);var i=new n.SweepContext([]);i.points_=e;for(var r=0;r<this.contours.length;r++){for(var s=this.contours[r],o=s[0]!==s[s.length-1],a=o?s.length:s.length-1,l=new Array(a),h=0;h<a;h++)l[h]=e[s[h]];i.initEdges(l,o)}i.triangulate(),this.processResult(i),this.triangulationFailed=!this.indices||!this.indices.length}},{key:"processResult",value:function(t){this.pts.length>10&&!this.customInsideChecker&&this.createPointInPolygonChecker();for(var e=t.map_,i=0;i<e.length;i++){var n=e[i].points_,r=n[0],s=n[1],o=n[2],a=r._triidx,l=s._triidx,h=o._triidx;a&&l&&h&&this.filterFace(a-1,l-1,h-1)}}},{key:"filterFace",value:function(t,e,i){var n=this.pts[t],r=this.pts[e],s=this.pts[i],o=(n.x+r.x+s.x)/3,a=(n.y+r.y+s.y)/3;if(this.customInsideChecker?this.customInsideChecker.pointInPolygon(o,a):this.pointInPolygon(o,a)){var l=r.x-n.x,h=r.y-n.y,u=s.x-n.x;l*(s.y-n.y)-u*h>0?this.indices.push(t,e,i):this.indices.push(t,i,e)}}},{key:"findSegmentIntersections",value:function(t,e,i,n){if(!this.cachedEdges){this.cachedEdges=[];for(var r=0;r<this.contours.length;r++)for(var o=this.contours[r],a=0;a<o.length-1;a++){var l=this.pts[o[a]].x,h=this.pts[o[a]].y,u=this.pts[o[a+1]].x,p=this.pts[o[a+1]].y,d={v1:{x:l,y:h},v2:{x:u,y:p},dx:u-l,dy:p-h,length:Math.sqrt(Math.pow(l-u,2)+Math.pow(h-p,2))};this.cachedEdges.push(d)}}for(var f={v1:{x:t,y:e},v2:{x:i,y:n},dx:i-t,dy:n-e,length:Math.sqrt(Math.pow(t-i,2)+Math.pow(e-n,2))},c=1e-4*this.bbox.size().length(),y=[],v=0;v<this.cachedEdges.length;v++){var x=this.cachedEdges[v],P=Object(s.segmentsIntersect)(f,x,c);if(P&&P.status===s.ONE_INTERSECTION){var g={x:P.e1[0],y:P.e1[1]};g.d=Math.sqrt(Math.pow(g.x-t,2)+Math.pow(g.y-e,2)),y.push(g)}}return y.length&&(y.sort((function(t,e){return t.d-e.d})),y[0].d<c&&y.shift(),y.length&&Math.abs(y[y.length-1].d-f.length)<c&&y.pop()),y.length?y:null}},{key:"toPolygonMesh",value:function(t){if(this.polygonMesh)return this.polygonMesh;for(var e=this.pts,i=new THREE.BufferGeometry,n=new Float32Array(3*e.length),r=0;r<e.length;r++)n[3*r]=e[r].x,n[3*r+1]=e[r].y,n[3*r+2]=0;i.addAttribute("position",new THREE.BufferAttribute(n,3));for(var s=t?new Uint16Array(2*e.length):new Float32Array(3*e.length),o=0;o<e.length;o++)if(t){var a=.5*(0/Math.PI+1);s[2*o]=65535*a|0,s[2*o+1]=65535}else s[3*o]=0,s[3*o+1]=0,s[3*o+2]=1;i.addAttribute("normal",new THREE.BufferAttribute(s,t?2:3)),t&&(i.attributes.normal.bytesPerItem=2,i.attributes.normal.normalize=!0);var l=new Uint16Array(this.indices.length);return l.set(this.indices),i.addAttribute("index",new THREE.BufferAttribute(l,1)),i.streamingDraw=!0,i.streamingIndex=!0,this.polygonMesh=i,i}},{key:"toExtrudedMesh",value:function(t){if(this.extrudedMesh)return this.extrudedMesh;if(void 0===t&&(t=1),!this.indices)return null;for(var e=[],i=[],n=[],r=0,s=this.pts,o=0;o<s.length;o++)e.push(s[o].x,s[o].y,0),e.push(0,0,1);for(var l=this.indices,h=0;h<l.length;h+=3)i.push(l[h],l[h+1],l[h+2]);r+=s.length;for(var u=0;u<s.length;u++)e.push(s[u].x,s[u].y,-t),e.push(0,0,-1);for(var p=0;p<l.length;p+=3)i.push(r+l[p],r+l[p+2],r+l[p+1]);r+=s.length;for(var d=new Vector3,f=new Box3,c=0;c<this.contours.length;c++)for(var y=this.contours[c],v=0;v<y.length-1;v++){var x=this.pts[y[v]].x,P=this.pts[y[v]].y;d.set(x,P,0),f.expandByPoint(d);var g=this.pts[y[v+1]].x,m=this.pts[y[v+1]].y;d.set(g,m,0),f.expandByPoint(d),d.set(x,P,0-t),f.expandByPoint(d),d.set(P-m,g-x,0).normalize(),n.push(r,r+1,r,r+2,r+1,r+3,r+2,r+3),c>0?(e.push(x,P,0,-d.x,-d.y,-d.z,g,m,0,-d.x,-d.y,-d.z,x,P,0-t,-d.x,-d.y,-d.z,g,m,0-t,-d.x,-d.y,-d.z),i.push(r,r+3,r+2,r,r+1,r+3)):(e.push(x,P,0,d.x,d.y,d.z,g,m,0,d.x,d.y,d.z,x,P,0-t,d.x,d.y,d.z,g,m,0-t,d.x,d.y,d.z),i.push(r,r+2,r+3,r+0,r+3,r+1)),r+=4}var C=new Float32Array(e.length);C.set(e);var _=new Uint16Array(i.length);_.set(i);var I=new Uint16Array(n.length);I.set(n);var E={mesh:{vb:C,indices:_,iblines:I,vbstride:6,vblayout:{position:{offset:0,itemSize:3,bytesPerItem:4},normal:{offset:3,itemSize:3,bytesPerItem:4}},boundingBox:f,boundingSphere:{center:f.center(),radius:.5*f.size().length}}};return a.BufferGeometryUtils.meshToGeometry(E),E.geometry.streamingDraw=!0,E.geometry.streamingIndex=!0,this.extrudedMesh=E.geometry,this.extrudedMesh}}])&&o(e.prototype,i),l&&o(e,l),t}()},63:function(t,e,i){(function(i){var n,r,s,o;function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}o=function(){return function t(e,i,n){function r(o,a){if(!i[o]){if(!e[o]){if(s)return s(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var h=i[o]={exports:{}};e[o][0].call(h.exports,(function(t){var i=e[o][1][t];return r(i||t)}),h,h.exports,t,e,i,n)}return i[o].exports}for(var s=!1,o=0;o<n.length;o++)r(n[o]);return r}({1:[function(t,e,i){e.exports={version:"1.5.0"}},{}],2:[function(t,e,i){"use strict";var n=function(t,e){this.head_=t,this.tail_=e,this.search_node_=t};n.prototype.head=function(){return this.head_},n.prototype.setHead=function(t){this.head_=t},n.prototype.tail=function(){return this.tail_},n.prototype.setTail=function(t){this.tail_=t},n.prototype.search=function(){return this.search_node_},n.prototype.setSearch=function(t){this.search_node_=t},n.prototype.findSearchNode=function(){return this.search_node_},n.prototype.locateNode=function(t){var e=this.search_node_;if(t<e.value){for(;e=e.prev;)if(t>=e.value)return this.search_node_=e,e}else for(;e=e.next;)if(t<e.value)return this.search_node_=e.prev,e.prev;return null},n.prototype.locatePoint=function(t){var e=t.x,i=this.findSearchNode(e),n=i.point.x;if(e===n){if(t!==i.point)if(t===i.prev.point)i=i.prev;else{if(t!==i.next.point)throw new Error("poly2tri Invalid AdvancingFront.locatePoint() call");i=i.next}}else if(e<n)for(;(i=i.prev)&&t!==i.point;);else for(;(i=i.next)&&t!==i.point;);return i&&(this.search_node_=i),i},e.exports=n,e.exports.Node=function(t,e){this.point=t,this.triangle=e||null,this.next=null,this.prev=null,this.value=t.x}},{}],3:[function(t,e,i){"use strict";e.exports=function(t,e){if(!t)throw new Error(e||"Assert Failed")}},{}],4:[function(t,e,i){"use strict";var n=t("./xy"),r=function(t,e){this.x=+t||0,this.y=+e||0,this._p2t_edge_list=null};r.prototype.toString=function(){return n.toStringBase(this)},r.prototype.toJSON=function(){return{x:this.x,y:this.y}},r.prototype.clone=function(){return new r(this.x,this.y)},r.prototype.set_zero=function(){return this.x=0,this.y=0,this},r.prototype.set=function(t,e){return this.x=+t||0,this.y=+e||0,this},r.prototype.negate=function(){return this.x=-this.x,this.y=-this.y,this},r.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this},r.prototype.sub=function(t){return this.x-=t.x,this.y-=t.y,this},r.prototype.mul=function(t){return this.x*=t,this.y*=t,this},r.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},r.prototype.normalize=function(){var t=this.length();return this.x/=t,this.y/=t,t},r.prototype.equals=function(t){return this.x===t.x&&this.y===t.y},r.negate=function(t){return new r(-t.x,-t.y)},r.add=function(t,e){return new r(t.x+e.x,t.y+e.y)},r.sub=function(t,e){return new r(t.x-e.x,t.y-e.y)},r.mul=function(t,e){return new r(t*e.x,t*e.y)},r.cross=function(t,e){return"number"==typeof t?"number"==typeof e?t*e:new r(-t*e.y,t*e.x):"number"==typeof e?new r(e*t.y,-e*t.x):t.x*e.y-t.y*e.x},r.toString=n.toString,r.compare=n.compare,r.cmp=n.compare,r.equals=n.equals,r.dot=function(t,e){return t.x*e.x+t.y*e.y},e.exports=r},{"./xy":11}],5:[function(t,e,i){"use strict";var n=t("./xy"),r=function(t,e){this.name="PointError",this.points=e=e||[],this.message=t||"Invalid Points!";for(var i=0;i<e.length;i++)this.message+=" "+n.toString(e[i])};(r.prototype=new Error).constructor=r,e.exports=r},{"./xy":11}],6:[function(t,e,n){(function(e){"use strict";var i=e.poly2tri;n.noConflict=function(){return e.poly2tri=i,n},n.VERSION=t("../dist/version.json").version,n.PointError=t("./pointerror"),n.Point=t("./point"),n.Triangle=t("./triangle"),n.SweepContext=t("./sweepcontext");var r=t("./sweep");n.triangulate=r.triangulate,n.sweep={Triangulate:r.triangulate}}).call(this,void 0!==i?i:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../dist/version.json":1,"./point":4,"./pointerror":5,"./sweep":7,"./sweepcontext":8,"./triangle":9}],7:[function(t,e,i){"use strict";var n=t("./assert"),r=t("./pointerror"),s=t("./triangle"),o=t("./advancingfront").Node,a=t("./utils"),l=a.EPSILON,h=a.Orientation,u=a.orient2d,p=a.inScanArea,d=a.isAngleObtuse;function f(t,e){var i=t.locateNode(e),r=function(t,e,i){var n=new s(e,i.point,i.next.point);n.markNeighbor(i.triangle),t.addToMap(n);var r=new o(e);return r.next=i.next,r.prev=i,i.next.prev=r,i.next=r,P(t,n)||t.mapTriangleToNodes(n),r}(t,e,i);return e.x<=i.point.x+l&&x(t,i),function(t,e){for(var i=e.next;i.next&&!d(i.point,i.next.point,i.prev.point);)x(t,i),i=i.next;for(i=e.prev;i.prev&&!d(i.point,i.next.point,i.prev.point);)x(t,i),i=i.prev;e.next&&e.next.next&&function(t){var e=t.point.x-t.next.next.point.x,i=t.point.y-t.next.next.point.y;return n(i>=0,"unordered y"),e>=0||Math.abs(e)<i}(e)&&function(t,e){for(u(e.point,e.next.point,e.next.next.point)===h.CCW?t.basin.left_node=e.next.next:t.basin.left_node=e.next,t.basin.bottom_node=t.basin.left_node;t.basin.bottom_node.next&&t.basin.bottom_node.point.y>=t.basin.bottom_node.next.point.y;)t.basin.bottom_node=t.basin.bottom_node.next;if(t.basin.bottom_node!==t.basin.left_node){for(t.basin.right_node=t.basin.bottom_node;t.basin.right_node.next&&t.basin.right_node.point.y<t.basin.right_node.next.point.y;)t.basin.right_node=t.basin.right_node.next;t.basin.right_node!==t.basin.bottom_node&&(t.basin.width=t.basin.right_node.point.x-t.basin.left_node.point.x,t.basin.left_highest=t.basin.left_node.point.y>t.basin.right_node.point.y,function t(e,i){if(!function(t,e){var i;return i=t.basin.left_highest?t.basin.left_node.point.y-e.point.y:t.basin.right_node.point.y-e.point.y,t.basin.width>i}(e,i)&&(x(e,i),i.prev!==e.basin.left_node||i.next!==e.basin.right_node)){if(i.prev===e.basin.left_node){if(u(i.point,i.next.point,i.next.next.point)===h.CW)return;i=i.next}else if(i.next===e.basin.right_node){if(u(i.point,i.prev.point,i.prev.prev.point)===h.CCW)return;i=i.prev}else i=i.prev.point.y<i.next.point.y?i.prev:i.next;t(e,i)}}(t,t.basin.bottom_node))}}(t,e)}(t,r),r}function c(t,e,i){t.edge_event.constrained_edge=e,t.edge_event.right=e.p.x>e.q.x,v(i.triangle,e.p,e.q)||(function(t,e,i){t.edge_event.right?function(t,e,i){for(;i.next.point.x<e.p.x;)u(e.q,i.next.point,e.p)===h.CCW?C(t,e,i):i=i.next}(t,e,i):function(t,e,i){for(;i.prev.point.x>e.p.x;)u(e.q,i.prev.point,e.p)===h.CW?I(t,e,i):i=i.prev}(t,e,i)}(t,e,i),y(t,e.p,e.q,i.triangle,e.q))}function y(t,e,i,n,s){if(!v(n,e,i)){var o=n.pointCCW(s),a=u(i,o,e);if(a===h.COLLINEAR)throw new r("poly2tri EdgeEvent: Collinear not supported!",[i,o,e]);var l=n.pointCW(s),p=u(i,l,e);if(p===h.COLLINEAR)throw new r("poly2tri EdgeEvent: Collinear not supported!",[i,l,e]);a===p?y(t,e,i,n=a===h.CW?n.neighborCCW(s):n.neighborCW(s),s):b(t,e,i,n,s)}}function v(t,e,i){var n=t.edgeIndex(e,i);if(-1!==n){t.markConstrainedEdgeByIndex(n);var r=t.getNeighbor(n);return r&&r.markConstrainedEdgeByPoints(e,i),!0}return!1}function x(t,e){var i=new s(e.prev.point,e.point,e.next.point);i.markNeighbor(e.prev.triangle),i.markNeighbor(e.triangle),t.addToMap(i),e.prev.next=e.next,e.next.prev=e.prev,P(t,i)||t.mapTriangleToNodes(i)}function P(t,e){for(var i=0;i<3;++i)if(!e.delaunay_edge[i]){var n=e.getNeighbor(i);if(n){var r=e.getPoint(i),s=n.oppositePoint(e,r),o=n.index(s);if(n.constrained_edge[o]||n.delaunay_edge[o]){e.constrained_edge[i]=n.constrained_edge[o];continue}if(g(r,e.pointCCW(r),e.pointCW(r),s)){e.delaunay_edge[i]=!0,n.delaunay_edge[o]=!0,m(e,r,n,s);var a=!P(t,e);return a&&t.mapTriangleToNodes(e),(a=!P(t,n))&&t.mapTriangleToNodes(n),e.delaunay_edge[i]=!1,n.delaunay_edge[o]=!1,!0}}}return!1}function g(t,e,i,n){var r=t.x-n.x,s=t.y-n.y,o=e.x-n.x,a=e.y-n.y,l=r*a-o*s;if(l<=0)return!1;var h=i.x-n.x,u=i.y-n.y,p=h*s-r*u;return!(p<=0)&&(r*r+s*s)*(o*u-h*a)+(o*o+a*a)*p+(h*h+u*u)*l>0}function m(t,e,i,n){var r,s,o,a,l,h,u,p,d,f,c,y;r=t.neighborCCW(e),s=t.neighborCW(e),o=i.neighborCCW(n),a=i.neighborCW(n),l=t.getConstrainedEdgeCCW(e),h=t.getConstrainedEdgeCW(e),u=i.getConstrainedEdgeCCW(n),p=i.getConstrainedEdgeCW(n),d=t.getDelaunayEdgeCCW(e),f=t.getDelaunayEdgeCW(e),c=i.getDelaunayEdgeCCW(n),y=i.getDelaunayEdgeCW(n),t.legalize(e,n),i.legalize(n,e),i.setDelaunayEdgeCCW(e,d),t.setDelaunayEdgeCW(e,f),t.setDelaunayEdgeCCW(n,c),i.setDelaunayEdgeCW(n,y),i.setConstrainedEdgeCCW(e,l),t.setConstrainedEdgeCW(e,h),t.setConstrainedEdgeCCW(n,u),i.setConstrainedEdgeCW(n,p),t.clearNeighbors(),i.clearNeighbors(),r&&i.markNeighbor(r),s&&t.markNeighbor(s),o&&t.markNeighbor(o),a&&i.markNeighbor(a),t.markNeighbor(i)}function C(t,e,i){i.point.x<e.p.x&&(u(i.point,i.next.point,i.next.next.point)===h.CCW?_(t,e,i):(function t(e,i,n){u(n.next.point,n.next.next.point,n.next.next.next.point)===h.CCW?_(e,i,n.next):u(i.q,n.next.next.point,i.p)===h.CCW&&t(e,i,n.next)}(t,e,i),C(t,e,i)))}function _(t,e,i){x(t,i.next),i.next.point!==e.p&&u(e.q,i.next.point,e.p)===h.CCW&&u(i.point,i.next.point,i.next.next.point)===h.CCW&&_(t,e,i)}function I(t,e,i){i.point.x>e.p.x&&(u(i.point,i.prev.point,i.prev.prev.point)===h.CW?E(t,e,i):(function t(e,i,n){u(n.prev.point,n.prev.prev.point,n.prev.prev.prev.point)===h.CW?E(e,i,n.prev):u(i.q,n.prev.prev.point,i.p)===h.CW&&t(e,i,n.prev)}(t,e,i),I(t,e,i)))}function E(t,e,i){x(t,i.prev),i.prev.point!==e.p&&u(e.q,i.prev.point,e.p)===h.CW&&u(i.point,i.prev.point,i.prev.prev.point)===h.CW&&E(t,e,i)}function b(t,e,i,s,o){var a=s.neighborAcross(o);n(a,"FLIP failed due to missing triangle!");var l=a.oppositePoint(s,o);if(s.getConstrainedEdgeAcross(o)){var d=s.index(o);throw new r("poly2tri Intersecting Constraints",[o,l,s.getPoint((d+1)%3),s.getPoint((d+2)%3)])}p(o,s.pointCCW(o),s.pointCW(o),l)?(m(s,o,a,l),t.mapTriangleToNodes(s),t.mapTriangleToNodes(a),o===i&&l===e?i===t.edge_event.constrained_edge.q&&e===t.edge_event.constrained_edge.p&&(s.markConstrainedEdgeByPoints(e,i),a.markConstrainedEdgeByPoints(e,i),P(t,s),P(t,a)):b(t,e,i,s=function(t,e,i,n,r,s){var o;return e===h.CCW?(o=n.edgeIndex(r,s),n.delaunay_edge[o]=!0,P(t,n),n.clearDelaunayEdges(),i):(o=i.edgeIndex(r,s),i.delaunay_edge[o]=!0,P(t,i),i.clearDelaunayEdges(),n)}(t,u(i,l,e),s,a,o,l),o)):(function t(e,i,r,s,o,a){var l=o.neighborAcross(a);n(l,"FLIP failed due to missing triangle");var h=l.oppositePoint(o,a);if(p(r,s.pointCCW(r),s.pointCW(r),h))b(e,r,h,l,h);else{var u=T(i,r,l,h);t(e,i,r,s,l,u)}}(t,e,i,s,a,T(e,i,a,l)),y(t,e,i,s,o))}function T(t,e,i,n){var s=u(e,n,t);if(s===h.CW)return i.pointCCW(n);if(s===h.CCW)return i.pointCW(n);throw new r("poly2tri [Unsupported] nextFlipPoint: opposing point on constrained edge!",[e,n,t])}i.triangulate=function(t){t.initTriangulation(),t.createAdvancingFront(),function(t){var e,i=t.pointCount();for(e=1;e<i;++e)for(var n=t.getPoint(e),r=f(t,n),s=n._p2t_edge_list,o=0;s&&o<s.length;++o)c(t,s[o],r)}(t),function(t){for(var e=t.front().head().next.triangle,i=t.front().head().next.point;!e.getConstrainedEdgeCW(i);)e=e.neighborCCW(i);t.meshClean(e)}(t)}},{"./advancingfront":2,"./assert":3,"./pointerror":5,"./triangle":9,"./utils":10}],8:[function(t,e,i){"use strict";var n=t("./pointerror"),r=t("./point"),s=t("./triangle"),o=t("./sweep"),a=t("./advancingfront"),l=a.Node,h=function(t,e){if(this.p=t,this.q=e,t.y>e.y)this.q=t,this.p=e;else if(t.y===e.y)if(t.x>e.x)this.q=t,this.p=e;else if(t.x===e.x)throw new n("poly2tri Invalid Edge constructor: repeated points!",[t]);this.q._p2t_edge_list||(this.q._p2t_edge_list=[]),this.q._p2t_edge_list.push(this)},u=function(){this.left_node=null,this.bottom_node=null,this.right_node=null,this.width=0,this.left_highest=!1};u.prototype.clear=function(){this.left_node=null,this.bottom_node=null,this.right_node=null,this.width=0,this.left_highest=!1};var p=function(){this.constrained_edge=null,this.right=!1},d=function(t,e){e=e||{},this.triangles_=[],this.map_=[],this.points_=e.cloneArrays?t.slice(0):t,this.edge_list=[],this.pmin_=this.pmax_=null,this.front_=null,this.head_=null,this.tail_=null,this.af_head_=null,this.af_middle_=null,this.af_tail_=null,this.basin=new u,this.edge_event=new p,this.initEdges(this.points_)};d.prototype.addHole=function(t){this.initEdges(t);var e,i=t.length;for(e=0;e<i;e++)this.points_.push(t[e]);return this},d.prototype.AddHole=d.prototype.addHole,d.prototype.addHoles=function(t){var e,i=t.length;for(e=0;e<i;e++)this.initEdges(t[e]);return this.points_=this.points_.concat.apply(this.points_,t),this},d.prototype.addPoint=function(t){return this.points_.push(t),this},d.prototype.AddPoint=d.prototype.addPoint,d.prototype.addPoints=function(t){return this.points_=this.points_.concat(t),this},d.prototype.triangulate=function(){return o.triangulate(this),this},d.prototype.getBoundingBox=function(){return{min:this.pmin_,max:this.pmax_}},d.prototype.getTriangles=function(){return this.triangles_},d.prototype.GetTriangles=d.prototype.getTriangles,d.prototype.front=function(){return this.front_},d.prototype.pointCount=function(){return this.points_.length},d.prototype.head=function(){return this.head_},d.prototype.setHead=function(t){this.head_=t},d.prototype.tail=function(){return this.tail_},d.prototype.setTail=function(t){this.tail_=t},d.prototype.getMap=function(){return this.map_},d.prototype.initTriangulation=function(){var t,e=this.points_[0].x,i=this.points_[0].x,n=this.points_[0].y,s=this.points_[0].y,o=this.points_.length;for(t=1;t<o;t++){var a=this.points_[t];a.x>e&&(e=a.x),a.x<i&&(i=a.x),a.y>n&&(n=a.y),a.y<s&&(s=a.y)}this.pmin_=new r(i,s),this.pmax_=new r(e,n);var l=.3*(e-i),h=.3*(n-s);this.head_=new r(e+l,s-h),this.tail_=new r(i-l,s-h),this.points_.sort(r.compare)},d.prototype.initEdges=function(t,e){var i,n=t.length,r=e?t.length-1:t.length;for(i=0;i<r;++i)this.edge_list.push(new h(t[i],t[(i+1)%n]))},d.prototype.getPoint=function(t){return this.points_[t]},d.prototype.addToMap=function(t){this.map_.push(t)},d.prototype.locateNode=function(t){return this.front_.locateNode(t.x)},d.prototype.createAdvancingFront=function(){var t,e,i,n=new s(this.points_[0],this.tail_,this.head_);this.map_.push(n),t=new l(n.getPoint(1),n),e=new l(n.getPoint(0),n),i=new l(n.getPoint(2)),this.front_=new a(t,i),t.next=e,e.next=i,e.prev=t,i.prev=e},d.prototype.removeNode=function(t){},d.prototype.mapTriangleToNodes=function(t){for(var e=0;e<3;++e)if(!t.getNeighbor(e)){var i=this.front_.locatePoint(t.pointCW(t.getPoint(e)));i&&(i.triangle=t)}},d.prototype.removeFromMap=function(t){var e,i=this.map_,n=i.length;for(e=0;e<n;e++)if(i[e]===t){i.splice(e,1);break}},d.prototype.meshClean=function(t){for(var e,i,n=[t];e=n.pop();)if(!e.isInterior())for(e.setInterior(!0),this.triangles_.push(e),i=0;i<3;i++)e.constrained_edge[i]||n.push(e.getNeighbor(i))},e.exports=d},{"./advancingfront":2,"./point":4,"./pointerror":5,"./sweep":7,"./triangle":9}],9:[function(t,e,i){"use strict";var n=function(t,e,i){this.points_=[t,e,i],this.neighbors_=[null,null,null],this.interior_=!1,this.constrained_edge=[!1,!1,!1],this.delaunay_edge=[!1,!1,!1]},r=t("./xy").toString;n.prototype.toString=function(){return"["+r(this.points_[0])+r(this.points_[1])+r(this.points_[2])+"]"},n.prototype.getPoint=function(t){return this.points_[t]},n.prototype.GetPoint=n.prototype.getPoint,n.prototype.getPoints=function(){return this.points_},n.prototype.getNeighbor=function(t){return this.neighbors_[t]},n.prototype.containsPoint=function(t){var e=this.points_;return t===e[0]||t===e[1]||t===e[2]},n.prototype.containsEdge=function(t){return this.containsPoint(t.p)&&this.containsPoint(t.q)},n.prototype.containsPoints=function(t,e){return this.containsPoint(t)&&this.containsPoint(e)},n.prototype.isInterior=function(){return this.interior_},n.prototype.setInterior=function(t){return this.interior_=t,this},n.prototype.markNeighborPointers=function(t,e,i){var n=this.points_;if(t===n[2]&&e===n[1]||t===n[1]&&e===n[2])this.neighbors_[0]=i;else if(t===n[0]&&e===n[2]||t===n[2]&&e===n[0])this.neighbors_[1]=i;else{if(!(t===n[0]&&e===n[1]||t===n[1]&&e===n[0]))throw new Error("poly2tri Invalid Triangle.markNeighborPointers() call");this.neighbors_[2]=i}},n.prototype.markNeighbor=function(t){var e=this.points_;t.containsPoints(e[1],e[2])?(this.neighbors_[0]=t,t.markNeighborPointers(e[1],e[2],this)):t.containsPoints(e[0],e[2])?(this.neighbors_[1]=t,t.markNeighborPointers(e[0],e[2],this)):t.containsPoints(e[0],e[1])&&(this.neighbors_[2]=t,t.markNeighborPointers(e[0],e[1],this))},n.prototype.clearNeighbors=function(){this.neighbors_[0]=null,this.neighbors_[1]=null,this.neighbors_[2]=null},n.prototype.clearDelaunayEdges=function(){this.delaunay_edge[0]=!1,this.delaunay_edge[1]=!1,this.delaunay_edge[2]=!1},n.prototype.pointCW=function(t){var e=this.points_;return t===e[0]?e[2]:t===e[1]?e[0]:t===e[2]?e[1]:null},n.prototype.pointCCW=function(t){var e=this.points_;return t===e[0]?e[1]:t===e[1]?e[2]:t===e[2]?e[0]:null},n.prototype.neighborCW=function(t){return t===this.points_[0]?this.neighbors_[1]:t===this.points_[1]?this.neighbors_[2]:this.neighbors_[0]},n.prototype.neighborCCW=function(t){return t===this.points_[0]?this.neighbors_[2]:t===this.points_[1]?this.neighbors_[0]:this.neighbors_[1]},n.prototype.getConstrainedEdgeCW=function(t){return t===this.points_[0]?this.constrained_edge[1]:t===this.points_[1]?this.constrained_edge[2]:this.constrained_edge[0]},n.prototype.getConstrainedEdgeCCW=function(t){return t===this.points_[0]?this.constrained_edge[2]:t===this.points_[1]?this.constrained_edge[0]:this.constrained_edge[1]},n.prototype.getConstrainedEdgeAcross=function(t){return t===this.points_[0]?this.constrained_edge[0]:t===this.points_[1]?this.constrained_edge[1]:this.constrained_edge[2]},n.prototype.setConstrainedEdgeCW=function(t,e){t===this.points_[0]?this.constrained_edge[1]=e:t===this.points_[1]?this.constrained_edge[2]=e:this.constrained_edge[0]=e},n.prototype.setConstrainedEdgeCCW=function(t,e){t===this.points_[0]?this.constrained_edge[2]=e:t===this.points_[1]?this.constrained_edge[0]=e:this.constrained_edge[1]=e},n.prototype.getDelaunayEdgeCW=function(t){return t===this.points_[0]?this.delaunay_edge[1]:t===this.points_[1]?this.delaunay_edge[2]:this.delaunay_edge[0]},n.prototype.getDelaunayEdgeCCW=function(t){return t===this.points_[0]?this.delaunay_edge[2]:t===this.points_[1]?this.delaunay_edge[0]:this.delaunay_edge[1]},n.prototype.setDelaunayEdgeCW=function(t,e){t===this.points_[0]?this.delaunay_edge[1]=e:t===this.points_[1]?this.delaunay_edge[2]=e:this.delaunay_edge[0]=e},n.prototype.setDelaunayEdgeCCW=function(t,e){t===this.points_[0]?this.delaunay_edge[2]=e:t===this.points_[1]?this.delaunay_edge[0]=e:this.delaunay_edge[1]=e},n.prototype.neighborAcross=function(t){return t===this.points_[0]?this.neighbors_[0]:t===this.points_[1]?this.neighbors_[1]:this.neighbors_[2]},n.prototype.oppositePoint=function(t,e){var i=t.pointCW(e);return this.pointCW(i)},n.prototype.legalize=function(t,e){var i=this.points_;if(t===i[0])i[1]=i[0],i[0]=i[2],i[2]=e;else if(t===i[1])i[2]=i[1],i[1]=i[0],i[0]=e;else{if(t!==i[2])throw new Error("poly2tri Invalid Triangle.legalize() call");i[0]=i[2],i[2]=i[1],i[1]=e}},n.prototype.index=function(t){var e=this.points_;if(t===e[0])return 0;if(t===e[1])return 1;if(t===e[2])return 2;throw new Error("poly2tri Invalid Triangle.index() call")},n.prototype.edgeIndex=function(t,e){var i=this.points_;if(t===i[0]){if(e===i[1])return 2;if(e===i[2])return 1}else if(t===i[1]){if(e===i[2])return 0;if(e===i[0])return 2}else if(t===i[2]){if(e===i[0])return 1;if(e===i[1])return 0}return-1},n.prototype.markConstrainedEdgeByIndex=function(t){this.constrained_edge[t]=!0},n.prototype.markConstrainedEdgeByEdge=function(t){this.markConstrainedEdgeByPoints(t.p,t.q)},n.prototype.markConstrainedEdgeByPoints=function(t,e){var i=this.points_;e===i[0]&&t===i[1]||e===i[1]&&t===i[0]?this.constrained_edge[2]=!0:e===i[0]&&t===i[2]||e===i[2]&&t===i[0]?this.constrained_edge[1]=!0:(e===i[1]&&t===i[2]||e===i[2]&&t===i[1])&&(this.constrained_edge[0]=!0)},e.exports=n},{"./xy":11}],10:[function(t,e,i){"use strict";i.EPSILON=1e-12;var n={CW:1,CCW:-1,COLLINEAR:0};i.Orientation=n,i.orient2d=function(t,e,i){var r=(t.x-i.x)*(e.y-i.y)-(t.y-i.y)*(e.x-i.x);return r>-1e-12&&r<1e-12?n.COLLINEAR:r>0?n.CCW:n.CW},i.inScanArea=function(t,e,i,n){return!((t.x-e.x)*(n.y-e.y)-(n.x-e.x)*(t.y-e.y)>=-1e-12||(t.x-i.x)*(n.y-i.y)-(n.x-i.x)*(t.y-i.y)<=1e-12)},i.isAngleObtuse=function(t,e,i){var n=e.x-t.x,r=e.y-t.y;return n*(i.x-t.x)+r*(i.y-t.y)<0}},{}],11:[function(t,e,i){"use strict";function n(t){return"("+t.x+";"+t.y+")"}e.exports={toString:function(t){var e=t.toString();return"[object Object]"===e?n(t):e},toStringBase:n,compare:function(t,e){return t.y===e.y?t.x-e.x:t.y-e.y},equals:function(t,e){return t.x===e.x&&t.y===e.y}}},{}]},{},[6])(6)},"object"===a(e)&&void 0!==t?t.exports=o():(r=[],void 0===(s="function"==typeof(n=o)?n.apply(e,r):n)||(t.exports=s))}).call(this,i(50))},64:function(t,e,i){"use strict";function n(){this.bbox=new THREE.Box2,this.left=null,this.right=null,this.node_edges=[]}function r(t,e,i){this.pts=t,this.edges=e,this.bbox=i,this.pipResult=!1}i.r(e),i.d(e,"IntervalTree",(function(){return r})),r.prototype.splitNode=function(t){if(!(t.bbox.min.y>=t.bbox.max.y||t.node_edges.length<3)){var e=.5*(t.bbox.min.y+t.bbox.max.y);t.left=new n,t.right=new n;for(var i=this.pts,r=t.node_edges,s=[],o=new THREE.Vector2,a=0;a<r.length;a++){var l=this.edges[r[a]],h=i[l.p1].y,u=i[l.p2].y;if(h>u){var p=h;h=u,u=p}var d=null;u<e?(t.left.node_edges.push(r[a]),d=t.left.bbox):h>e?(t.right.node_edges.push(r[a]),d=t.right.bbox):s.push(r[a]),d&&(o.set(i[l.p1].x,i[l.p1].y),d.expandByPoint(o),o.set(i[l.p2].x,i[l.p2].y),d.expandByPoint(o))}t.node_edges=s,t.left.node_edges.length&&this.splitNode(t.left),t.right.node_edges.length&&this.splitNode(t.right)}},r.prototype.build=function(){this.root=new n;for(var t=this.root.node_edges,e=0;e<this.edges.length;e++)t.push(e);this.root.bbox.copy(this.bbox),this.splitNode(this.root)},r.prototype.pointInPolygonRec=function(t,e,i){if(t.bbox.min.y<=i&&t.bbox.max.y>=i)for(var n=this.pts,r=t.node_edges,s=0,o=r.length;s<o;s++){var a=this.edges[r[s]],l=n[a.p1],h=l.x,u=l.y,p=u>=i,d=n[a.p2],f=d.x,c=d.y,y=c>=i;p!=y&&(c-i)*(h-f)>=(f-e)*(u-c)==y&&(this.pipResult=!this.pipResult)}var v=t.left;v&&v.bbox.min.y<=i&&v.bbox.max.y>=i&&this.pointInPolygonRec(v,e,i);var x=t.right;x&&x.bbox.min.y<=i&&x.bbox.max.y>=i&&this.pointInPolygonRec(x,e,i)},r.prototype.pointInPolygon=function(t,e){return this.pipResult=!1,this.pointInPolygonRec(this.root,t,e),this.pipResult}},65:function(t,e,i){"use strict";i.r(e),i.d(e,"UniquePointList",(function(){return a}));var n=i(9),r=i(66),s=i(63);function o(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var a=function(){function t(e,i,s,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.bbox=e,this.boxSize=this.bbox.size().length(),"number"==typeof i?(this.precisionTolerance=i,this.scale=1/this.precisionTolerance):(this.precisionTolerance=n.TOL*this.boxSize,this.scale=1/this.precisionTolerance),this.precisionToleranceSq=this.precisionTolerance*this.precisionTolerance,this.snapBaseX=this.bbox.min.x,this.snapBaseY=this.bbox.min.y,this.pts=[],this.xymap=new Map,o&&(this.quadTreeVerts=new r.QuadTree(e.min.x,e.min.y,e.max.x,e.max.y,i)),this.vertexConstructor=s}var e,i,a;return e=t,(i=[{key:"findOrAddPoint",value:function(t,e,i){for(var n,r=0|(t-this.snapBaseX)*this.scale,o=0|(e-this.snapBaseY)*this.scale,a=1/0,l=r-1;l<=r+1;l++){var h=this.xymap.get(l);if(h)for(var u=o-1;u<=o+1;u++){var p=h.get(u);if(p){var d=(p.x-t)*(p.x-t)+(p.y-e)*(p.y-e);d<a&&(n=p,a=d)}}}if(a>this.precisionToleranceSq&&(n=void 0),void 0===n){var f=this.xymap.get(r);f||(f=new Map,this.xymap.set(r,f)),n=this.vertexConstructor?new this.vertexConstructor(t,e):new s.Point(t,e),f.set(o,n),n.id=this.pts.length,this.pts.push(n),this.quadTreeVerts&&this.quadTreeVerts.addItem(n)}if(void 0!==i){if("number"==typeof i)-1===n.dbIds.indexOf(i)&&n.dbIds.push(i);else if(i)for(var c=0;c<i.length;c++){var y=i[c];-1===n.dbIds.indexOf(y)&&n.dbIds.push(y)}n.dbIdsChanged=!0}return n}},{key:"forEach",value:function(t){this.pts.forEach(t)}},{key:"delete",value:function(t){this.pts[t.id]=void 0,this.quadTreeVerts&&this.quadTreeVerts.deleteItem(t)}},{key:"compact",value:function(){for(var t=[],e=0,i=this.pts.length;e<i;e++){var n=this.pts[e];n&&(n.oldid=n.id,n.id=t.length,t.push(n))}this.pts=t}},{key:"enumInBox",value:function(t,e,i,n,r){this.quadTreeVerts.enumInBox(t,e,i,n,r)}}])&&o(e.prototype,i),a&&o(e,a),t}()},66:function(t,e,i){"use strict";i.r(e),i.d(e,"QuadTree",(function(){return l}));var n=i(76),r=i(77);function s(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var o=Autodesk.Viewing.Private.logger,a={x:0,y:0},l=function(){function t(e,i,n,r,s,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.items=[],this.children=null,this.itemCount=0,this.extraDistance=s,this.minx=e,this.miny=i,this.maxx=n,this.maxy=r,this.itemHandler=o}var e,i,l;return e=t,(i=[{key:"addItem",value:function(t){if(this.itemCount++,this.children){for(var e=0,i=null,n=0;n<4;n++)this.children[n].intersectsItem(t)&&(i=this.children[n],e++);0===e||(1===e?i.addItem(t):this.items.push(t))}else this.items.push(t),this.items.length>16&&this.subdivide();return this.itemCount}},{key:"deleteItem",value:function(t){if(!this.intersectsItem(t))return 0;if(this.items){var e=this.items.indexOf(t);if(e>=0)return this.items.splice(e,1),this.itemCount--,1}if(this.children){for(var i=0,n=0;n<4;n++)i+=this.children[n].deleteItem(t),this.children[n].itemCount;return 1===i?(this.itemCount--,1):(o.warn("Did not find item to delete. Something is wrong.",i),0)}return 0}},{key:"intersectsBox",value:function(t,e,i,n){var s=this.extraDistance;return Object(r.xBoxBox)(t,e,i,n,this.minx-s,this.miny-s,this.maxx+s,this.maxy+s)}},{key:"intersectsItem",value:function(t){return this.itemHandler?this.itemHandler.intersectsBox(t,this.minx-this.extraDistance,this.miny-this.extraDistance,this.maxx+this.extraDistance,this.maxy+this.extraDistance):t.v1?Object(n.xLineBox)(t.v1.x,t.v1.y,t.v2.x,t.v2.y,this.minx-this.extraDistance,this.miny-this.extraDistance,this.maxx+this.extraDistance,this.maxy+this.extraDistance):this.intersectsBox(t.x,t.y,t.x,t.y)}},{key:"findSplitPoint",value:function(){var t=[],e=[];if(this.itemHandler)for(var i=0;i<this.items.length;i++)this.itemHandler.getPoint(this.items[i],a),t.push(a.x),e.push(a.y);else if(this.items[0].v1)for(var n=0;n<this.items.length;n++)t.push(this.items[n].v1.x),e.push(this.items[n].v1.y);else for(var r=0;r<this.items.length;r++)t.push(this.items[r].x),e.push(this.items[r].y);t.sort((function(t,e){return t-e})),e.sort((function(t,e){return t-e}));var s=t[0|(t.length+1)/2]-this.extraDistance-1e-20,o=e[0|(e.length+1)/2]-this.extraDistance-1e-20;return s<=this.minx||s>=this.maxx||o<=this.miny||o>=this.maxy?null:{midx:s,midy:o}}},{key:"subdivide",value:function(){if(this.children)o.error("Attempt to subdivide already split node");else if(this.items.length){var e=this.minx,i=this.miny,n=this.maxx,r=this.maxy,s=this.findSplitPoint();if(s){var a=s.midx,l=s.midy;this.children=new Array(4),this.children[0]=new t(e,i,a,l,this.extraDistance,this.itemHandler),this.children[1]=new t(a,i,n,l,this.extraDistance,this.itemHandler),this.children[2]=new t(a,l,n,r,this.extraDistance,this.itemHandler),this.children[3]=new t(e,l,a,r,this.extraDistance,this.itemHandler);for(var h=[],u=0,p=this.items.length;u<p;u++){for(var d=0,f=null,c=0;c<4;c++)this.children[c].intersectsItem(this.items[u])&&(f=this.children[c],d++);0===d?o.error("Expected at least one overlap"):1===d?f.addItem(this.items[u]):h.push(this.items[u])}this.items=h}}else o.error("Attempt to subdivide empty node")}},{key:"enumNearItems",value:function(t,e){if(this.intersectsItem(t)){if(this.items)for(var i=0;i<this.items.length;i++)e(this.items[i]);if(this.children)for(var n=0;n<4;n++)this.children[n].enumNearItems(t,e)}}},{key:"enumInBox",value:function(t,e,i,s,o){if(this.intersectsBox(t,e,i,s)){if(this.items)for(var a=0;a<this.items.length;a++){var l=this.items[a];this.itemHandler?this.itemHandler.intersectsBox(l,t,e,i,s)&&o(l):l.v1?Object(n.xLineBox)(l.v1.x,l.v1.y,l.v2.x,l.v2.y,t,e,i,s)&&o(l):Object(r.xBoxBox)(l.x,l.y,l.x,l.y,t,e,i,s)&&o(l)}if(this.children)for(var h=0;h<4;h++)this.children[h].enumInBox(t,e,i,s,o)}}},{key:"pointInPolygonRec",value:function(t,e,i){var n=t.v1.x,r=t.v1.y,s=r>=i,o=t.v2.x,a=t.v2.y,l=a>=i;s!=l&&(a-i)*(n-o)>=(o-e)*(r-a)==l&&(this.pipResult=!this.pipResult)}},{key:"pointInPolygon",value:function(t,e){var i=this;return this.pipResult=!1,this.enumInBox(-1/0,e,1/0,e,(function(n){i.pointInPolygonRec(n,t,e)})),this.pipResult}}])&&s(e.prototype,i),l&&s(e,l),t}()},68:function(t,e,i){"use strict";i.r(e),i.d(e,"polygonArea",(function(){return s})),i.d(e,"ContourSet",(function(){return a}));var n=i(62);function r(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function s(t){if(t.length<3)return 0;var e=!1;t[0]!==t[t.length-1]&&(e=!0);for(var i=0,n=0,r=t.length-1;n<r;n++){var s=t[n],o=t[n+1];i+=s.x*o.y-o.x*s.y}if(e){var a=t[t.length-1],l=t[0];i+=a.x*l.y-l.x*a.y}return.5*i}var o=new THREE.Vector2,a=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.contours=[],this.areas=[],this.bbox=new THREE.Box2,this.allPoints=this.pts=[],this.allPointsMap={}}var e,i,a;return e=t,(i=[{key:"addContour",value:function(t,e){var i=this;this.polygon=null,this.perimeterMem=void 0;var n=s(t);n<0&&(t.reverse(),n=Math.abs(n));var r=[];t.forEach((function(t,e){var n=t.id;void 0===n&&(n=i.contours.length+":"+e);var s=i.allPointsMap[n];void 0===s&&(s=i.allPoints.length,i.allPoints.push(t),i.allPointsMap[n]=s,o.set(t.x,t.y),i.bbox.expandByPoint(o)),r.push(s)})),0===n&&e||(this.contours.push(r),this.areas.push(n))}},{key:"addContourSet",value:function(t){var e=t.contours[0],i=t.allPoints,n=e.map((function(t){return i[t]}));this.addContour(n)}},{key:"triangulate",value:function(t){if(!this.polygon){var e=this.allPoints,i=new n.ComplexPolygon(e,t,this.bbox);i.contours=this.contours,i.triangulate(),this.polygon=i,this.triangulationFailed=this.polygon.triangulationFailed}}},{key:"area",value:function(){return this.areas[0]}},{key:"areaNet",value:function(){for(var t=this.areas[0],e=1;e<this.areas.length;e++)t-=this.areas[e];return t}},{key:"perimeter",value:function(){if(this.perimeterMem)return this.perimeterMem;for(var t=0,e=this.contours[0],i=0,n=e.length-1;i<n;i++){var r=e[i],s=e[i+1];t+=Math.sqrt((r.x-s.x)*(r.x-s.x)+(r.y-s.y)*(r.y-s.y))}return this.perimeterMem=t,t}},{key:"getThemeColor",value:function(){return{r:100*this.areas[0]%17/16,g:this.allPoints.length%23/22,b:100*this.perimeterMem%29/28}}},{key:"hash",value:function(){var t=this,e=[];return this.contours.forEach((function(i){var n=i.map((function(e){return t.allPoints[e].id}));n[0]===n[n.length-1]&&n.pop(),n.sort(),e.push(n)})),JSON.stringify(e)}},{key:"stitchContours",value:function(){this.areas=[];for(var t=[],e=0;e<this.contours.length;e++){var i=this.contours[e];i[0]!==i[i.length-1]&&t.push(i)}if(t.length)for(var n=!0;n;){n=!1;for(var r={},s=this.contours,o=0;o<s.length;o++){var a=s[o],l=a[0],h=a[a.length-1];l!==h&&(r[l]?r[l].push(-o-1):r[l]=[-o-1],r[h]?r[h].push(o):r[h]=[o])}for(var u in r){var p=r[u];if(2===p.length){var d=void 0;if(p[0]<0&&p[1]<0){var f=-p[0]-1,c=-p[1]-1;s[c].shift(),Array.prototype.push.apply(s[f].reverse(),s[c]),d=c}if(p[0]<0&&p[1]>0){var y=-p[0]-1,v=p[1];s[v].pop(),Array.prototype.push.apply(s[v],s[y]),d=y}if(p[0]>0&&p[1]<0){var x=p[0],P=-p[1]-1;s[x].pop(),Array.prototype.push.apply(s[x],s[P]),d=P}if(p[0]>0&&p[1]>0){var g=p[0],m=p[1];s[g].pop(),Array.prototype.push.apply(s[g],s[m].reverse()),d=m}void 0!==d&&(s.splice(d,1),n=!0);break}}}}},{key:"containsPointFrom",value:function(t){if(!t.polygon.indices||t.polygon.indices.length<3)return!1;var e=t.allPoints[t.polygon.indices[0]],i=t.allPoints[t.polygon.indices[1]],n=t.allPoints[t.polygon.indices[2]],r=(e.x+i.x+n.x)/3,s=(e.y+i.y+n.y)/3;return this.polygon&&this.polygon.pointInPolygon(r,s)}},{key:"toPolygonMesh",value:function(t){return this.polygon.toPolygonMesh(t)}},{key:"toExtrudedMesh",value:function(t){return this.polygon.toExtrudedMesh(t)}}])&&r(e.prototype,i),a&&r(e,a),t}()},69:function(t,e,i){"use strict";i.r(e),i.d(e,"xPlaneSegment",(function(){return s}));var n=i(9),r=new THREE.Vector3;function s(t,e,i,s,o){var a=r.subVectors(i,e),l=t.normal.dot(a);if(Object(n.isZero)(l))return s.copy(e),o.copy(i),2;l=1/l;var h=-(e.dot(t.normal)*l+t.constant*l);if(h<-n.TOL||h>1+n.TOL)return 0;var u=a.multiplyScalar(h).add(e);return s.copy(u),1}},7:function(t,e,i){var n,r;n={version:"6.4.2.2",use_lines:!0,use_xyz:!1},r=!1,t.exports?(t.exports=n,r=!0):"undefined"!=typeof document?window.ClipperLib=n:self.ClipperLib=n,-1!=(r=r?"chrome":navigator.userAgent.toString().toLowerCase()).indexOf("chrome")&&r.indexOf("chromium"),r.indexOf("chromium"),-1!=r.indexOf("safari")&&-1==r.indexOf("chrome")&&r.indexOf("chromium"),r.indexOf("firefox"),r.indexOf("firefox/17"),r.indexOf("firefox/15"),r.indexOf("firefox/3"),r.indexOf("opera"),r.indexOf("msie 10"),r.indexOf("msie 9"),r.indexOf("msie 8"),r.indexOf("msie 7"),r.indexOf("msie "),r=function(t,e){var i;if(void 0===Object.getOwnPropertyNames)for(i in e.prototype)void 0!==t.prototype[i]&&t.prototype[i]!==Object.prototype[i]||(t.prototype[i]=e.prototype[i]);else for(var n=Object.getOwnPropertyNames(e.prototype),r=0;r<n.length;r++)void 0===Object.getOwnPropertyDescriptor(t.prototype,n[r])&&Object.defineProperty(t.prototype,n[r],Object.getOwnPropertyDescriptor(e.prototype,n[r]));for(i in e)void 0===t[i]&&(t[i]=e[i]);t.$baseCtor=e},n.Path=function(){return[]},n.Path.prototype.push=Array.prototype.push,n.Paths=function(){return[]},n.Paths.prototype.push=Array.prototype.push,n.PolyNode=function(){this.m_Parent=null,this.m_polygon=new n.Path,this.m_endtype=this.m_jointype=this.m_Index=0,this.m_Childs=[],this.IsOpen=!1},n.PolyNode.prototype.IsHoleNode=function(){for(var t=!0,e=this.m_Parent;null!==e;)t=!t,e=e.m_Parent;return t},n.PolyNode.prototype.ChildCount=function(){return this.m_Childs.length},n.PolyNode.prototype.Contour=function(){return this.m_polygon},n.PolyNode.prototype.AddChild=function(t){var e=this.m_Childs.length;this.m_Childs.push(t),t.m_Parent=this,t.m_Index=e},n.PolyNode.prototype.GetNext=function(){return 0<this.m_Childs.length?this.m_Childs[0]:this.GetNextSiblingUp()},n.PolyNode.prototype.GetNextSiblingUp=function(){return null===this.m_Parent?null:this.m_Index===this.m_Parent.m_Childs.length-1?this.m_Parent.GetNextSiblingUp():this.m_Parent.m_Childs[this.m_Index+1]},n.PolyNode.prototype.Childs=function(){return this.m_Childs},n.PolyNode.prototype.Parent=function(){return this.m_Parent},n.PolyNode.prototype.IsHole=function(){return this.IsHoleNode()},n.PolyTree=function(){this.m_AllPolys=[],n.PolyNode.call(this)},n.PolyTree.prototype.Clear=function(){for(var t=0,e=this.m_AllPolys.length;t<e;t++)this.m_AllPolys[t]=null;this.m_AllPolys.length=0,this.m_Childs.length=0},n.PolyTree.prototype.GetFirst=function(){return 0<this.m_Childs.length?this.m_Childs[0]:null},n.PolyTree.prototype.Total=function(){var t=this.m_AllPolys.length;return 0<t&&this.m_Childs[0]!==this.m_AllPolys[0]&&t--,t},r(n.PolyTree,n.PolyNode),n.Clear=function(t){t.length=0},n.PI=3.141592653589793,n.PI2=6.283185307179586,n.FPoint=function(){var t=arguments,e=t.length;this.Y=this.X=0,n.use_xyz?(this.Z=0,3===e?(this.X=t[0],this.Y=t[1],this.Z=t[2]):2===e?(this.X=t[0],this.Y=t[1],this.Z=0):1===e?t[0]instanceof n.FPoint?(t=t[0],this.X=t.X,this.Y=t.Y,this.Z=0):(void 0===(t=t[0]).Z&&(t.Z=0),this.X=t.X,this.Y=t.Y,this.Z=t.Z):this.Z=this.Y=this.X=0):2===e?(this.X=t[0],this.Y=t[1]):1===e?(t=t[0],this.X=t.X,this.Y=t.Y):this.Y=this.X=0},n.FPoint.op_Equality=function(t,e){return t.X===e.X&&t.Y===e.Y},n.FPoint.op_Inequality=function(t,e){return t.X!==e.X||t.Y!==e.Y},n.FPoint0=function(){this.Y=this.X=0,n.use_xyz&&(this.Z=0)},n.FPoint0.prototype=n.FPoint.prototype,n.FPoint1=function(t){this.X=t.X,this.Y=t.Y,n.use_xyz&&(this.Z=void 0===t.Z?0:t.Z)},n.FPoint1.prototype=n.FPoint.prototype,n.FPoint1dp=function(t){this.X=t.X,this.Y=t.Y,n.use_xyz&&(this.Z=0)},n.FPoint1dp.prototype=n.FPoint.prototype,n.FPoint2=function(t,e,i){this.X=t,this.Y=e,n.use_xyz&&(this.Z=void 0===i?0:i)},n.FPoint2.prototype=n.FPoint.prototype,n.FRect=function(){var t=arguments,e=t.length;4===e?(this.left=t[0],this.top=t[1],this.right=t[2],this.bottom=t[3]):1===e?(t=t[0],this.left=t.left,this.top=t.top,this.right=t.right,this.bottom=t.bottom):this.bottom=this.right=this.top=this.left=0},n.FRect0=function(){this.bottom=this.right=this.top=this.left=0},n.FRect0.prototype=n.FRect.prototype,n.FRect1=function(t){this.left=t.left,this.top=t.top,this.right=t.right,this.bottom=t.bottom},n.FRect1.prototype=n.FRect.prototype,n.FRect4=function(t,e,i,n){this.left=t,this.top=e,this.right=i,this.bottom=n},n.FRect4.prototype=n.FRect.prototype,n.ClipType={ctIntersection:0,ctUnion:1,ctDifference:2,ctXor:3},n.PolyType={ptSubject:0,ptClip:1},n.PolyFillType={pftEvenOdd:0,pftNonZero:1,pftPositive:2,pftNegative:3},n.JoinType={jtSquare:0,jtRound:1,jtMiter:2},n.EndType={etOpenSquare:0,etOpenRound:1,etOpenButt:2,etClosedLine:3,etClosedPolygon:4},n.EdgeSide={esLeft:0,esRight:1},n.Direction={dRightToLeft:0,dLeftToRight:1},n.TEdge=function(){this.Bot=new n.FPoint0,this.Curr=new n.FPoint0,this.Top=new n.FPoint0,this.Delta=new n.FPoint0,this.Dx=0,this.PolyTyp=n.PolyType.ptSubject,this.Side=n.EdgeSide.esLeft,this.OutIdx=this.WindCnt2=this.WindCnt=this.WindDelta=0,this.PrevInSEL=this.NextInSEL=this.PrevInAEL=this.NextInAEL=this.NextInLML=this.Prev=this.Next=null},n.IntersectNode=function(){this.Edge2=this.Edge1=null,this.Pt=new n.FPoint0},n.MyIntersectNodeSort=function(){},n.MyIntersectNodeSort.Compare=function(t,e){var i=e.Pt.Y-t.Pt.Y;return 0<i?1:0>i?-1:0},n.LocalMinima=function(){this.Y=0,this.Next=this.RightBound=this.LeftBound=null},n.Scanbeam=function(){this.Y=0,this.Next=null},n.Maxima=function(){this.X=0,this.Prev=this.Next=null},n.OutRec=function(){this.Idx=0,this.IsOpen=this.IsHole=!1,this.PolyNode=this.BottomPt=this.Pts=this.FirstLeft=null},n.OutPt=function(){this.Idx=0,this.Pt=new n.FPoint0,this.Prev=this.Next=null},n.Join=function(){this.OutPt2=this.OutPt1=null,this.OffPt=new n.FPoint0},n.ClipperBase=function(){this.m_CurrentLM=this.m_MinimaList=null,this.m_edges=[],this.PreserveCollinear=this.m_HasOpenPaths=!1,this.m_ActiveEdges=this.m_PolyOuts=this.m_Scanbeam=null},n.ClipperBase.horizontal=-34e37,n.ClipperBase.Skip=-2,n.ClipperBase.Unassigned=-1,n.ClipperBase.tolerance=1e-20,n.ClipperBase.maxValue=Math.sqrt(Number.MAX_VALUE),n.ClipperBase.minValue=Math.sqrt(Number.MIN_VALUE),n.ClipperBase.near_zero=function(t){return t>-n.ClipperBase.tolerance&&t<n.ClipperBase.tolerance},n.ClipperBase.IsHorizontal=function(t){return 0===t.Delta.Y},n.ClipperBase.prototype.PointIsVertex=function(t,e){var i=e;do{if(n.FPoint.op_Equality(i.Pt,t))return!0;i=i.Next}while(i!==e);return!1},n.ClipperBase.prototype.PointOnLineSegment=function(t,e,i){return t.X===e.X&&t.Y===e.Y||t.X===i.X&&t.Y===i.Y||t.X>e.X==t.X<i.X&&t.Y>e.Y==t.Y<i.Y&&(t.X-e.X)*(i.Y-e.Y)==(i.X-e.X)*(t.Y-e.Y)},n.ClipperBase.prototype.PointOnPolygon=function(t,e){for(var i=e;;){if(this.PointOnLineSegment(t,i.Pt,i.Next.Pt))return!0;if((i=i.Next)===e)break}return!1},n.ClipperBase.prototype.SlopesEqual=n.ClipperBase.SlopesEqual=function(){var t=arguments,e=t.length;if(2===e)return e=t[0],t=t[1],e.Delta.Y*t.Delta.X==e.Delta.X*t.Delta.Y;if(3===e){e=t[0];var i=t[1],n=t[2];return 0==(e.Y-i.Y)*(i.X-n.X)-(e.X-i.X)*(i.Y-n.Y)}return e=t[0],i=t[1],n=t[2],t=t[3],0==(e.Y-i.Y)*(n.X-t.X)-(e.X-i.X)*(n.Y-t.Y)},n.ClipperBase.SlopesEqual3=function(t,e){return t.Delta.Y*e.Delta.X==t.Delta.X*e.Delta.Y},n.ClipperBase.SlopesEqual4=function(t,e,i){return 0==(t.Y-e.Y)*(e.X-i.X)-(t.X-e.X)*(e.Y-i.Y)},n.ClipperBase.SlopesEqual5=function(t,e,i,n){return 0==(t.Y-e.Y)*(i.X-n.X)-(t.X-e.X)*(i.Y-n.Y)},n.ClipperBase.prototype.Clear=function(){this.DisposeLocalMinimaList();for(var t=0,e=this.m_edges.length;t<e;++t){for(var i=0,r=this.m_edges[t].length;i<r;++i)this.m_edges[t][i]=null;n.Clear(this.m_edges[t])}n.Clear(this.m_edges),this.m_HasOpenPaths=!1},n.ClipperBase.prototype.DisposeLocalMinimaList=function(){for(;null!==this.m_MinimaList;){var t=this.m_MinimaList.Next;this.m_MinimaList=null,this.m_MinimaList=t}this.m_CurrentLM=null},n.ClipperBase.prototype.RangeTest=function(t){(t.X>n.ClipperBase.maxValue||t.X<-n.ClipperBase.maxValue||t.Y>n.ClipperBase.maxValue||t.Y<-n.ClipperBase.maxValue||0<t.X&&t.X<n.ClipperBase.minValue||0<t.Y&&t.Y<n.ClipperBase.minValue||0>t.X&&t.X>-n.ClipperBase.minValue||0>t.Y&&t.Y>-n.ClipperBase.minValue)&&n.Error("Coordinate outside allowed range in RangeTest().")},n.ClipperBase.prototype.InitEdge=function(t,e,i,r){t.Next=e,t.Prev=i,t.Curr.X=r.X,t.Curr.Y=r.Y,n.use_xyz&&(t.Curr.Z=r.Z),t.OutIdx=-1},n.ClipperBase.prototype.InitEdge2=function(t,e){t.Curr.Y>=t.Next.Curr.Y?(t.Bot.X=t.Curr.X,t.Bot.Y=t.Curr.Y,n.use_xyz&&(t.Bot.Z=t.Curr.Z),t.Top.X=t.Next.Curr.X,t.Top.Y=t.Next.Curr.Y,n.use_xyz&&(t.Top.Z=t.Next.Curr.Z)):(t.Top.X=t.Curr.X,t.Top.Y=t.Curr.Y,n.use_xyz&&(t.Top.Z=t.Curr.Z),t.Bot.X=t.Next.Curr.X,t.Bot.Y=t.Next.Curr.Y,n.use_xyz&&(t.Bot.Z=t.Next.Curr.Z)),this.SetDx(t),t.PolyTyp=e},n.ClipperBase.prototype.FindNextLocMin=function(t){for(var e;;){for(;n.FPoint.op_Inequality(t.Bot,t.Prev.Bot)||n.FPoint.op_Equality(t.Curr,t.Top);)t=t.Next;if(t.Dx!==n.ClipperBase.horizontal&&t.Prev.Dx!==n.ClipperBase.horizontal)break;for(;t.Prev.Dx===n.ClipperBase.horizontal;)t=t.Prev;for(e=t;t.Dx===n.ClipperBase.horizontal;)t=t.Next;if(t.Top.Y!==t.Prev.Bot.Y){e.Prev.Bot.X<t.Bot.X&&(t=e);break}}return t},n.ClipperBase.prototype.ProcessBound=function(t,e){var i,r=t;if(r.OutIdx===n.ClipperBase.Skip){if(t=r,e){for(;t.Top.Y===t.Next.Bot.Y;)t=t.Next;for(;t!==r&&t.Dx===n.ClipperBase.horizontal;)t=t.Prev}else{for(;t.Top.Y===t.Prev.Bot.Y;)t=t.Prev;for(;t!==r&&t.Dx===n.ClipperBase.horizontal;)t=t.Next}if(t===r)r=e?t.Next:t.Prev;else{t=e?r.Next:r.Prev;var s=new n.LocalMinima;s.Next=null,s.Y=t.Bot.Y,s.LeftBound=null,s.RightBound=t,t.WindDelta=0,r=this.ProcessBound(t,e),this.InsertLocalMinima(s)}return r}if(t.Dx===n.ClipperBase.horizontal&&((s=e?t.Prev:t.Next).Dx===n.ClipperBase.horizontal?s.Bot.X!==t.Bot.X&&s.Top.X!==t.Bot.X&&this.ReverseHorizontal(t):s.Bot.X!==t.Bot.X&&this.ReverseHorizontal(t)),s=t,e){for(;r.Top.Y===r.Next.Bot.Y&&r.Next.OutIdx!==n.ClipperBase.Skip;)r=r.Next;if(r.Dx===n.ClipperBase.horizontal&&r.Next.OutIdx!==n.ClipperBase.Skip){for(i=r;i.Prev.Dx===n.ClipperBase.horizontal;)i=i.Prev;i.Prev.Top.X>r.Next.Top.X&&(r=i.Prev)}for(;t!==r;)t.NextInLML=t.Next,t.Dx===n.ClipperBase.horizontal&&t!==s&&t.Bot.X!==t.Prev.Top.X&&this.ReverseHorizontal(t),t=t.Next;t.Dx===n.ClipperBase.horizontal&&t!==s&&t.Bot.X!==t.Prev.Top.X&&this.ReverseHorizontal(t),r=r.Next}else{for(;r.Top.Y===r.Prev.Bot.Y&&r.Prev.OutIdx!==n.ClipperBase.Skip;)r=r.Prev;if(r.Dx===n.ClipperBase.horizontal&&r.Prev.OutIdx!==n.ClipperBase.Skip){for(i=r;i.Next.Dx===n.ClipperBase.horizontal;)i=i.Next;(i.Next.Top.X===r.Prev.Top.X||i.Next.Top.X>r.Prev.Top.X)&&(r=i.Next)}for(;t!==r;)t.NextInLML=t.Prev,t.Dx===n.ClipperBase.horizontal&&t!==s&&t.Bot.X!==t.Next.Top.X&&this.ReverseHorizontal(t),t=t.Prev;t.Dx===n.ClipperBase.horizontal&&t!==s&&t.Bot.X!==t.Next.Top.X&&this.ReverseHorizontal(t),r=r.Prev}return r},n.ClipperBase.prototype.AddPath=function(t,e,i){n.use_lines?i||e!==n.PolyType.ptClip||n.Error("AddPath: Open paths must be subject."):i||n.Error("AddPath: Open paths have been disabled.");var r=t.length-1;if(i)for(;0<r&&n.FPoint.op_Equality(t[r],t[0]);)--r;for(;0<r&&n.FPoint.op_Equality(t[r],t[r-1]);)--r;if(i&&2>r||!i&&1>r)return!1;for(var s=[],o=0;o<=r;o++)s.push(new n.TEdge);var a=!0;for(s[1].Curr.X=t[1].X,s[1].Curr.Y=t[1].Y,n.use_xyz&&(s[1].Curr.Z=t[1].Z),this.RangeTest(t[0]),this.RangeTest(t[r]),this.InitEdge(s[0],s[1],s[r],t[0]),this.InitEdge(s[r],s[0],s[r-1],t[r]),o=r-1;1<=o;--o)this.RangeTest(t[o]),this.InitEdge(s[o],s[o+1],s[o-1],t[o]);for(o=t=r=s[0];;)if(t.Curr!==t.Next.Curr||!i&&t.Next===r){if(t.Prev===t.Next)break;if(i&&n.ClipperBase.SlopesEqual4(t.Prev.Curr,t.Curr,t.Next.Curr)&&(!this.PreserveCollinear||!this.Pt2IsBetweenPt1AndPt3(t.Prev.Curr,t.Curr,t.Next.Curr))){t===r&&(r=t.Next),o=t=(t=this.RemoveEdge(t)).Prev;continue}if((t=t.Next)===o||!i&&t.Next===r)break}else{if(t===t.Next)break;t===r&&(r=t.Next),o=t=this.RemoveEdge(t)}if(!i&&t===t.Next||i&&t.Prev===t.Next)return!1;i||(this.m_HasOpenPaths=!0,r.Prev.OutIdx=n.ClipperBase.Skip),t=r;do{this.InitEdge2(t,e),t=t.Next,a&&t.Curr.Y!==r.Curr.Y&&(a=!1)}while(t!==r);if(a){if(i)return!1;for(t.Prev.OutIdx=n.ClipperBase.Skip,(e=new n.LocalMinima).Next=null,e.Y=t.Bot.Y,e.LeftBound=null,e.RightBound=t,e.RightBound.Side=n.EdgeSide.esRight,e.RightBound.WindDelta=0;t.Bot.X!==t.Prev.Top.X&&this.ReverseHorizontal(t),t.Next.OutIdx!==n.ClipperBase.Skip;)t=t.NextInLML=t.Next;return this.InsertLocalMinima(e),this.m_edges.push(s),!0}for(this.m_edges.push(s),a=null,n.FPoint.op_Equality(t.Prev.Bot,t.Prev.Top)&&(t=t.Next);(t=this.FindNextLocMin(t))!==a;)null===a&&(a=t),(e=new n.LocalMinima).Next=null,e.Y=t.Bot.Y,t.Dx<t.Prev.Dx?(e.LeftBound=t.Prev,e.RightBound=t,s=!1):(e.LeftBound=t,e.RightBound=t.Prev,s=!0),e.LeftBound.Side=n.EdgeSide.esLeft,e.RightBound.Side=n.EdgeSide.esRight,e.LeftBound.WindDelta=i?e.LeftBound.Next===e.RightBound?-1:1:0,e.RightBound.WindDelta=-e.LeftBound.WindDelta,(t=this.ProcessBound(e.LeftBound,s)).OutIdx===n.ClipperBase.Skip&&(t=this.ProcessBound(t,s)),(r=this.ProcessBound(e.RightBound,!s)).OutIdx===n.ClipperBase.Skip&&(r=this.ProcessBound(r,!s)),e.LeftBound.OutIdx===n.ClipperBase.Skip?e.LeftBound=null:e.RightBound.OutIdx===n.ClipperBase.Skip&&(e.RightBound=null),this.InsertLocalMinima(e),s||(t=r);return!0},n.ClipperBase.prototype.AddPaths=function(t,e,i){for(var n=!1,r=0,s=t.length;r<s;++r)this.AddPath(t[r],e,i)&&(n=!0);return n},n.ClipperBase.prototype.Pt2IsBetweenPt1AndPt3=function(t,e,i){return!(n.FPoint.op_Equality(t,i)||n.FPoint.op_Equality(t,e)||n.FPoint.op_Equality(i,e))&&(t.X!==i.X?e.X>t.X==e.X<i.X:e.Y>t.Y==e.Y<i.Y)},n.ClipperBase.prototype.RemoveEdge=function(t){t.Prev.Next=t.Next,t.Next.Prev=t.Prev;var e=t.Next;return t.Prev=null,e},n.ClipperBase.prototype.SetDx=function(t){t.Delta.X=t.Top.X-t.Bot.X,t.Delta.Y=t.Top.Y-t.Bot.Y,t.Dx=0===t.Delta.Y?n.ClipperBase.horizontal:t.Delta.X/t.Delta.Y},n.ClipperBase.prototype.InsertLocalMinima=function(t){if(null===this.m_MinimaList)this.m_MinimaList=t;else if(t.Y>=this.m_MinimaList.Y)t.Next=this.m_MinimaList,this.m_MinimaList=t;else{for(var e=this.m_MinimaList;null!==e.Next&&t.Y<e.Next.Y;)e=e.Next;t.Next=e.Next,e.Next=t}},n.ClipperBase.prototype.PopLocalMinima=function(t,e){return e.v=this.m_CurrentLM,null!==this.m_CurrentLM&&this.m_CurrentLM.Y===t&&(this.m_CurrentLM=this.m_CurrentLM.Next,!0)},n.ClipperBase.prototype.ReverseHorizontal=function(t){var e=t.Top.X;t.Top.X=t.Bot.X,t.Bot.X=e,n.use_xyz&&(e=t.Top.Z,t.Top.Z=t.Bot.Z,t.Bot.Z=e)},n.ClipperBase.prototype.Reset=function(){if(this.m_CurrentLM=this.m_MinimaList,null!==this.m_CurrentLM){this.m_Scanbeam=null;for(var t=this.m_MinimaList;null!==t;){this.InsertScanbeam(t.Y);var e=t.LeftBound;null!==e&&(e.Curr.X=e.Bot.X,e.Curr.Y=e.Bot.Y,n.use_xyz&&(e.Curr.Z=e.Bot.Z),e.OutIdx=n.ClipperBase.Unassigned),null!==(e=t.RightBound)&&(e.Curr.X=e.Bot.X,e.Curr.Y=e.Bot.Y,n.use_xyz&&(e.Curr.Z=e.Bot.Z),e.OutIdx=n.ClipperBase.Unassigned),t=t.Next}this.m_ActiveEdges=null}},n.ClipperBase.prototype.InsertScanbeam=function(t){if(null===this.m_Scanbeam)this.m_Scanbeam=new n.Scanbeam,this.m_Scanbeam.Next=null,this.m_Scanbeam.Y=t;else if(t>this.m_Scanbeam.Y){var e=new n.Scanbeam;e.Y=t,e.Next=this.m_Scanbeam,this.m_Scanbeam=e}else{for(e=this.m_Scanbeam;null!==e.Next&&t<=e.Next.Y;)e=e.Next;if(t!==e.Y){var i=new n.Scanbeam;i.Y=t,i.Next=e.Next,e.Next=i}}},n.ClipperBase.prototype.PopScanbeam=function(t){return null===this.m_Scanbeam?(t.v=0,!1):(t.v=this.m_Scanbeam.Y,this.m_Scanbeam=this.m_Scanbeam.Next,!0)},n.ClipperBase.prototype.LocalMinimaPending=function(){return null!==this.m_CurrentLM},n.ClipperBase.prototype.CreateOutRec=function(){var t=new n.OutRec;return t.Idx=n.ClipperBase.Unassigned,t.IsHole=!1,t.IsOpen=!1,t.FirstLeft=null,t.Pts=null,t.BottomPt=null,t.PolyNode=null,this.m_PolyOuts.push(t),t.Idx=this.m_PolyOuts.length-1,t},n.ClipperBase.prototype.DisposeOutRec=function(t){this.m_PolyOuts[t].Pts=null,this.m_PolyOuts[t]=null},n.ClipperBase.prototype.UpdateEdgeIntoAEL=function(t){null===t.NextInLML&&n.Error("UpdateEdgeIntoAEL: invalid call");var e=t.PrevInAEL,i=t.NextInAEL;return t.NextInLML.OutIdx=t.OutIdx,null!==e?e.NextInAEL=t.NextInLML:this.m_ActiveEdges=t.NextInLML,null!==i&&(i.PrevInAEL=t.NextInLML),t.NextInLML.Side=t.Side,t.NextInLML.WindDelta=t.WindDelta,t.NextInLML.WindCnt=t.WindCnt,t.NextInLML.WindCnt2=t.WindCnt2,(t=t.NextInLML).Curr.X=t.Bot.X,t.Curr.Y=t.Bot.Y,t.PrevInAEL=e,t.NextInAEL=i,n.ClipperBase.IsHorizontal(t)||this.InsertScanbeam(t.Top.Y),t},n.ClipperBase.prototype.SwapPositionsInAEL=function(t,e){if(t.NextInAEL!==t.PrevInAEL&&e.NextInAEL!==e.PrevInAEL){if(t.NextInAEL===e){var i=e.NextInAEL;null!==i&&(i.PrevInAEL=t);var n=t.PrevInAEL;null!==n&&(n.NextInAEL=e),e.PrevInAEL=n,e.NextInAEL=t,t.PrevInAEL=e,t.NextInAEL=i}else e.NextInAEL===t?(null!==(i=t.NextInAEL)&&(i.PrevInAEL=e),null!==(n=e.PrevInAEL)&&(n.NextInAEL=t),t.PrevInAEL=n,t.NextInAEL=e,e.PrevInAEL=t,e.NextInAEL=i):(i=t.NextInAEL,n=t.PrevInAEL,t.NextInAEL=e.NextInAEL,null!==t.NextInAEL&&(t.NextInAEL.PrevInAEL=t),t.PrevInAEL=e.PrevInAEL,null!==t.PrevInAEL&&(t.PrevInAEL.NextInAEL=t),e.NextInAEL=i,null!==e.NextInAEL&&(e.NextInAEL.PrevInAEL=e),e.PrevInAEL=n,null!==e.PrevInAEL&&(e.PrevInAEL.NextInAEL=e));null===t.PrevInAEL?this.m_ActiveEdges=t:null===e.PrevInAEL&&(this.m_ActiveEdges=e)}},n.ClipperBase.prototype.DeleteFromAEL=function(t){var e=t.PrevInAEL,i=t.NextInAEL;null===e&&null===i&&t!==this.m_ActiveEdges||(null!==e?e.NextInAEL=i:this.m_ActiveEdges=i,null!==i&&(i.PrevInAEL=e),t.NextInAEL=null,t.PrevInAEL=null)},n.Clipper=function(t){void 0===t&&(t=0),this.m_PolyOuts=null,this.m_ClipType=n.ClipType.ctIntersection,this.m_IntersectNodeComparer=this.m_IntersectList=this.m_SortedEdges=this.m_ActiveEdges=this.m_Maxima=this.m_Scanbeam=null,this.m_ExecuteLocked=!1,this.m_SubjFillType=this.m_ClipFillType=n.PolyFillType.pftEvenOdd,this.m_GhostJoins=this.m_Joins=null,this.StrictlySimple=this.ReverseSolution=this.m_UsingPolyTree=!1,n.ClipperBase.call(this),this.m_SortedEdges=this.m_ActiveEdges=this.m_Maxima=this.m_Scanbeam=null,this.m_IntersectList=[],this.m_IntersectNodeComparer=n.MyIntersectNodeSort.Compare,this.m_UsingPolyTree=this.m_ExecuteLocked=!1,this.m_PolyOuts=[],this.m_Joins=[],this.m_GhostJoins=[],this.ReverseSolution=0!=(1&t),this.StrictlySimple=0!=(2&t),this.PreserveCollinear=0!=(4&t),n.use_xyz&&(this.ZFillFunction=null)},n.Clipper.ioReverseSolution=1,n.Clipper.ioStrictlySimple=2,n.Clipper.ioPreserveCollinear=4,n.Clipper.prototype.Clear=function(){0!==this.m_edges.length&&(this.DisposeAllPolyPts(),n.ClipperBase.prototype.Clear.call(this))},n.Clipper.prototype.InsertMaxima=function(t){var e=new n.Maxima;if(e.X=t,null===this.m_Maxima)this.m_Maxima=e,this.m_Maxima.Next=null,this.m_Maxima.Prev=null;else if(t<this.m_Maxima.X)e.Next=this.m_Maxima,e.Prev=null,this.m_Maxima=e;else{for(var i=this.m_Maxima;null!==i.Next&&t>=i.Next.X;)i=i.Next;t!==i.X&&(e.Next=i.Next,e.Prev=i,null!==i.Next&&(i.Next.Prev=e),i.Next=e)}},n.Clipper.prototype.Execute=function(){var t,e=arguments,i=e.length,r=e[1]instanceof n.PolyTree;if(4===i&&!r){if(i=e[0],s=e[1],r=e[2],e=e[3],this.m_ExecuteLocked)return!1;this.m_HasOpenPaths&&n.Error("Error: PolyTree struct is needed for open path clipping."),this.m_ExecuteLocked=!0,n.Clear(s),this.m_SubjFillType=r,this.m_ClipFillType=e,this.m_ClipType=i,this.m_UsingPolyTree=!1;try{(t=this.ExecuteInternal())&&this.BuildResult(s)}finally{this.DisposeAllPolyPts(),this.m_ExecuteLocked=!1}return t}if(4===i&&r){i=e[0];var s=e[1];if(r=e[2],e=e[3],this.m_ExecuteLocked)return!1;this.m_ExecuteLocked=!0,this.m_SubjFillType=r,this.m_ClipFillType=e,this.m_ClipType=i,this.m_UsingPolyTree=!0;try{(t=this.ExecuteInternal())&&this.BuildResult2(s)}finally{this.DisposeAllPolyPts(),this.m_ExecuteLocked=!1}return t}if(2===i&&!r||2===i&&r)return i=e[0],s=e[1],this.Execute(i,s,n.PolyFillType.pftEvenOdd,n.PolyFillType.pftEvenOdd)},n.Clipper.prototype.FixHoleLinkage=function(t){if(null!==t.FirstLeft&&(t.IsHole===t.FirstLeft.IsHole||null===t.FirstLeft.Pts)){for(var e=t.FirstLeft;null!==e&&(e.IsHole===t.IsHole||null===e.Pts);)e=e.FirstLeft;t.FirstLeft=e}},n.Clipper.prototype.ExecuteInternal=function(){try{this.Reset(),this.m_Maxima=this.m_SortedEdges=null;var t,e={},i={};if(!this.PopScanbeam(e))return!1;for(this.InsertLocalMinimaIntoAEL(e.v);this.PopScanbeam(i)||this.LocalMinimaPending();){if(this.ProcessHorizontals(),this.m_GhostJoins.length=0,!this.ProcessIntersections(i.v))return!1;this.ProcessEdgesAtTopOfScanbeam(i.v),e.v=i.v,this.InsertLocalMinimaIntoAEL(e.v)}var n=0;for(t=this.m_PolyOuts.length;n<t;n++){var r=this.m_PolyOuts[n];null===r.Pts||r.IsOpen||(r.IsHole^this.ReverseSolution)==0<this.Area$1(r)&&this.ReversePolyPtLinks(r.Pts)}for(this.JoinCommonEdges(),n=0,t=this.m_PolyOuts.length;n<t;n++)null!==(r=this.m_PolyOuts[n]).Pts&&(r.IsOpen?this.FixupOutPolyline(r):this.FixupOutPolygon(r));return this.StrictlySimple&&this.DoSimplePolygons(),!0}finally{this.m_Joins.length=0,this.m_GhostJoins.length=0}},n.Clipper.prototype.DisposeAllPolyPts=function(){for(var t=0,e=this.m_PolyOuts.length;t<e;++t)this.DisposeOutRec(t);n.Clear(this.m_PolyOuts)},n.Clipper.prototype.AddJoin=function(t,e,i){var r=new n.Join;r.OutPt1=t,r.OutPt2=e,r.OffPt.X=i.X,r.OffPt.Y=i.Y,n.use_xyz&&(r.OffPt.Z=i.Z),this.m_Joins.push(r)},n.Clipper.prototype.AddGhostJoin=function(t,e){var i=new n.Join;i.OutPt1=t,i.OffPt.X=e.X,i.OffPt.Y=e.Y,n.use_xyz&&(i.OffPt.Z=e.Z),this.m_GhostJoins.push(i)},n.Clipper.prototype.SetZ=function(t,e,i){null!==this.ZFillFunction&&0===t.Z&&null!==this.ZFillFunction&&(n.FPoint.op_Equality(t,e.Bot)?t.Z=e.Bot.Z:n.FPoint.op_Equality(t,e.Top)?t.Z=e.Top.Z:n.FPoint.op_Equality(t,i.Bot)?t.Z=i.Bot.Z:n.FPoint.op_Equality(t,i.Top)?t.Z=i.Top.Z:this.ZFillFunction(e.Bot,e.Top,i.Bot,i.Top,t))},n.Clipper.prototype.InsertLocalMinimaIntoAEL=function(t){for(var e,i,r,s={};this.PopLocalMinima(t,s);){i=s.v.LeftBound,r=s.v.RightBound;var o=null;if(null===i?(this.InsertEdgeIntoAEL(r,null),this.SetWindingCount(r),this.IsContributing(r)&&(o=this.AddOutPt(r,r.Bot))):(null===r?(this.InsertEdgeIntoAEL(i,null),this.SetWindingCount(i),this.IsContributing(i)&&(o=this.AddOutPt(i,i.Bot))):(this.InsertEdgeIntoAEL(i,null),this.InsertEdgeIntoAEL(r,i),this.SetWindingCount(i),r.WindCnt=i.WindCnt,r.WindCnt2=i.WindCnt2,this.IsContributing(i)&&(o=this.AddLocalMinPoly(i,r,i.Bot))),this.InsertScanbeam(i.Top.Y)),null!==r&&(n.ClipperBase.IsHorizontal(r)?(null!==r.NextInLML&&this.InsertScanbeam(r.NextInLML.Top.Y),this.AddEdgeToSEL(r)):this.InsertScanbeam(r.Top.Y)),null!==i&&null!==r){if(null!==o&&n.ClipperBase.IsHorizontal(r)&&0<this.m_GhostJoins.length&&0!==r.WindDelta){e=0;for(var a=this.m_GhostJoins.length;e<a;e++){var l=this.m_GhostJoins[e];this.HorzSegmentsOverlap(l.OutPt1.Pt.X,l.OffPt.X,r.Bot.X,r.Top.X)&&this.AddJoin(l.OutPt1,o,l.OffPt)}}if(0<=i.OutIdx&&null!==i.PrevInAEL&&i.PrevInAEL.Curr.X===i.Bot.X&&0<=i.PrevInAEL.OutIdx&&n.ClipperBase.SlopesEqual5(i.PrevInAEL.Curr,i.PrevInAEL.Top,i.Curr,i.Top)&&0!==i.WindDelta&&0!==i.PrevInAEL.WindDelta&&(e=this.AddOutPt(i.PrevInAEL,i.Bot),this.AddJoin(o,e,i.Top)),i.NextInAEL!==r&&(0<=r.OutIdx&&0<=r.PrevInAEL.OutIdx&&n.ClipperBase.SlopesEqual5(r.PrevInAEL.Curr,r.PrevInAEL.Top,r.Curr,r.Top)&&0!==r.WindDelta&&0!==r.PrevInAEL.WindDelta&&(e=this.AddOutPt(r.PrevInAEL,r.Bot),this.AddJoin(o,e,r.Top)),null!==(o=i.NextInAEL)))for(;o!==r;)this.IntersectEdges(r,o,i.Curr),o=o.NextInAEL}}},n.Clipper.prototype.InsertEdgeIntoAEL=function(t,e){if(null===this.m_ActiveEdges)t.PrevInAEL=null,t.NextInAEL=null,this.m_ActiveEdges=t;else if(null===e&&this.E2InsertsBeforeE1(this.m_ActiveEdges,t))t.PrevInAEL=null,t.NextInAEL=this.m_ActiveEdges,this.m_ActiveEdges=this.m_ActiveEdges.PrevInAEL=t;else{for(null===e&&(e=this.m_ActiveEdges);null!==e.NextInAEL&&!this.E2InsertsBeforeE1(e.NextInAEL,t);)e=e.NextInAEL;t.NextInAEL=e.NextInAEL,null!==e.NextInAEL&&(e.NextInAEL.PrevInAEL=t),t.PrevInAEL=e,e.NextInAEL=t}},n.Clipper.prototype.E2InsertsBeforeE1=function(t,e){return e.Curr.X===t.Curr.X?e.Top.Y>t.Top.Y?e.Top.X<n.Clipper.TopX(t,e.Top.Y):t.Top.X>n.Clipper.TopX(e,t.Top.Y):e.Curr.X<t.Curr.X},n.Clipper.prototype.IsEvenOddFillType=function(t){return t.PolyTyp===n.PolyType.ptSubject?this.m_SubjFillType===n.PolyFillType.pftEvenOdd:this.m_ClipFillType===n.PolyFillType.pftEvenOdd},n.Clipper.prototype.IsEvenOddAltFillType=function(t){return t.PolyTyp===n.PolyType.ptSubject?this.m_ClipFillType===n.PolyFillType.pftEvenOdd:this.m_SubjFillType===n.PolyFillType.pftEvenOdd},n.Clipper.prototype.IsContributing=function(t){if(t.PolyTyp===n.PolyType.ptSubject)var e=this.m_SubjFillType,i=this.m_ClipFillType;else e=this.m_ClipFillType,i=this.m_SubjFillType;switch(e){case n.PolyFillType.pftEvenOdd:if(0===t.WindDelta&&1!==t.WindCnt)return!1;break;case n.PolyFillType.pftNonZero:if(1!==Math.abs(t.WindCnt))return!1;break;case n.PolyFillType.pftPositive:if(1!==t.WindCnt)return!1;break;default:if(-1!==t.WindCnt)return!1}switch(this.m_ClipType){case n.ClipType.ctIntersection:switch(i){case n.PolyFillType.pftEvenOdd:case n.PolyFillType.pftNonZero:return 0!==t.WindCnt2;case n.PolyFillType.pftPositive:return 0<t.WindCnt2;default:return 0>t.WindCnt2}case n.ClipType.ctUnion:switch(i){case n.PolyFillType.pftEvenOdd:case n.PolyFillType.pftNonZero:return 0===t.WindCnt2;case n.PolyFillType.pftPositive:return 0>=t.WindCnt2;default:return 0<=t.WindCnt2}case n.ClipType.ctDifference:if(t.PolyTyp===n.PolyType.ptSubject)switch(i){case n.PolyFillType.pftEvenOdd:case n.PolyFillType.pftNonZero:return 0===t.WindCnt2;case n.PolyFillType.pftPositive:return 0>=t.WindCnt2;default:return 0<=t.WindCnt2}else switch(i){case n.PolyFillType.pftEvenOdd:case n.PolyFillType.pftNonZero:return 0!==t.WindCnt2;case n.PolyFillType.pftPositive:return 0<t.WindCnt2;default:return 0>t.WindCnt2}case n.ClipType.ctXor:if(0===t.WindDelta)switch(i){case n.PolyFillType.pftEvenOdd:case n.PolyFillType.pftNonZero:return 0===t.WindCnt2;case n.PolyFillType.pftPositive:return 0>=t.WindCnt2;default:return 0<=t.WindCnt2}}return!0},n.Clipper.prototype.SetWindingCount=function(t){for(var e=t.PrevInAEL;null!==e&&(e.PolyTyp!==t.PolyTyp||0===e.WindDelta);)e=e.PrevInAEL;if(null===e)e=t.PolyTyp===n.PolyType.ptSubject?this.m_SubjFillType:this.m_ClipFillType,t.WindCnt=0===t.WindDelta?e===n.PolyFillType.pftNegative?-1:1:t.WindDelta,t.WindCnt2=0,e=this.m_ActiveEdges;else{if(0===t.WindDelta&&this.m_ClipType!==n.ClipType.ctUnion)t.WindCnt=1;else if(this.IsEvenOddFillType(t))if(0===t.WindDelta){for(var i=!0,r=e.PrevInAEL;null!==r;)r.PolyTyp===e.PolyTyp&&0!==r.WindDelta&&(i=!i),r=r.PrevInAEL;t.WindCnt=i?0:1}else t.WindCnt=t.WindDelta;else t.WindCnt=0>e.WindCnt*e.WindDelta?1<Math.abs(e.WindCnt)?0>e.WindDelta*t.WindDelta?e.WindCnt:e.WindCnt+t.WindDelta:0===t.WindDelta?1:t.WindDelta:0===t.WindDelta?0>e.WindCnt?e.WindCnt-1:e.WindCnt+1:0>e.WindDelta*t.WindDelta?e.WindCnt:e.WindCnt+t.WindDelta;t.WindCnt2=e.WindCnt2,e=e.NextInAEL}if(this.IsEvenOddAltFillType(t))for(;e!==t;)0!==e.WindDelta&&(t.WindCnt2=0===t.WindCnt2?1:0),e=e.NextInAEL;else for(;e!==t;)t.WindCnt2+=e.WindDelta,e=e.NextInAEL},n.Clipper.prototype.AddEdgeToSEL=function(t){null===this.m_SortedEdges?(this.m_SortedEdges=t,t.PrevInSEL=null,t.NextInSEL=null):(t.NextInSEL=this.m_SortedEdges,t.PrevInSEL=null,this.m_SortedEdges=this.m_SortedEdges.PrevInSEL=t)},n.Clipper.prototype.PopEdgeFromSEL=function(t){if(t.v=this.m_SortedEdges,null===t.v)return!1;var e=t.v;return this.m_SortedEdges=t.v.NextInSEL,null!==this.m_SortedEdges&&(this.m_SortedEdges.PrevInSEL=null),e.NextInSEL=null,e.PrevInSEL=null,!0},n.Clipper.prototype.CopyAELToSEL=function(){var t=this.m_ActiveEdges;for(this.m_SortedEdges=t;null!==t;)t.PrevInSEL=t.PrevInAEL,t=t.NextInSEL=t.NextInAEL},n.Clipper.prototype.SwapPositionsInSEL=function(t,e){if(!(null===t.NextInSEL&&null===t.PrevInSEL||null===e.NextInSEL&&null===e.PrevInSEL)){if(t.NextInSEL===e){var i=e.NextInSEL;null!==i&&(i.PrevInSEL=t);var n=t.PrevInSEL;null!==n&&(n.NextInSEL=e),e.PrevInSEL=n,e.NextInSEL=t,t.PrevInSEL=e,t.NextInSEL=i}else e.NextInSEL===t?(null!==(i=t.NextInSEL)&&(i.PrevInSEL=e),null!==(n=e.PrevInSEL)&&(n.NextInSEL=t),t.PrevInSEL=n,t.NextInSEL=e,e.PrevInSEL=t,e.NextInSEL=i):(i=t.NextInSEL,n=t.PrevInSEL,t.NextInSEL=e.NextInSEL,null!==t.NextInSEL&&(t.NextInSEL.PrevInSEL=t),t.PrevInSEL=e.PrevInSEL,null!==t.PrevInSEL&&(t.PrevInSEL.NextInSEL=t),e.NextInSEL=i,null!==e.NextInSEL&&(e.NextInSEL.PrevInSEL=e),e.PrevInSEL=n,null!==e.PrevInSEL&&(e.PrevInSEL.NextInSEL=e));null===t.PrevInSEL?this.m_SortedEdges=t:null===e.PrevInSEL&&(this.m_SortedEdges=e)}},n.Clipper.prototype.AddLocalMaxPoly=function(t,e,i){this.AddOutPt(t,i),0===e.WindDelta&&this.AddOutPt(e,i),t.OutIdx===e.OutIdx?(t.OutIdx=-1,e.OutIdx=-1):t.OutIdx<e.OutIdx?this.AppendPolygon(t,e):this.AppendPolygon(e,t)},n.Clipper.prototype.AddLocalMinPoly=function(t,e,i){if(n.ClipperBase.IsHorizontal(e)||t.Dx>e.Dx){var r=this.AddOutPt(t,i);e.OutIdx=t.OutIdx,t.Side=n.EdgeSide.esLeft,e.Side=n.EdgeSide.esRight;var s=t;t=s.PrevInAEL===e?e.PrevInAEL:s.PrevInAEL}else r=this.AddOutPt(e,i),t.OutIdx=e.OutIdx,t.Side=n.EdgeSide.esRight,e.Side=n.EdgeSide.esLeft,t=(s=e).PrevInAEL===t?t.PrevInAEL:s.PrevInAEL;if(null!==t&&0<=t.OutIdx&&t.Top.Y<i.Y&&s.Top.Y<i.Y){e=n.Clipper.TopX(t,i.Y);var o=n.Clipper.TopX(s,i.Y);e===o&&0!==s.WindDelta&&0!==t.WindDelta&&n.ClipperBase.SlopesEqual5(new n.FPoint2(e,i.Y),t.Top,new n.FPoint2(o,i.Y),s.Top)&&(i=this.AddOutPt(t,i),this.AddJoin(r,i,s.Top))}return r},n.Clipper.prototype.AddOutPt=function(t,e){if(0>t.OutIdx){var i=this.CreateOutRec();i.IsOpen=0===t.WindDelta;var r=new n.OutPt;i.Pts=r,r.Idx=i.Idx,r.Pt.X=e.X,r.Pt.Y=e.Y,n.use_xyz&&(r.Pt.Z=e.Z),r.Next=r,r.Prev=r,i.IsOpen||this.SetHoleState(t,i),t.OutIdx=i.Idx}else{var s=(i=this.m_PolyOuts[t.OutIdx]).Pts,o=t.Side===n.EdgeSide.esLeft;if(o&&n.FPoint.op_Equality(e,s.Pt))return s;if(!o&&n.FPoint.op_Equality(e,s.Prev.Pt))return s.Prev;(r=new n.OutPt).Idx=i.Idx,r.Pt.X=e.X,r.Pt.Y=e.Y,n.use_xyz&&(r.Pt.Z=e.Z),r.Next=s,r.Prev=s.Prev,r.Prev.Next=r,s.Prev=r,o&&(i.Pts=r)}return r},n.Clipper.prototype.GetLastOutPt=function(t){var e=this.m_PolyOuts[t.OutIdx];return t.Side===n.EdgeSide.esLeft?e.Pts:e.Pts.Prev},n.Clipper.prototype.SwapPoints=function(t,e){var i=new n.FPoint1(t.Value);t.Value.X=e.Value.X,t.Value.Y=e.Value.Y,n.use_xyz&&(t.Value.Z=e.Value.Z),e.Value.X=i.X,e.Value.Y=i.Y,n.use_xyz&&(e.Value.Z=i.Z)},n.Clipper.prototype.HorzSegmentsOverlap=function(t,e,i,n){if(t>e){var r=t;t=e,e=r}return i>n&&(r=i,i=n,n=r),t<n&&i<e},n.Clipper.prototype.SetHoleState=function(t,e){for(var i=t.PrevInAEL,n=null;null!==i;)0<=i.OutIdx&&0!==i.WindDelta&&(null===n?n=i:n.OutIdx===i.OutIdx&&(n=null)),i=i.PrevInAEL;null===n?(e.FirstLeft=null,e.IsHole=!1):(e.FirstLeft=this.m_PolyOuts[n.OutIdx],e.IsHole=!e.FirstLeft.IsHole)},n.Clipper.prototype.GetDx=function(t,e){return t.Y===e.Y?n.ClipperBase.horizontal:(e.X-t.X)/(e.Y-t.Y)},n.Clipper.prototype.FirstIsBottomPt=function(t,e){for(var i=t.Prev;n.FPoint.op_Equality(i.Pt,t.Pt)&&i!==t;)i=i.Prev;var r=Math.abs(this.GetDx(t.Pt,i.Pt));for(i=t.Next;n.FPoint.op_Equality(i.Pt,t.Pt)&&i!==t;)i=i.Next;var s=Math.abs(this.GetDx(t.Pt,i.Pt));for(i=e.Prev;n.FPoint.op_Equality(i.Pt,e.Pt)&&i!==e;)i=i.Prev;var o=Math.abs(this.GetDx(e.Pt,i.Pt));for(i=e.Next;n.FPoint.op_Equality(i.Pt,e.Pt)&&i!==e;)i=i.Next;return i=Math.abs(this.GetDx(e.Pt,i.Pt)),Math.max(r,s)===Math.max(o,i)&&Math.min(r,s)===Math.min(o,i)?0<this.Area(t):r>=o&&r>=i||s>=o&&s>=i},n.Clipper.prototype.GetBottomPt=function(t){for(var e=null,i=t.Next;i!==t;)i.Pt.Y>t.Pt.Y?(t=i,e=null):i.Pt.Y===t.Pt.Y&&i.Pt.X<=t.Pt.X&&(i.Pt.X<t.Pt.X?(e=null,t=i):i.Next!==t&&i.Prev!==t&&(e=i)),i=i.Next;if(null!==e)for(;e!==i;)for(this.FirstIsBottomPt(i,e)||(t=e),e=e.Next;n.FPoint.op_Inequality(e.Pt,t.Pt);)e=e.Next;return t},n.Clipper.prototype.GetLowermostRec=function(t,e){null===t.BottomPt&&(t.BottomPt=this.GetBottomPt(t.Pts)),null===e.BottomPt&&(e.BottomPt=this.GetBottomPt(e.Pts));var i=t.BottomPt,n=e.BottomPt;return i.Pt.Y>n.Pt.Y?t:i.Pt.Y<n.Pt.Y?e:i.Pt.X<n.Pt.X?t:i.Pt.X>n.Pt.X||i.Next===i?e:n.Next===n||this.FirstIsBottomPt(i,n)?t:e},n.Clipper.prototype.OutRec1RightOfOutRec2=function(t,e){do{if((t=t.FirstLeft)===e)return!0}while(null!==t);return!1},n.Clipper.prototype.GetOutRec=function(t){for(t=this.m_PolyOuts[t];t!==this.m_PolyOuts[t.Idx];)t=this.m_PolyOuts[t.Idx];return t},n.Clipper.prototype.AppendPolygon=function(t,e){var i=this.m_PolyOuts[t.OutIdx],r=this.m_PolyOuts[e.OutIdx],s=this.OutRec1RightOfOutRec2(i,r)?r:this.OutRec1RightOfOutRec2(r,i)?i:this.GetLowermostRec(i,r),o=i.Pts,a=o.Prev,l=r.Pts,h=l.Prev;for(t.Side===n.EdgeSide.esLeft?e.Side===n.EdgeSide.esLeft?(this.ReversePolyPtLinks(l),l.Next=o,o.Prev=l,a.Next=h,h.Prev=a,i.Pts=h):(h.Next=o,o.Prev=h,l.Prev=a,a.Next=l,i.Pts=l):e.Side===n.EdgeSide.esRight?(this.ReversePolyPtLinks(l),a.Next=h,h.Prev=a,l.Next=o,o.Prev=l):(a.Next=l,l.Prev=a,o.Prev=h,h.Next=o),i.BottomPt=null,s===r&&(r.FirstLeft!==i&&(i.FirstLeft=r.FirstLeft),i.IsHole=r.IsHole),r.Pts=null,r.BottomPt=null,r.FirstLeft=i,s=t.OutIdx,o=e.OutIdx,t.OutIdx=-1,e.OutIdx=-1,a=this.m_ActiveEdges;null!==a;){if(a.OutIdx===o){a.OutIdx=s,a.Side=t.Side;break}a=a.NextInAEL}r.Idx=i.Idx},n.Clipper.prototype.ReversePolyPtLinks=function(t){if(null!==t){var e=t;do{var i=e.Next;e.Next=e.Prev,e=e.Prev=i}while(e!==t)}},n.Clipper.SwapSides=function(t,e){var i=t.Side;t.Side=e.Side,e.Side=i},n.Clipper.SwapPolyIndexes=function(t,e){var i=t.OutIdx;t.OutIdx=e.OutIdx,e.OutIdx=i},n.Clipper.prototype.IntersectEdges=function(t,e,i){var r=0<=t.OutIdx,s=0<=e.OutIdx;if(n.use_xyz&&this.SetZ(i,t,e),!n.use_lines||0!==t.WindDelta&&0!==e.WindDelta){if(t.PolyTyp===e.PolyTyp)if(this.IsEvenOddFillType(t)){var o=t.WindCnt;t.WindCnt=e.WindCnt,e.WindCnt=o}else t.WindCnt=0===t.WindCnt+e.WindDelta?-t.WindCnt:t.WindCnt+e.WindDelta,e.WindCnt=0==e.WindCnt-t.WindDelta?-e.WindCnt:e.WindCnt-t.WindDelta;else this.IsEvenOddFillType(e)?t.WindCnt2=0===t.WindCnt2?1:0:t.WindCnt2+=e.WindDelta,this.IsEvenOddFillType(t)?e.WindCnt2=0===e.WindCnt2?1:0:e.WindCnt2-=t.WindDelta;if(t.PolyTyp===n.PolyType.ptSubject)var a=this.m_SubjFillType,l=this.m_ClipFillType;else a=this.m_ClipFillType,l=this.m_SubjFillType;if(e.PolyTyp===n.PolyType.ptSubject){var h=this.m_SubjFillType;o=this.m_ClipFillType}else h=this.m_ClipFillType,o=this.m_SubjFillType;switch(a){case n.PolyFillType.pftPositive:a=t.WindCnt;break;case n.PolyFillType.pftNegative:a=-t.WindCnt;break;default:a=Math.abs(t.WindCnt)}switch(h){case n.PolyFillType.pftPositive:h=e.WindCnt;break;case n.PolyFillType.pftNegative:h=-e.WindCnt;break;default:h=Math.abs(e.WindCnt)}if(r&&s)0!==a&&1!==a||0!==h&&1!==h||t.PolyTyp!==e.PolyTyp&&this.m_ClipType!==n.ClipType.ctXor?this.AddLocalMaxPoly(t,e,i):(this.AddOutPt(t,i),this.AddOutPt(e,i),n.Clipper.SwapSides(t,e),n.Clipper.SwapPolyIndexes(t,e));else if(r)0!==h&&1!==h||(this.AddOutPt(t,i),n.Clipper.SwapSides(t,e),n.Clipper.SwapPolyIndexes(t,e));else if(s)0!==a&&1!==a||(this.AddOutPt(e,i),n.Clipper.SwapSides(t,e),n.Clipper.SwapPolyIndexes(t,e));else if(!(0!==a&&1!==a||0!==h&&1!==h)){switch(l){case n.PolyFillType.pftPositive:r=t.WindCnt2;break;case n.PolyFillType.pftNegative:r=-t.WindCnt2;break;default:r=Math.abs(t.WindCnt2)}switch(o){case n.PolyFillType.pftPositive:s=e.WindCnt2;break;case n.PolyFillType.pftNegative:s=-e.WindCnt2;break;default:s=Math.abs(e.WindCnt2)}if(t.PolyTyp!==e.PolyTyp)this.AddLocalMinPoly(t,e,i);else if(1===a&&1===h)switch(this.m_ClipType){case n.ClipType.ctIntersection:0<r&&0<s&&this.AddLocalMinPoly(t,e,i);break;case n.ClipType.ctUnion:0>=r&&0>=s&&this.AddLocalMinPoly(t,e,i);break;case n.ClipType.ctDifference:(t.PolyTyp===n.PolyType.ptClip&&0<r&&0<s||t.PolyTyp===n.PolyType.ptSubject&&0>=r&&0>=s)&&this.AddLocalMinPoly(t,e,i);break;case n.ClipType.ctXor:this.AddLocalMinPoly(t,e,i)}else n.Clipper.SwapSides(t,e)}}else 0===t.WindDelta&&0===e.WindDelta||(t.PolyTyp===e.PolyTyp&&t.WindDelta!==e.WindDelta&&this.m_ClipType===n.ClipType.ctUnion?0===t.WindDelta?s&&(this.AddOutPt(t,i),r&&(t.OutIdx=-1)):r&&(this.AddOutPt(e,i),s&&(e.OutIdx=-1)):t.PolyTyp!==e.PolyTyp&&(0!==t.WindDelta||1!==Math.abs(e.WindCnt)||this.m_ClipType===n.ClipType.ctUnion&&0!==e.WindCnt2?0!==e.WindDelta||1!==Math.abs(t.WindCnt)||this.m_ClipType===n.ClipType.ctUnion&&0!==t.WindCnt2||(this.AddOutPt(e,i),s&&(e.OutIdx=-1)):(this.AddOutPt(t,i),r&&(t.OutIdx=-1))))},n.Clipper.prototype.DeleteFromSEL=function(t){var e=t.PrevInSEL,i=t.NextInSEL;null===e&&null===i&&t!==this.m_SortedEdges||(null!==e?e.NextInSEL=i:this.m_SortedEdges=i,null!==i&&(i.PrevInSEL=e),t.NextInSEL=null,t.PrevInSEL=null)},n.Clipper.prototype.ProcessHorizontals=function(){for(var t={};this.PopEdgeFromSEL(t);)this.ProcessHorizontal(t.v)},n.Clipper.prototype.GetHorzDirection=function(t,e){t.Bot.X<t.Top.X?(e.Left=t.Bot.X,e.Right=t.Top.X,e.Dir=n.Direction.dLeftToRight):(e.Left=t.Top.X,e.Right=t.Bot.X,e.Dir=n.Direction.dRightToLeft)},n.Clipper.prototype.ProcessHorizontal=function(t){var e,i={Dir:null,Left:null,Right:null};this.GetHorzDirection(t,i);var r=i.Dir,s=i.Left;i=i.Right;for(var o=0===t.WindDelta,a=t,l=null;null!==a.NextInLML&&n.ClipperBase.IsHorizontal(a.NextInLML);)a=a.NextInLML;null===a.NextInLML&&(l=this.GetMaximaPair(a));var h=this.m_Maxima;if(null!==h)if(r===n.Direction.dLeftToRight){for(;null!==h&&h.X<=t.Bot.X;)h=h.Next;null!==h&&h.X>=a.Top.X&&(h=null)}else{for(;null!==h.Next&&h.Next.X<t.Bot.X;)h=h.Next;h.X<=a.Top.X&&(h=null)}for(var u=null;;){for(var p=t===a,d=this.GetNextInAEL(t,r);null!==d;){if(null!==h)if(r===n.Direction.dLeftToRight)for(;null!==h&&h.X<d.Curr.X;)0<=t.OutIdx&&!o&&this.AddOutPt(t,new n.FPoint2(h.X,t.Bot.Y)),h=h.Next;else for(;null!==h&&h.X>d.Curr.X;)0<=t.OutIdx&&!o&&this.AddOutPt(t,new n.FPoint2(h.X,t.Bot.Y)),h=h.Prev;if(r===n.Direction.dLeftToRight&&d.Curr.X>i||r===n.Direction.dRightToLeft&&d.Curr.X<s)break;if(d.Curr.X===t.Top.X&&null!==t.NextInLML&&d.Dx<t.NextInLML.Dx)break;if(0<=t.OutIdx&&!o){for(n.use_xyz&&(r===n.Direction.dLeftToRight?this.SetZ(d.Curr,t,d):this.SetZ(d.Curr,d,t)),u=this.AddOutPt(t,d.Curr),e=this.m_SortedEdges;null!==e;){if(0<=e.OutIdx&&this.HorzSegmentsOverlap(t.Bot.X,t.Top.X,e.Bot.X,e.Top.X)){var f=this.GetLastOutPt(e);this.AddJoin(f,u,e.Top)}e=e.NextInSEL}this.AddGhostJoin(u,t.Bot)}if(d===l&&p)return 0<=t.OutIdx&&this.AddLocalMaxPoly(t,l,t.Top),this.DeleteFromAEL(t),void this.DeleteFromAEL(l);r===n.Direction.dLeftToRight?(f=new n.FPoint2(d.Curr.X,t.Curr.Y),this.IntersectEdges(t,d,f)):(f=new n.FPoint2(d.Curr.X,t.Curr.Y),this.IntersectEdges(d,t,f)),f=this.GetNextInAEL(d,r),this.SwapPositionsInAEL(t,d),d=f}if(null===t.NextInLML||!n.ClipperBase.IsHorizontal(t.NextInLML))break;0<=(t=this.UpdateEdgeIntoAEL(t)).OutIdx&&this.AddOutPt(t,t.Bot),i={Dir:r,Left:s,Right:i},this.GetHorzDirection(t,i),r=i.Dir,s=i.Left,i=i.Right}if(0<=t.OutIdx&&null===u){for(u=this.GetLastOutPt(t),e=this.m_SortedEdges;null!==e;)0<=e.OutIdx&&this.HorzSegmentsOverlap(t.Bot.X,t.Top.X,e.Bot.X,e.Top.X)&&(f=this.GetLastOutPt(e),this.AddJoin(f,u,e.Top)),e=e.NextInSEL;this.AddGhostJoin(u,t.Top)}null!==t.NextInLML?0<=t.OutIdx?(u=this.AddOutPt(t,t.Top),0!==(t=this.UpdateEdgeIntoAEL(t)).WindDelta&&(r=t.PrevInAEL,f=t.NextInAEL,null!==r&&r.Curr.X===t.Bot.X&&r.Curr.Y===t.Bot.Y&&0===r.WindDelta&&0<=r.OutIdx&&r.Curr.Y>r.Top.Y&&n.ClipperBase.SlopesEqual3(t,r)?(f=this.AddOutPt(r,t.Bot),this.AddJoin(u,f,t.Top)):null!==f&&f.Curr.X===t.Bot.X&&f.Curr.Y===t.Bot.Y&&0!==f.WindDelta&&0<=f.OutIdx&&f.Curr.Y>f.Top.Y&&n.ClipperBase.SlopesEqual3(t,f)&&(f=this.AddOutPt(f,t.Bot),this.AddJoin(u,f,t.Top)))):this.UpdateEdgeIntoAEL(t):(0<=t.OutIdx&&this.AddOutPt(t,t.Top),this.DeleteFromAEL(t))},n.Clipper.prototype.GetNextInAEL=function(t,e){return e===n.Direction.dLeftToRight?t.NextInAEL:t.PrevInAEL},n.Clipper.prototype.IsMinima=function(t){return null!==t&&t.Prev.NextInLML!==t&&t.Next.NextInLML!==t},n.Clipper.prototype.IsMaxima=function(t,e){return null!==t&&t.Top.Y===e&&null===t.NextInLML},n.Clipper.prototype.IsIntermediate=function(t,e){return t.Top.Y===e&&null!==t.NextInLML},n.Clipper.prototype.GetMaximaPair=function(t){return n.FPoint.op_Equality(t.Next.Top,t.Top)&&null===t.Next.NextInLML?t.Next:n.FPoint.op_Equality(t.Prev.Top,t.Top)&&null===t.Prev.NextInLML?t.Prev:null},n.Clipper.prototype.GetMaximaPairEx=function(t){return null===(t=this.GetMaximaPair(t))||t.OutIdx===n.ClipperBase.Skip||t.NextInAEL===t.PrevInAEL&&!n.ClipperBase.IsHorizontal(t)?null:t},n.Clipper.prototype.ProcessIntersections=function(t){if(null===this.m_ActiveEdges)return!0;try{if(this.BuildIntersectList(t),0===this.m_IntersectList.length)return!0;if(1!==this.m_IntersectList.length&&!this.FixupIntersectionOrder())return!1;this.ProcessIntersectList()}catch(t){this.m_SortedEdges=null,this.m_IntersectList.length=0,n.Error("ProcessIntersections error")}return this.m_SortedEdges=null,!0},n.Clipper.prototype.BuildIntersectList=function(t){if(null!==this.m_ActiveEdges){var e=this.m_ActiveEdges;for(this.m_SortedEdges=e;null!==e;)e.PrevInSEL=e.PrevInAEL,e.NextInSEL=e.NextInAEL,e.Curr.X=n.Clipper.TopX(e,t),e=e.NextInAEL;for(var i=!0;i&&null!==this.m_SortedEdges;){for(i=!1,e=this.m_SortedEdges;null!==e.NextInSEL;){var r=e.NextInSEL,s=new n.FPoint0;e.Curr.X>r.Curr.X?(this.IntersectPoint(e,r,s),s.Y<t&&(s=new n.FPoint2(n.Clipper.TopX(e,t),t)),(i=new n.IntersectNode).Edge1=e,i.Edge2=r,i.Pt.X=s.X,i.Pt.Y=s.Y,n.use_xyz&&(i.Pt.Z=s.Z),this.m_IntersectList.push(i),this.SwapPositionsInSEL(e,r),i=!0):e=r}if(null===e.PrevInSEL)break;e.PrevInSEL.NextInSEL=null}this.m_SortedEdges=null}},n.Clipper.prototype.EdgesAdjacent=function(t){return t.Edge1.NextInSEL===t.Edge2||t.Edge1.PrevInSEL===t.Edge2},n.Clipper.IntersectNodeSort=function(t,e){return e.Pt.Y-t.Pt.Y},n.Clipper.prototype.FixupIntersectionOrder=function(){this.m_IntersectList.sort(this.m_IntersectNodeComparer),this.CopyAELToSEL();for(var t=this.m_IntersectList.length,e=0;e<t;e++){if(!this.EdgesAdjacent(this.m_IntersectList[e])){for(var i=e+1;i<t&&!this.EdgesAdjacent(this.m_IntersectList[i]);)i++;if(i===t)return!1;var n=this.m_IntersectList[e];this.m_IntersectList[e]=this.m_IntersectList[i],this.m_IntersectList[i]=n}this.SwapPositionsInSEL(this.m_IntersectList[e].Edge1,this.m_IntersectList[e].Edge2)}return!0},n.Clipper.prototype.ProcessIntersectList=function(){for(var t=0,e=this.m_IntersectList.length;t<e;t++){var i=this.m_IntersectList[t];this.IntersectEdges(i.Edge1,i.Edge2,i.Pt),this.SwapPositionsInAEL(i.Edge1,i.Edge2)}this.m_IntersectList.length=0},n.Clipper.TopX=function(t,e){return e===t.Top.Y?t.Top.X:t.Bot.X+t.Dx*(e-t.Bot.Y)},n.Clipper.prototype.IntersectPoint=function(t,e,i){if(i.X=0,i.Y=0,t.Dx===e.Dx)i.Y=t.Curr.Y,i.X=n.Clipper.TopX(t,i.Y);else{if(0===t.Delta.X)if(i.X=t.Bot.X,n.ClipperBase.IsHorizontal(e))i.Y=e.Bot.Y;else{var r=e.Bot.Y-e.Bot.X/e.Dx;i.Y=i.X/e.Dx+r}else if(0===e.Delta.X)if(i.X=e.Bot.X,n.ClipperBase.IsHorizontal(t))i.Y=t.Bot.Y;else{var s=t.Bot.Y-t.Bot.X/t.Dx;i.Y=i.X/t.Dx+s}else{s=t.Bot.X-t.Bot.Y*t.Dx;var o=((r=e.Bot.X-e.Bot.Y*e.Dx)-s)/(t.Dx-e.Dx);i.Y=o,i.X=Math.abs(t.Dx)<Math.abs(e.Dx)?t.Dx*o+s:e.Dx*o+r}if(i.Y<t.Top.Y||i.Y<e.Top.Y){if(t.Top.Y>e.Top.Y)return i.Y=t.Top.Y,i.X=n.Clipper.TopX(e,t.Top.Y),i.X<t.Top.X;i.Y=e.Top.Y,i.X=Math.abs(t.Dx)<Math.abs(e.Dx)?n.Clipper.TopX(t,i.Y):n.Clipper.TopX(e,i.Y)}i.Y>t.Curr.Y&&(i.Y=t.Curr.Y,i.X=Math.abs(t.Dx)>Math.abs(e.Dx)?n.Clipper.TopX(e,i.Y):n.Clipper.TopX(t,i.Y))}},n.Clipper.prototype.ProcessEdgesAtTopOfScanbeam=function(t){for(var e,i,r=this.m_ActiveEdges;null!==r;)if((i=this.IsMaxima(r,t))&&(i=null===(i=this.GetMaximaPairEx(r))||!n.ClipperBase.IsHorizontal(i)),i)this.StrictlySimple&&this.InsertMaxima(r.Top.X),e=r.PrevInAEL,this.DoMaxima(r),r=null===e?this.m_ActiveEdges:e.NextInAEL;else{if(this.IsIntermediate(r,t)&&n.ClipperBase.IsHorizontal(r.NextInLML)?(0<=(r=this.UpdateEdgeIntoAEL(r)).OutIdx&&this.AddOutPt(r,r.Bot),this.AddEdgeToSEL(r)):(r.Curr.X=n.Clipper.TopX(r,t),r.Curr.Y=t),n.use_xyz&&(r.Curr.Z=r.Top.Y===t?r.Top.Z:r.Bot.Y===t?r.Bot.Z:0),this.StrictlySimple&&(e=r.PrevInAEL,0<=r.OutIdx&&0!==r.WindDelta&&null!==e&&0<=e.OutIdx&&e.Curr.X===r.Curr.X&&0!==e.WindDelta)){var s=new n.FPoint1(r.Curr);n.use_xyz&&this.SetZ(s,e,r),i=this.AddOutPt(e,s),e=this.AddOutPt(r,s),this.AddJoin(i,e,s)}r=r.NextInAEL}for(this.ProcessHorizontals(),this.m_Maxima=null,r=this.m_ActiveEdges;null!==r;)this.IsIntermediate(r,t)&&(i=null,0<=r.OutIdx&&(i=this.AddOutPt(r,r.Top)),e=(r=this.UpdateEdgeIntoAEL(r)).PrevInAEL,s=r.NextInAEL,null!==e&&e.Curr.X===r.Bot.X&&e.Curr.Y===r.Bot.Y&&null!==i&&0<=e.OutIdx&&e.Curr.Y===e.Top.Y&&n.ClipperBase.SlopesEqual5(r.Curr,r.Top,e.Curr,e.Top)&&0!==r.WindDelta&&0!==e.WindDelta?(e=this.AddOutPt(ePrev2,r.Bot),this.AddJoin(i,e,r.Top)):null!==s&&s.Curr.X===r.Bot.X&&s.Curr.Y===r.Bot.Y&&null!==i&&0<=s.OutIdx&&s.Curr.Y===s.Top.Y&&n.ClipperBase.SlopesEqual5(r.Curr,r.Top,s.Curr,s.Top)&&0!==r.WindDelta&&0!==s.WindDelta&&(e=this.AddOutPt(s,r.Bot),this.AddJoin(i,e,r.Top))),r=r.NextInAEL},n.Clipper.prototype.DoMaxima=function(t){var e=this.GetMaximaPairEx(t);if(null===e)0<=t.OutIdx&&this.AddOutPt(t,t.Top),this.DeleteFromAEL(t);else{for(var i=t.NextInAEL;null!==i&&i!==e;)this.IntersectEdges(t,i,t.Top),this.SwapPositionsInAEL(t,i),i=t.NextInAEL;-1===t.OutIdx&&-1===e.OutIdx?(this.DeleteFromAEL(t),this.DeleteFromAEL(e)):0<=t.OutIdx&&0<=e.OutIdx?(0<=t.OutIdx&&this.AddLocalMaxPoly(t,e,t.Top),this.DeleteFromAEL(t),this.DeleteFromAEL(e)):n.use_lines&&0===t.WindDelta?(0<=t.OutIdx&&(this.AddOutPt(t,t.Top),t.OutIdx=n.ClipperBase.Unassigned),this.DeleteFromAEL(t),0<=e.OutIdx&&(this.AddOutPt(e,t.Top),e.OutIdx=n.ClipperBase.Unassigned),this.DeleteFromAEL(e)):n.Error("DoMaxima error")}},n.Clipper.ReversePaths=function(t){for(var e=0,i=t.length;e<i;e++)t[e].reverse()},n.Clipper.Orientation=function(t){return 0<=n.Clipper.Area(t)},n.Clipper.prototype.PointCount=function(t){if(null===t)return 0;var e=0,i=t;do{e++,i=i.Next}while(i!==t);return e},n.Clipper.prototype.BuildResult=function(t){n.Clear(t);for(var e=0,i=this.m_PolyOuts.length;e<i;e++){var r=this.m_PolyOuts[e];if(null!==r.Pts){r=r.Pts.Prev;var s=this.PointCount(r);if(!(2>s)){for(var o=Array(s),a=0;a<s;a++)o[a]=r.Pt,r=r.Prev;t.push(o)}}}},n.Clipper.prototype.BuildResult2=function(t){t.Clear();for(var e=0,i=this.m_PolyOuts.length;e<i;e++){var r=this.m_PolyOuts[e],s=this.PointCount(r.Pts);if(!(r.IsOpen&&2>s||!r.IsOpen&&3>s)){this.FixHoleLinkage(r);var o=new n.PolyNode;t.m_AllPolys.push(o),r.PolyNode=o,o.m_polygon.length=s,r=r.Pts.Prev;for(var a=0;a<s;a++)o.m_polygon[a]=r.Pt,r=r.Prev}}for(e=0,i=this.m_PolyOuts.length;e<i;e++)null!==(r=this.m_PolyOuts[e]).PolyNode&&(r.IsOpen?(r.PolyNode.IsOpen=!0,t.AddChild(r.PolyNode)):null!==r.FirstLeft&&null!==r.FirstLeft.PolyNode?r.FirstLeft.PolyNode.AddChild(r.PolyNode):t.AddChild(r.PolyNode))},n.Clipper.prototype.FixupOutPolyline=function(t){for(var e=t.Pts,i=e.Prev;e!==i;)if(e=e.Next,n.FPoint.op_Equality(e.Pt,e.Prev.Pt)){e===i&&(i=e.Prev);var r=e.Prev;r.Next=e.Next,e=e.Next.Prev=r}e===e.Prev&&(t.Pts=null)},n.Clipper.prototype.FixupOutPolygon=function(t){var e=null;t.BottomPt=null;for(var i=t.Pts,r=this.PreserveCollinear||this.StrictlySimple;;){if(i.Prev===i||i.Prev===i.Next)return void(t.Pts=null);if(n.FPoint.op_Equality(i.Pt,i.Next.Pt)||n.FPoint.op_Equality(i.Pt,i.Prev.Pt)||n.ClipperBase.SlopesEqual4(i.Prev.Pt,i.Pt,i.Next.Pt)&&(!r||!this.Pt2IsBetweenPt1AndPt3(i.Prev.Pt,i.Pt,i.Next.Pt)))e=null,i.Prev.Next=i.Next,i=i.Next.Prev=i.Prev;else{if(i===e)break;null===e&&(e=i),i=i.Next}}t.Pts=i},n.Clipper.prototype.DupOutPt=function(t,e){var i=new n.OutPt;return i.Pt.X=t.Pt.X,i.Pt.Y=t.Pt.Y,n.use_xyz&&(i.Pt.Z=t.Pt.Z),i.Idx=t.Idx,e?(i.Next=t.Next,i.Prev=t,t.Next.Prev=i,t.Next=i):(i.Prev=t.Prev,i.Next=t,t.Prev.Next=i,t.Prev=i),i},n.Clipper.prototype.GetOverlap=function(t,e,i,n,r){return t<e?i<n?(r.Left=Math.max(t,i),r.Right=Math.min(e,n)):(r.Left=Math.max(t,n),r.Right=Math.min(e,i)):i<n?(r.Left=Math.max(e,i),r.Right=Math.min(t,n)):(r.Left=Math.max(e,n),r.Right=Math.min(t,i)),r.Left<r.Right},n.Clipper.prototype.JoinHorz=function(t,e,i,r,s,o){var a=t.Pt.X>e.Pt.X?n.Direction.dRightToLeft:n.Direction.dLeftToRight;if(a===(r=i.Pt.X>r.Pt.X?n.Direction.dRightToLeft:n.Direction.dLeftToRight))return!1;if(a===n.Direction.dLeftToRight){for(;t.Next.Pt.X<=s.X&&t.Next.Pt.X>=t.Pt.X&&t.Next.Pt.Y===s.Y;)t=t.Next;o&&t.Pt.X!==s.X&&(t=t.Next),e=this.DupOutPt(t,!o),n.FPoint.op_Inequality(e.Pt,s)&&((t=e).Pt.X=s.X,t.Pt.Y=s.Y,n.use_xyz&&(t.Pt.Z=s.Z),e=this.DupOutPt(t,!o))}else{for(;t.Next.Pt.X>=s.X&&t.Next.Pt.X<=t.Pt.X&&t.Next.Pt.Y===s.Y;)t=t.Next;o||t.Pt.X===s.X||(t=t.Next),e=this.DupOutPt(t,o),n.FPoint.op_Inequality(e.Pt,s)&&((t=e).Pt.X=s.X,t.Pt.Y=s.Y,n.use_xyz&&(t.Pt.Z=s.Z),e=this.DupOutPt(t,o))}if(r===n.Direction.dLeftToRight){for(;i.Next.Pt.X<=s.X&&i.Next.Pt.X>=i.Pt.X&&i.Next.Pt.Y===s.Y;)i=i.Next;o&&i.Pt.X!==s.X&&(i=i.Next),r=this.DupOutPt(i,!o),n.FPoint.op_Inequality(r.Pt,s)&&((i=r).Pt.X=s.X,i.Pt.Y=s.Y,n.use_xyz&&(i.Pt.Z=s.Z),r=this.DupOutPt(i,!o))}else{for(;i.Next.Pt.X>=s.X&&i.Next.Pt.X<=i.Pt.X&&i.Next.Pt.Y===s.Y;)i=i.Next;o||i.Pt.X===s.X||(i=i.Next),r=this.DupOutPt(i,o),n.FPoint.op_Inequality(r.Pt,s)&&((i=r).Pt.X=s.X,i.Pt.Y=s.Y,n.use_xyz&&(i.Pt.Z=s.Z),r=this.DupOutPt(i,o))}return a===n.Direction.dLeftToRight===o?(t.Prev=i,i.Next=t,e.Next=r,r.Prev=e):(t.Next=i,i.Prev=t,e.Prev=r,r.Next=e),!0},n.Clipper.prototype.JoinPoints=function(t,e,i){var r,s=t.OutPt1;new n.OutPt;var o,a=t.OutPt2;if(new n.OutPt,(o=t.OutPt1.Pt.Y===t.OffPt.Y)&&n.FPoint.op_Equality(t.OffPt,t.OutPt1.Pt)&&n.FPoint.op_Equality(t.OffPt,t.OutPt2.Pt)){if(e!==i)return!1;for(r=t.OutPt1.Next;r!==s&&n.FPoint.op_Equality(r.Pt,t.OffPt);)r=r.Next;for(r=r.Pt.Y>t.OffPt.Y,o=t.OutPt2.Next;o!==a&&n.FPoint.op_Equality(o.Pt,t.OffPt);)o=o.Next;return r!==o.Pt.Y>t.OffPt.Y&&(r?(r=this.DupOutPt(s,!1),o=this.DupOutPt(a,!0),s.Prev=a,a.Next=s,r.Next=o,o.Prev=r):(r=this.DupOutPt(s,!0),o=this.DupOutPt(a,!1),s.Next=a,a.Prev=s,r.Prev=o,o.Next=r),t.OutPt1=s,t.OutPt2=r,!0)}if(o){for(r=s;s.Prev.Pt.Y===s.Pt.Y&&s.Prev!==r&&s.Prev!==a;)s=s.Prev;for(;r.Next.Pt.Y===r.Pt.Y&&r.Next!==s&&r.Next!==a;)r=r.Next;if(r.Next===s||r.Next===a)return!1;for(o=a;a.Prev.Pt.Y===a.Pt.Y&&a.Prev!==o&&a.Prev!==r;)a=a.Prev;for(;o.Next.Pt.Y===o.Pt.Y&&o.Next!==a&&o.Next!==s;)o=o.Next;if(o.Next===a||o.Next===s)return!1;if(i={Left:null,Right:null},!this.GetOverlap(s.Pt.X,r.Pt.X,a.Pt.X,o.Pt.X,i))return!1;e=i.Left;var l=i.Right;return i=new n.FPoint0,s.Pt.X>=e&&s.Pt.X<=l?(i.X=s.Pt.X,i.Y=s.Pt.Y,n.use_xyz&&(i.Z=s.Pt.Z),e=s.Pt.X>r.Pt.X):a.Pt.X>=e&&a.Pt.X<=l?(i.X=a.Pt.X,i.Y=a.Pt.Y,n.use_xyz&&(i.Z=a.Pt.Z),e=a.Pt.X>o.Pt.X):r.Pt.X>=e&&r.Pt.X<=l?(i.X=r.Pt.X,i.Y=r.Pt.Y,n.use_xyz&&(i.Z=r.Pt.Z),e=r.Pt.X>s.Pt.X):(i.X=o.Pt.X,i.Y=o.Pt.Y,n.use_xyz&&(i.Z=o.Pt.Z),e=o.Pt.X>a.Pt.X),t.OutPt1=s,t.OutPt2=a,this.JoinHorz(s,r,a,o,i,e)}for(r=s.Next;n.FPoint.op_Equality(r.Pt,s.Pt)&&r!==s;)r=r.Next;if(l=r.Pt.Y>s.Pt.Y||!n.ClipperBase.SlopesEqual4(s.Pt,r.Pt,t.OffPt)){for(r=s.Prev;n.FPoint.op_Equality(r.Pt,s.Pt)&&r!==s;)r=r.Prev;if(r.Pt.Y>s.Pt.Y||!n.ClipperBase.SlopesEqual4(s.Pt,r.Pt,t.OffPt))return!1}for(o=a.Next;n.FPoint.op_Equality(o.Pt,a.Pt)&&o!==a;)o=o.Next;var h=o.Pt.Y>a.Pt.Y||!n.ClipperBase.SlopesEqual4(a.Pt,o.Pt,t.OffPt);if(h){for(o=a.Prev;n.FPoint.op_Equality(o.Pt,a.Pt)&&o!==a;)o=o.Prev;if(o.Pt.Y>a.Pt.Y||!n.ClipperBase.SlopesEqual4(a.Pt,o.Pt,t.OffPt))return!1}return r!==s&&o!==a&&r!==o&&(e!==i||l!==h)&&(l?(r=this.DupOutPt(s,!1),o=this.DupOutPt(a,!0),s.Prev=a,a.Next=s,r.Next=o,o.Prev=r):(r=this.DupOutPt(s,!0),o=this.DupOutPt(a,!1),s.Next=a,a.Prev=s,r.Prev=o,o.Next=r),t.OutPt1=s,t.OutPt2=r,!0)},n.Clipper.GetBounds=function(t){for(var e=0,i=t.length;e<i&&0===t[e].length;)e++;if(e===i)return new n.FRect(0,0,0,0);var r=new n.FRect;for(r.left=t[e][0].X,r.right=r.left,r.top=t[e][0].Y,r.bottom=r.top;e<i;e++)for(var s=0,o=t[e].length;s<o;s++)t[e][s].X<r.left?r.left=t[e][s].X:t[e][s].X>r.right&&(r.right=t[e][s].X),t[e][s].Y<r.top?r.top=t[e][s].Y:t[e][s].Y>r.bottom&&(r.bottom=t[e][s].Y);return r},n.Clipper.prototype.GetBounds2=function(t){var e=t,i=new n.FRect;for(i.left=t.Pt.X,i.right=t.Pt.X,i.top=t.Pt.Y,i.bottom=t.Pt.Y,t=t.Next;t!==e;)t.Pt.X<i.left&&(i.left=t.Pt.X),t.Pt.X>i.right&&(i.right=t.Pt.X),t.Pt.Y<i.top&&(i.top=t.Pt.Y),t.Pt.Y>i.bottom&&(i.bottom=t.Pt.Y),t=t.Next;return i},n.Clipper.PointInPolygon=function(t,e){var i=0,n=e.length;if(3>n)return 0;for(var r=e[0],s=1;s<=n;++s){var o=s===n?e[0]:e[s];if(o.Y===t.Y&&(o.X===t.X||r.Y===t.Y&&o.X>t.X==r.X<t.X))return-1;if(r.Y<t.Y!=o.Y<t.Y)if(r.X>=t.X)if(o.X>t.X)i=1-i;else{var a=(r.X-t.X)*(o.Y-t.Y)-(o.X-t.X)*(r.Y-t.Y);if(0===a)return-1;0<a==o.Y>r.Y&&(i=1-i)}else if(o.X>t.X){if(0==(a=(r.X-t.X)*(o.Y-t.Y)-(o.X-t.X)*(r.Y-t.Y)))return-1;0<a==o.Y>r.Y&&(i=1-i)}r=o}return i},n.Clipper.prototype.PointInPolygon=function(t,e){var i=0,n=e,r=t.X,s=t.Y,o=e.Pt.X,a=e.Pt.Y;do{var l=(e=e.Next).Pt.X,h=e.Pt.Y;if(h===s&&(l===r||a===s&&l>r==o<r))return-1;if(a<s!=h<s)if(o>=r)if(l>r)i=1-i;else{if(0==(o=(o-r)*(h-s)-(l-r)*(a-s)))return-1;0<o==h>a&&(i=1-i)}else if(l>r){if(0==(o=(o-r)*(h-s)-(l-r)*(a-s)))return-1;0<o==h>a&&(i=1-i)}o=l,a=h}while(n!==e);return i},n.Clipper.prototype.Poly2ContainsPoly1=function(t,e){var i=t;do{var n=this.PointInPolygon(i.Pt,e);if(0<=n)return 0<n;i=i.Next}while(i!==t);return!0},n.Clipper.prototype.FixupFirstLefts1=function(t,e){for(var i,r,s=0,o=this.m_PolyOuts.length;s<o;s++)i=this.m_PolyOuts[s],r=n.Clipper.ParseFirstLeft(i.FirstLeft),null!==i.Pts&&r===t&&this.Poly2ContainsPoly1(i.Pts,e.Pts)&&(i.FirstLeft=e)},n.Clipper.prototype.FixupFirstLefts2=function(t,e){for(var i,r,s=e.FirstLeft,o=0,a=this.m_PolyOuts.length;o<a;o++)null!==(i=this.m_PolyOuts[o]).Pts&&i!==e&&i!==t&&((r=n.Clipper.ParseFirstLeft(i.FirstLeft))===s||r===t||r===e)&&(this.Poly2ContainsPoly1(i.Pts,t.Pts)?i.FirstLeft=t:this.Poly2ContainsPoly1(i.Pts,e.Pts)?i.FirstLeft=e:i.FirstLeft!==t&&i.FirstLeft!==e||(i.FirstLeft=s))},n.Clipper.prototype.FixupFirstLefts3=function(t,e){for(var i,r,s=0,o=this.m_PolyOuts.length;s<o;s++)i=this.m_PolyOuts[s],r=n.Clipper.ParseFirstLeft(i.FirstLeft),null!==i.Pts&&r===t&&(i.FirstLeft=e)},n.Clipper.ParseFirstLeft=function(t){for(;null!==t&&null===t.Pts;)t=t.FirstLeft;return t},n.Clipper.prototype.JoinCommonEdges=function(){for(var t=0,e=this.m_Joins.length;t<e;t++){var i=this.m_Joins[t],n=this.GetOutRec(i.OutPt1.Idx),r=this.GetOutRec(i.OutPt2.Idx);if(null!==n.Pts&&null!==r.Pts&&!n.IsOpen&&!r.IsOpen){var s=n===r?n:this.OutRec1RightOfOutRec2(n,r)?r:this.OutRec1RightOfOutRec2(r,n)?n:this.GetLowermostRec(n,r);this.JoinPoints(i,n,r)&&(n===r?(n.Pts=i.OutPt1,n.BottomPt=null,(r=this.CreateOutRec()).Pts=i.OutPt2,this.UpdateOutPtIdxs(r),this.Poly2ContainsPoly1(r.Pts,n.Pts)?(r.IsHole=!n.IsHole,r.FirstLeft=n,this.m_UsingPolyTree&&this.FixupFirstLefts2(r,n),(r.IsHole^this.ReverseSolution)==0<this.Area$1(r)&&this.ReversePolyPtLinks(r.Pts)):this.Poly2ContainsPoly1(n.Pts,r.Pts)?(r.IsHole=n.IsHole,n.IsHole=!r.IsHole,r.FirstLeft=n.FirstLeft,n.FirstLeft=r,this.m_UsingPolyTree&&this.FixupFirstLefts2(n,r),(n.IsHole^this.ReverseSolution)==0<this.Area$1(n)&&this.ReversePolyPtLinks(n.Pts)):(r.IsHole=n.IsHole,r.FirstLeft=n.FirstLeft,this.m_UsingPolyTree&&this.FixupFirstLefts1(n,r))):(r.Pts=null,r.BottomPt=null,r.Idx=n.Idx,n.IsHole=s.IsHole,s===r&&(n.FirstLeft=r.FirstLeft),r.FirstLeft=n,this.m_UsingPolyTree&&this.FixupFirstLefts3(r,n)))}}},n.Clipper.prototype.UpdateOutPtIdxs=function(t){var e=t.Pts;do{e.Idx=t.Idx,e=e.Prev}while(e!==t.Pts)},n.Clipper.prototype.DoSimplePolygons=function(){for(var t=0;t<this.m_PolyOuts.length;){var e=this.m_PolyOuts[t++],i=e.Pts;if(null!==i&&!e.IsOpen)do{for(var r=i.Next;r!==e.Pts;){if(n.FPoint.op_Equality(i.Pt,r.Pt)&&r.Next!==i&&r.Prev!==i){var s=i.Prev,o=r.Prev;i.Prev=o,o.Next=i,r.Prev=s,s.Next=r,e.Pts=i,(s=this.CreateOutRec()).Pts=r,this.UpdateOutPtIdxs(s),this.Poly2ContainsPoly1(s.Pts,e.Pts)?(s.IsHole=!e.IsHole,s.FirstLeft=e,this.m_UsingPolyTree&&this.FixupFirstLefts2(s,e)):this.Poly2ContainsPoly1(e.Pts,s.Pts)?(s.IsHole=e.IsHole,e.IsHole=!s.IsHole,s.FirstLeft=e.FirstLeft,e.FirstLeft=s,this.m_UsingPolyTree&&this.FixupFirstLefts2(e,s)):(s.IsHole=e.IsHole,s.FirstLeft=e.FirstLeft,this.m_UsingPolyTree&&this.FixupFirstLefts1(e,s)),r=i}r=r.Next}i=i.Next}while(i!==e.Pts)}},n.Clipper.Area=function(t){if(!Array.isArray(t))return 0;var e=t.length;if(3>e)return 0;for(var i=0,n=0,r=e-1;n<e;++n)i+=(t[r].X+t[n].X)*(t[r].Y-t[n].Y),r=n;return.5*-i},n.Clipper.prototype.Area=function(t){var e=t;if(null===t)return 0;var i=0;do{i+=(t.Prev.Pt.X+t.Pt.X)*(t.Prev.Pt.Y-t.Pt.Y),t=t.Next}while(t!==e);return.5*i},n.Clipper.prototype.Area$1=function(t){return this.Area(t.Pts)},n.Clipper.SimplifyPolygon=function(t,e){var i=[],r=new n.Clipper(0);return r.StrictlySimple=!0,r.AddPath(t,n.PolyType.ptSubject,!0),r.Execute(n.ClipType.ctUnion,i,e,e),i},n.Clipper.SimplifyPolygons=function(t,e){void 0===e&&(e=n.PolyFillType.pftEvenOdd);var i=[],r=new n.Clipper(0);return r.StrictlySimple=!0,r.AddPaths(t,n.PolyType.ptSubject,!0),r.Execute(n.ClipType.ctUnion,i,e,e),i},n.Clipper.DistanceSqrd=function(t,e){var i=t.X-e.X,n=t.Y-e.Y;return i*i+n*n},n.Clipper.DistanceFromLineSqrd=function(t,e,i){var n=e.Y-i.Y;return i=i.X-e.X,e=n*e.X+i*e.Y,(e=n*t.X+i*t.Y-e)*e/(n*n+i*i)},n.Clipper.SlopesNearCollinear=function(t,e,i,r){return Math.abs(t.X-e.X)>Math.abs(t.Y-e.Y)?t.X>e.X==t.X<i.X?n.Clipper.DistanceFromLineSqrd(t,e,i)<r:e.X>t.X==e.X<i.X?n.Clipper.DistanceFromLineSqrd(e,t,i)<r:n.Clipper.DistanceFromLineSqrd(i,t,e)<r:t.Y>e.Y==t.Y<i.Y?n.Clipper.DistanceFromLineSqrd(t,e,i)<r:e.Y>t.Y==e.Y<i.Y?n.Clipper.DistanceFromLineSqrd(e,t,i)<r:n.Clipper.DistanceFromLineSqrd(i,t,e)<r},n.Clipper.PointsAreClose=function(t,e,i){var n=t.X-e.X;return n*n+(t=t.Y-e.Y)*t<=i},n.Clipper.ExcludeOp=function(t){var e=t.Prev;return e.Next=t.Next,t.Next.Prev=e,e.Idx=0,e},n.Clipper.CleanPolygon=function(t,e){void 0===e&&(e=1.415);var i=t.length;if(0===i)return[];for(var r=Array(i),s=0;s<i;++s)r[s]=new n.OutPt;for(s=0;s<i;++s)r[s].Pt=t[s],r[s].Next=r[(s+1)%i],r[s].Next.Prev=r[s],r[s].Idx=0;for(s=e*e,r=r[0];0===r.Idx&&r.Next!==r.Prev;)n.Clipper.PointsAreClose(r.Pt,r.Prev.Pt,s)?(r=n.Clipper.ExcludeOp(r),i--):n.Clipper.PointsAreClose(r.Prev.Pt,r.Next.Pt,s)?(n.Clipper.ExcludeOp(r.Next),r=n.Clipper.ExcludeOp(r),i-=2):n.Clipper.SlopesNearCollinear(r.Prev.Pt,r.Pt,r.Next.Pt,s)?(r=n.Clipper.ExcludeOp(r),i--):(r.Idx=1,r=r.Next);3>i&&(i=0);var o=Array(i);for(s=0;s<i;++s)o[s]=new n.FPoint1(r.Pt),r=r.Next;return o},n.Clipper.CleanPolygons=function(t,e){for(var i=Array(t.length),r=0,s=t.length;r<s;r++)i[r]=n.Clipper.CleanPolygon(t[r],e);return i},n.Clipper.Minkowski=function(t,e,i,r){r=r?1:0;var s=t.length,o=e.length,a=[];if(i)for(i=0;i<o;i++){for(var l=Array(s),h=0,u=t.length,p=t[h];h<u;p=t[++h])l[h]=new n.FPoint2(e[i].X+p.X,e[i].Y+p.Y);a.push(l)}else for(i=0;i<o;i++){for(l=Array(s),h=0,u=t.length,p=t[h];h<u;p=t[++h])l[h]=new n.FPoint2(e[i].X-p.X,e[i].Y-p.Y);a.push(l)}for(t=[],i=0;i<o-1+r;i++)for(h=0;h<s;h++)(e=[]).push(a[i%o][h%s]),e.push(a[(i+1)%o][h%s]),e.push(a[(i+1)%o][(h+1)%s]),e.push(a[i%o][(h+1)%s]),n.Clipper.Orientation(e)||e.reverse(),t.push(e);return t},n.Clipper.MinkowskiSum=function(t,e,i){if(e[0]instanceof Array){var r=e,s=new n.Paths;e=new n.Clipper;for(var o=0;o<r.length;++o){var a=n.Clipper.Minkowski(t,r[o],!0,i);e.AddPaths(a,n.PolyType.ptSubject,!0),i&&(a=n.Clipper.TranslatePath(r[o],t[0]),e.AddPath(a,n.PolyType.ptClip,!0))}return e.Execute(n.ClipType.ctUnion,s,n.PolyFillType.pftNonZero,n.PolyFillType.pftNonZero),s}return r=n.Clipper.Minkowski(t,e,!0,i),(e=new n.Clipper).AddPaths(r,n.PolyType.ptSubject,!0),e.Execute(n.ClipType.ctUnion,r,n.PolyFillType.pftNonZero,n.PolyFillType.pftNonZero),r},n.Clipper.TranslatePath=function(t,e){for(var i=new n.Path,r=0;r<t.length;r++)i.push(new n.FPoint2(t[r].X+e.X,t[r].Y+e.Y));return i},n.Clipper.MinkowskiDiff=function(t,e){var i=n.Clipper.Minkowski(t,e,!1,!0),r=new n.Clipper;return r.AddPaths(i,n.PolyType.ptSubject,!0),r.Execute(n.ClipType.ctUnion,i,n.PolyFillType.pftNonZero,n.PolyFillType.pftNonZero),i},n.Clipper.PolyTreeToPaths=function(t){var e=[];return n.Clipper.AddPolyNodeToPaths(t,n.Clipper.NodeType.ntAny,e),e},n.Clipper.AddPolyNodeToPaths=function(t,e,i){var r=!0;switch(e){case n.Clipper.NodeType.ntOpen:return;case n.Clipper.NodeType.ntClosed:r=!t.IsOpen}0<t.m_polygon.length&&r&&i.push(t.m_polygon),r=0;for(var s=(t=t.Childs()).length,o=t[r];r<s;o=t[++r])n.Clipper.AddPolyNodeToPaths(o,e,i)},n.Clipper.OpenPathsFromPolyTree=function(t){for(var e=new n.Paths,i=0,r=t.ChildCount();i<r;i++)t.Childs()[i].IsOpen&&e.push(t.Childs()[i].m_polygon);return e},n.Clipper.ClosedPathsFromPolyTree=function(t){var e=new n.Paths;return n.Clipper.AddPolyNodeToPaths(t,n.Clipper.NodeType.ntClosed,e),e},r(n.Clipper,n.ClipperBase),n.Clipper.NodeType={ntAny:0,ntOpen:1,ntClosed:2},n.ClipperOffset=function(t,e){void 0===t&&(t=2),void 0===e&&(e=n.ClipperOffset.def_arc_tolerance),this.m_destPolys=new n.Paths,this.m_srcPoly=new n.Path,this.m_destPoly=new n.Path,this.m_normals=[],this.m_StepsPerRad=this.m_miterLim=this.m_cos=this.m_sin=this.m_sinA=this.m_delta=0,this.m_lowest=new n.FPoint0,this.m_polyNodes=new n.PolyNode,this.MiterLimit=t,this.ArcTolerance=e,this.m_lowest.X=-1},n.ClipperOffset.two_pi=6.28318530717959,n.ClipperOffset.def_arc_tolerance=.25,n.ClipperOffset.prototype.Clear=function(){n.Clear(this.m_polyNodes.Childs()),this.m_lowest.X=-1},n.ClipperOffset.prototype.AddPath=function(t,e,i){var r=t.length-1;if(!(0>r)){var s=new n.PolyNode;if(s.m_jointype=e,s.m_endtype=i,i===n.EndType.etClosedLine||i===n.EndType.etClosedPolygon)for(;0<r&&n.FPoint.op_Equality(t[0],t[r]);)r--;s.m_polygon.push(t[0]);var o=0;e=0;for(var a=1;a<=r;a++)n.FPoint.op_Inequality(s.m_polygon[o],t[a])&&(o++,s.m_polygon.push(t[a]),t[a].Y>s.m_polygon[e].Y||t[a].Y===s.m_polygon[e].Y&&t[a].X<s.m_polygon[e].X)&&(e=o);i===n.EndType.etClosedPolygon&&2>o||(this.m_polyNodes.AddChild(s),i!==n.EndType.etClosedPolygon)||(0>this.m_lowest.X?this.m_lowest=new n.FPoint2(this.m_polyNodes.ChildCount()-1,e):(t=this.m_polyNodes.Childs()[this.m_lowest.X].m_polygon[this.m_lowest.Y],(s.m_polygon[e].Y>t.Y||s.m_polygon[e].Y===t.Y&&s.m_polygon[e].X<t.X)&&(this.m_lowest=new n.FPoint2(this.m_polyNodes.ChildCount()-1,e))))}},n.ClipperOffset.prototype.AddPaths=function(t,e,i){for(var n=0,r=t.length;n<r;n++)this.AddPath(t[n],e,i)},n.ClipperOffset.prototype.FixOrientations=function(){if(0<=this.m_lowest.X&&!n.Clipper.Orientation(this.m_polyNodes.Childs()[this.m_lowest.X].m_polygon))for(var t=0;t<this.m_polyNodes.ChildCount();t++){var e=this.m_polyNodes.Childs()[t];(e.m_endtype===n.EndType.etClosedPolygon||e.m_endtype===n.EndType.etClosedLine&&n.Clipper.Orientation(e.m_polygon))&&e.m_polygon.reverse()}else for(t=0;t<this.m_polyNodes.ChildCount();t++)(e=this.m_polyNodes.Childs()[t]).m_endtype!==n.EndType.etClosedLine||n.Clipper.Orientation(e.m_polygon)||e.m_polygon.reverse()},n.ClipperOffset.GetUnitNormal=function(t,e){var i=e.X-t.X,r=e.Y-t.Y;if(0===i&&0===r)return new n.FPoint2(0,0);var s=1/Math.sqrt(i*i+r*r);return new n.FPoint2(r*s,-i*s)},n.ClipperOffset.prototype.DoOffset=function(t){var e;if(this.m_destPolys=[],this.m_delta=t,n.ClipperBase.near_zero(t))for(var i=0;i<this.m_polyNodes.ChildCount();i++){var r=this.m_polyNodes.Childs()[i];r.m_endtype===n.EndType.etClosedPolygon&&this.m_destPolys.push(r.m_polygon)}else{this.m_miterLim=2<this.MiterLimit?2/(this.MiterLimit*this.MiterLimit):.5;var s=3.14159265358979/Math.acos(1-(0>=this.ArcTolerance?n.ClipperOffset.def_arc_tolerance:this.ArcTolerance>Math.abs(t)*n.ClipperOffset.def_arc_tolerance?Math.abs(t)*n.ClipperOffset.def_arc_tolerance:this.ArcTolerance)/Math.abs(t));for(this.m_sin=Math.sin(n.ClipperOffset.two_pi/s),this.m_cos=Math.cos(n.ClipperOffset.two_pi/s),this.m_StepsPerRad=s/n.ClipperOffset.two_pi,0>t&&(this.m_sin=-this.m_sin),i=0;i<this.m_polyNodes.ChildCount();i++){r=this.m_polyNodes.Childs()[i],this.m_srcPoly=r.m_polygon;var o=this.m_srcPoly.length;if(!(0===o||0>=t&&(3>o||r.m_endtype!==n.EndType.etClosedPolygon))){if(this.m_destPoly=[],1===o)if(r.m_jointype===n.JoinType.jtRound)for(o=1,r=0,e=1;e<=s;e++){this.m_destPoly.push(new n.FPoint2(this.m_srcPoly[0].X+o*t,this.m_srcPoly[0].Y+r*t));var a=o;o=o*this.m_cos-this.m_sin*r,r=a*this.m_sin+r*this.m_cos}else for(r=o=-1,e=0;4>e;++e)this.m_destPoly.push(new n.FPoint2(this.m_srcPoly[0].X+o*t,this.m_srcPoly[0].Y+r*t)),0>o?o=1:0>r?r=1:o=-1;else{for(e=this.m_normals.length=0;e<o-1;e++)this.m_normals.push(n.ClipperOffset.GetUnitNormal(this.m_srcPoly[e],this.m_srcPoly[e+1]));if(r.m_endtype===n.EndType.etClosedLine||r.m_endtype===n.EndType.etClosedPolygon?this.m_normals.push(n.ClipperOffset.GetUnitNormal(this.m_srcPoly[o-1],this.m_srcPoly[0])):this.m_normals.push(new n.FPoint1(this.m_normals[o-2])),r.m_endtype===n.EndType.etClosedPolygon)for(a=o-1,e=0;e<o;e++)a=this.OffsetPoint(e,a,r.m_jointype);else if(r.m_endtype===n.EndType.etClosedLine){for(a=o-1,e=0;e<o;e++)a=this.OffsetPoint(e,a,r.m_jointype);for(this.m_destPolys.push(this.m_destPoly),this.m_destPoly=[],a=this.m_normals[o-1],e=o-1;0<e;e--)this.m_normals[e]=new n.FPoint2(-this.m_normals[e-1].X,-this.m_normals[e-1].Y);for(this.m_normals[0]=new n.FPoint2(-a.X,-a.Y),a=0,e=o-1;0<=e;e--)a=this.OffsetPoint(e,a,r.m_jointype)}else{for(a=0,e=1;e<o-1;++e)a=this.OffsetPoint(e,a,r.m_jointype);for(r.m_endtype===n.EndType.etOpenButt?(e=o-1,a=new n.FPoint2(this.m_srcPoly[e].X+this.m_normals[e].X*t,this.m_srcPoly[e].Y+this.m_normals[e].Y*t),this.m_destPoly.push(a),a=new n.FPoint2(this.m_srcPoly[e].X-this.m_normals[e].X*t,this.m_srcPoly[e].Y-this.m_normals[e].Y*t),this.m_destPoly.push(a)):(e=o-1,a=o-2,this.m_sinA=0,this.m_normals[e]=new n.FPoint2(-this.m_normals[e].X,-this.m_normals[e].Y),r.m_endtype===n.EndType.etOpenSquare?this.DoSquare(e,a):this.DoRound(e,a)),e=o-1;0<e;e--)this.m_normals[e]=new n.FPoint2(-this.m_normals[e-1].X,-this.m_normals[e-1].Y);for(this.m_normals[0]=new n.FPoint2(-this.m_normals[1].X,-this.m_normals[1].Y),e=(a=o-1)-1;0<e;--e)a=this.OffsetPoint(e,a,r.m_jointype);r.m_endtype===n.EndType.etOpenButt?(a=new n.FPoint2(this.m_srcPoly[0].X-this.m_normals[0].X*t,this.m_srcPoly[0].Y-this.m_normals[0].Y*t),this.m_destPoly.push(a),a=new n.FPoint2(this.m_srcPoly[0].X+this.m_normals[0].X*t,this.m_srcPoly[0].Y+this.m_normals[0].Y*t),this.m_destPoly.push(a)):(this.m_sinA=0,r.m_endtype===n.EndType.etOpenSquare?this.DoSquare(0,1):this.DoRound(0,1))}}this.m_destPolys.push(this.m_destPoly)}}}},n.ClipperOffset.prototype.Execute=function(){var t=arguments;if(t[0]instanceof n.PolyTree){var e=t[0],i=t[1];if(e.Clear(),this.FixOrientations(),this.DoOffset(i),(t=new n.Clipper(0)).AddPaths(this.m_destPolys,n.PolyType.ptSubject,!0),0<i)t.Execute(n.ClipType.ctUnion,e,n.PolyFillType.pftPositive,n.PolyFillType.pftPositive);else{var r=n.Clipper.GetBounds(this.m_destPolys);if((i=new n.Path).push(new n.FPoint2(r.left-10,r.bottom+10)),i.push(new n.FPoint2(r.right+10,r.bottom+10)),i.push(new n.FPoint2(r.right+10,r.top-10)),i.push(new n.FPoint2(r.left-10,r.top-10)),t.AddPath(i,n.PolyType.ptSubject,!0),t.ReverseSolution=!0,t.Execute(n.ClipType.ctUnion,e,n.PolyFillType.pftNegative,n.PolyFillType.pftNegative),1===e.ChildCount()&&0<e.Childs()[0].ChildCount())for(t=e.Childs()[0],e.Childs()[0]=t.Childs()[0],e.Childs()[0].m_Parent=e,i=1;i<t.ChildCount();i++)e.AddChild(t.Childs()[i]);else e.Clear()}}else e=t[0],i=t[1],n.Clear(e),this.FixOrientations(),this.DoOffset(i),(t=new n.Clipper(0)).AddPaths(this.m_destPolys,n.PolyType.ptSubject,!0),0<i?t.Execute(n.ClipType.ctUnion,e,n.PolyFillType.pftPositive,n.PolyFillType.pftPositive):(r=n.Clipper.GetBounds(this.m_destPolys),(i=new n.Path).push(new n.FPoint2(r.left-10,r.bottom+10)),i.push(new n.FPoint2(r.right+10,r.bottom+10)),i.push(new n.FPoint2(r.right+10,r.top-10)),i.push(new n.FPoint2(r.left-10,r.top-10)),t.AddPath(i,n.PolyType.ptSubject,!0),t.ReverseSolution=!0,t.Execute(n.ClipType.ctUnion,e,n.PolyFillType.pftNegative,n.PolyFillType.pftNegative),0<e.length&&e.splice(0,1))},n.ClipperOffset.prototype.OffsetPoint=function(t,e,i){if(this.m_sinA=this.m_normals[e].X*this.m_normals[t].Y-this.m_normals[t].X*this.m_normals[e].Y,0===this.m_sinA)return e;if(1<this.m_sinA?this.m_sinA=1:-1>this.m_sinA&&(this.m_sinA=-1),0>this.m_sinA*this.m_delta)this.m_destPoly.push(new n.FPoint2(this.m_srcPoly[t].X+this.m_normals[e].X*this.m_delta,this.m_srcPoly[t].Y+this.m_normals[e].Y*this.m_delta)),this.m_destPoly.push(new n.FPoint1(this.m_srcPoly[t])),this.m_destPoly.push(new n.FPoint2(this.m_srcPoly[t].X+this.m_normals[t].X*this.m_delta,this.m_srcPoly[t].Y+this.m_normals[t].Y*this.m_delta));else switch(i){case n.JoinType.jtMiter:(i=this.m_normals[t].X*this.m_normals[e].X+this.m_normals[t].Y*this.m_normals[e].Y+1)>=this.m_miterLim?this.DoMiter(t,e,i):this.DoSquare(t,e);break;case n.JoinType.jtSquare:this.DoSquare(t,e);break;case n.JoinType.jtRound:this.DoRound(t,e)}return t},n.ClipperOffset.prototype.DoSquare=function(t,e){var i=Math.tan(Math.atan2(this.m_sinA,this.m_normals[e].X*this.m_normals[t].X+this.m_normals[e].Y*this.m_normals[t].Y)/4);this.m_destPoly.push(new n.FPoint2(this.m_srcPoly[t].X+this.m_delta*(this.m_normals[e].X-this.m_normals[e].Y*i),this.m_srcPoly[t].Y+this.m_delta*(this.m_normals[e].Y+this.m_normals[e].X*i))),this.m_destPoly.push(new n.FPoint2(this.m_srcPoly[t].X+this.m_delta*(this.m_normals[t].X+this.m_normals[t].Y*i),this.m_srcPoly[t].Y+this.m_delta*(this.m_normals[t].Y-this.m_normals[t].X*i)))},n.ClipperOffset.prototype.DoMiter=function(t,e,i){i=this.m_delta/i,this.m_destPoly.push(new n.FPoint2(this.m_srcPoly[t].X+(this.m_normals[e].X+this.m_normals[t].X)*i,this.m_srcPoly[t].Y+(this.m_normals[e].Y+this.m_normals[t].Y)*i))},n.ClipperOffset.prototype.DoRound=function(t,e){for(var i,r=Math.max(Math.round(this.m_StepsPerRad*Math.abs(Math.atan2(this.m_sinA,this.m_normals[e].X*this.m_normals[t].X+this.m_normals[e].Y*this.m_normals[t].Y))),1),s=this.m_normals[e].X,o=this.m_normals[e].Y,a=0;a<r;++a)this.m_destPoly.push(new n.FPoint2(this.m_srcPoly[t].X+s*this.m_delta,this.m_srcPoly[t].Y+o*this.m_delta)),i=s,s=s*this.m_cos-this.m_sin*o,o=i*this.m_sin+o*this.m_cos;this.m_destPoly.push(new n.FPoint2(this.m_srcPoly[t].X+this.m_normals[t].X*this.m_delta,this.m_srcPoly[t].Y+this.m_normals[t].Y*this.m_delta))},n.Error=function(t){try{throw Error(t)}catch(t){alert(t.message)}},n.JS={},n.JS.AreaOfPolygon=function(t){return n.Clipper.Area(t)},n.JS.AreaOfPolygons=function(t){for(var e=0,i=0;i<t.length;i++)e+=n.Clipper.Area(t[i]);return e},n.JS.BoundsOfPath=function(t){return n.JS.BoundsOfPaths([t])},n.JS.BoundsOfPaths=function(t){return n.Clipper.GetBounds(t)},n.JS.Clean=function(t,e){if(!(t instanceof Array))return[];var i=t[0]instanceof Array;if(t=n.JS.Clone(t),"number"!=typeof e||null===e)return n.Error("Delta is not a number in Clean()."),t;if(0===t.length||1===t.length&&0===t[0].length||0>e)return t;i||(t=[t]);for(var r,s,o,a,l,h,u,p=t.length,d=[],f=0;f<p;f++)if(0!==(r=(s=t[f]).length))if(3>r)o=s,d.push(o);else{for(o=s,a=e*e,l=s[0],u=h=1;u<r;u++)(s[u].X-l.X)*(s[u].X-l.X)+(s[u].Y-l.Y)*(s[u].Y-l.Y)<=a||(o[h]=s[u],l=s[u],h++);l=s[h-1],(s[0].X-l.X)*(s[0].X-l.X)+(s[0].Y-l.Y)*(s[0].Y-l.Y)<=a&&h--,h<r&&o.splice(h,r-h),o.length&&d.push(o)}return!i&&d.length?d=d[0]:i||0!==d.length?i&&0===d.length&&(d=[[]]):d=[],d},n.JS.Clone=function(t){if(!(t instanceof Array)||0===t.length)return[];if(1===t.length&&0===t[0].length)return[[]];var e=t[0]instanceof Array;e||(t=[t]);var i,n,r=t.length,s=Array(r);for(i=0;i<r;i++){var o=t[i].length,a=Array(o);for(n=0;n<o;n++)a[n]={X:t[i][n].X,Y:t[i][n].Y};s[i]=a}return e||(s=s[0]),s},n.JS.Lighten=function(t,e){if(!(t instanceof Array))return[];if("number"!=typeof e||null===e)return n.Error("Tolerance is not a number in Lighten()."),n.JS.Clone(t);if(0===t.length||1===t.length&&0===t[0].length||0>e)return n.JS.Clone(t);var i=t[0]instanceof Array;i||(t=[t]);var r,s,o,a=t.length,l=e*e,h=[];for(r=0;r<a;r++){var u=t[r],p=u.length;if(0!==p){for(o=0;1e6>o;o++){var d=[];if(u[(p=u.length)-1].X!==u[0].X||u[p-1].Y!==u[0].Y){var f=1;u.push({X:u[0].X,Y:u[0].Y}),p=u.length}else f=0;var c=[];for(s=0;s<p-2;s++){var y=u[s],v=u[s+1],x=u[s+2],P=y.X,g=y.Y;y=x.X-P;var m=x.Y-g;if(0!==y||0!==m){var C=((v.X-P)*y+(v.Y-g)*m)/(y*y+m*m);1<C?(P=x.X,g=x.Y):0<C&&(P+=y*C,g+=m*C)}(x=(y=v.X-P)*y+(m=v.Y-g)*m)<=l&&(c[s+1]=1,s++)}for(d.push({X:u[0].X,Y:u[0].Y}),s=1;s<p-1;s++)c[s]||d.push({X:u[s].X,Y:u[s].Y});if(d.push({X:u[p-1].X,Y:u[p-1].Y}),f&&u.pop(),!c.length)break;u=d}d[(p=d.length)-1].X===d[0].X&&d[p-1].Y===d[0].Y&&d.pop(),2<d.length&&h.push(d)}}return i||(h=h[0]),void 0===h&&(h=[]),h},n.JS.PerimeterOfPath=function(t,e){if(void 0===t)return 0;var i=Math.sqrt,n=0,r=t.length;if(2>r)return 0;for(e&&(t[r]=t[0],r++);--r;){var s=t[r],o=s.X;s=s.Y;var a=t[r-1],l=a.X;n+=i((o-l)*(o-l)+(s-(a=a.Y))*(s-a))}return e&&t.pop(),n},n.JS.PerimeterOfPaths=function(t,e){for(var i=0,r=0;r<t.length;r++)i+=n.JS.PerimeterOfPath(t[r],e);return i},n.ExPolygons=function(){return[]},n.ExPolygon=function(){this.holes=this.outer=null},n.JS.AddOuterPolyNodeToExPolygons=function(t,e){var i=new n.ExPolygon;i.outer=t.Contour();var r,s,o=t.Childs(),a=o.length;for(i.holes=Array(a),r=0;r<a;r++){var l=o[r];i.holes[r]=l.Contour();var h=0,u=l.Childs();for(s=u.length;h<s;h++)l=u[h],n.JS.AddOuterPolyNodeToExPolygons(l,e)}e.push(i)},n.JS.ExPolygonsToPaths=function(t){var e,i,r=new n.Paths,s=0;for(e=t.length;s<e;s++){r.push(t[s].outer);var o=0;for(i=t[s].holes.length;o<i;o++)r.push(t[s].holes[o])}return r},n.JS.PolyTreeToExPolygons=function(t){var e,i=new n.ExPolygons,r=0,s=t.Childs();for(e=s.length;r<e;r++)t=s[r],n.JS.AddOuterPolyNodeToExPolygons(t,i);return i}},70:function(t,e,i){"use strict";i.r(e),i.d(e,"DefaultTessParams",(function(){return n})),i.d(e,"SetTesselationParams",(function(){return r})),i.d(e,"TesselateCubic",(function(){return s})),i.d(e,"TesselateQuad",(function(){return o})),i.d(e,"getCubeBezierPoint",(function(){return a}));var n={numIterations:100,minSegLenFraction:.05};function r(t,e){t&&(n.numIterations=t),e&&(n.minSegLenFraction=e)}function s(t,e,i,r,s,o,a,l,h,u,p){p=p||n;for(var d=(u=u||1/p.minSegLenFraction)*p.minSegLenFraction,f=1/p.numIterations,c=f*f*f,y=3*f,v=y*f,x=v+v,P=6*c,g=e-2*r+o,m=i-2*s+a,C=3*(r-o)-e+l,_=3*(s-a)-i+h,I=e,E=i,b=(r-e)*y+g*v+C*c,T=(s-i)*y+m*v+_*c,L=g*x+C*P,S=m*x+_*P,O=C*P,N=_*P,A=0,w=0|1/f-.5,X=0;X<w;X++)I+=b,E+=T,b+=L,T+=S,S+=N,L+=O,(A+=Math.sqrt(b*b+T*T))>=d&&(t.lineTo(I,E),A=0);t.lineTo(l,h)}function o(t,e,i,r,s,o,a,l,h){h=h||n;for(var u=(l=l||1/h.minSegLenFraction)*h.minSegLenFraction,p=1/h.numIterations,d=p*p,f=e-2*r+o,c=i-2*s+a,y=e,v=i,x=2*(r-e)*p+f*d,P=2*(s-i)*p+c*d,g=2*f*d,m=2*c*d,C=0,_=0|1/p-.5,I=0;I<_;I++)y+=x,v+=P,x+=g,P+=m,(C+=Math.sqrt(x*x+P*P))>=u&&(t.lineTo(y,v),C=0);t.lineTo(o,a)}function a(t,e,i,n,r,s,o,a,l,h){var u=h||{x:x,y:y},p=1-t,d=p*p*p,f=3*p*p*t,c=3*p*t*t,v=t*t*t;return u.x=d*e+f*n+c*s+v*a,u.y=d*i+f*r+c*o+v*l,u}},76:function(t,e,i){"use strict";i.r(e),i.d(e,"xLineBox",(function(){return r}));function n(t,e,i,n,r,s){var o;return o=0,t<i?o|=1:t>r&&(o|=2),e<n?o|=4:e>s&&(o|=8),o}function r(t,e,i,r,s,o,a,l){for(var h=n(t,e,s,o,a,l),u=n(i,r,s,o,a,l),p=!1;;){if(!(h|u)){p=!0;break}if(h&u)break;var d=void 0,f=void 0,c=h||u;8&c?(d=t+(i-t)*(l-e)/(r-e),f=l):4&c?(d=t+(i-t)*(o-e)/(r-e),f=o):2&c?(f=e+(r-e)*(a-t)/(i-t),d=a):1&c&&(f=e+(r-e)*(s-t)/(i-t),d=s),c===h?h=n(t=d,e=f,s,o,a,l):u=n(i=d,r=f,s,o,a,l)}return p}},77:function(t,e,i){"use strict";function n(t,e,i,n,r,s,o,a){return t<=o&&e<=a&&i>=r&&n>=s}i.r(e),i.d(e,"xBoxBox",(function(){return n}))},78:function(t,e,i){"use strict";i.r(e),i.d(e,"Path2D",(function(){return d}));var n=i(7),r=i.n(n),s=i(194),o=i.n(s),a=i(70),l=new THREE.Vector2,h=new THREE.Box2,u=null,p=function(){return u=u||new Autodesk.Extensions.CompGeom.EllipseArc};function d(t){this.segTypes=[],this.segData=[],this.hasCurves=!1,this.bbox=new THREE.Box2,this.precisionTolerance=t}d.prototype.setTessParams=function(t){this.tessParams=t},d.prototype.closePath=function(){this.segTypes.length&&7===this.segTypes[this.segTypes.length-1]||this.segTypes.push(7)},d.prototype.moveTo=function(t,e){this.segTypes.push(0),this.segData.push(t,e),this.bbox.expandByPoint(l.set(t,e))},d.prototype.lineTo=function(t,e){this.segTypes.push(1),this.segData.push(t,e),this.bbox.expandByPoint(l.set(t,e))},d.prototype.arc=function(t,e,i,n,r,s){this.hasCurves=!0,this.segTypes.push(2),this.segData.push(t,e,i,n,r,s),this.bbox.expandByPoint(l.set(t,e))},d.prototype.arcTo=function(t,e,i,n,r){this.hasCurves=!0,this.segTypes.push(3),this.segData.push(t,e,i,n,r),this.bbox.expandByPoint(l.set(t,e)),this.bbox.expandByPoint(l.set(i,n))},d.prototype.quadraticCurveTo=function(t,e,i,n){this.hasCurves=!0,this.segTypes.push(4),this.segData.push(t,e,i,n),this.bbox.expandByPoint(l.set(t,e)),this.bbox.expandByPoint(l.set(i,n))},d.prototype.bezierCurveTo=function(t,e,i,n,r,s){this.hasCurves=!0,this.segTypes.push(5),this.segData.push(t,e,i,n,r,s),this.bbox.expandByPoint(l.set(t,e)),this.bbox.expandByPoint(l.set(i,n)),this.bbox.expandByPoint(l.set(r,s))},d.prototype.ellipse=function(t,e,i,n,r,s,o,a){this.hasCurves=!0,this.segTypes.push(6),this.segData.push(t,e,i,n,r,s,o,a);var l=p().set(t,e,i,n,r,s,o,a).computeBBox(h);this.bbox.union(l)},d.prototype.flatten=function(t){for(var e=new d(this.precisionTolerance),i=0,n=0,r=0,s=n,o=r,l=this.segTypes,h=this.segData,u=this.bbox.size().length(),f=0;f<l.length;f++){switch(l[f]){case 0:t&&(n===s&&r===o||e.closePath()),s=n=h[i++],o=r=h[i++],e.moveTo(n,r);break;case 7:e.closePath();break;case 1:var c=h[i++],y=h[i++];c===n&&y===r||(e.lineTo(c,y),n=c,r=y);break;case 4:var v=h[i++],x=h[i++];c=h[i++],y=h[i++];Object(a.TesselateQuad)(e,n,r,v,x,c,y,u,this.tessParams),n=c,r=y;break;case 5:v=h[i++],x=h[i++];var P=h[i++],g=h[i++];c=h[i++],y=h[i++];Object(a.TesselateCubic)(e,n,r,v,x,P,g,c,y,u,this.tessParams),n=c,r=y;break;case 2:console.warn("not implemented: arc"),i+=6;break;case 3:console.warn("not implemented: arcto"),i+=4;break;case 6:var m=h[i++],C=h[i++],_=h[i++],I=h[i++],E=h[i++],b=h[i++],T=h[i++],L=h[i++],S=this.tessParams||a.DefaultTessParams,O=S.numIterations,N=S.minSegLenFraction*u;p().set(m,C,_,I,E,b,T,L).tesselate(e,O,N),n=e.segData[e.segData.length-2],r=e.segData[e.segData.length-1]}}return t&&(n===s&&r===o||e.closePath()),e},d.prototype.applyTransform=function(t,e){for(var i=0;i<this.segData.length;i+=2){var n=this.segData[i],r=this.segData[i+1];this.segData[i]=t.tx(n,r,e),this.segData[i+1]=t.ty(n,r,e)}},d.prototype.stroke=function(t,e,i,n,s,o,a,l){var h=this,u=null!=o,p=this;(a||this.hasCurves)&&(p=this.flatten(!1));var f=this;if(u){for(var c,y=[],v=0,x=0;x<p.segTypes.length;x++)0==p.segTypes[x]?(c=new d(this.precisionTolerance),y.push(c),c.moveTo(p.segData[v++],p.segData[v++])):1==p.segTypes[x]?c.lineTo(p.segData[v++],p.segData[v++]):7==p.segTypes[x]&&c.closePath();var P=o.flattened||o.flatten(!0),g=P.toClipperPath(t,!1);y.map((function(o){var u=f.preCheckForClipping(t,P,o,a,!0);if(!u.needCancel)if(u.needClipping){var p=o.toClipperPath(t,a)[0];if(!p)return;var d=new r.a.PolyTree,c=new r.a.Clipper,y=p[0].X==p[p.length-1].X&&p[0].Y==p[p.length-1].Y;c.AddPath(p,r.a.PolyType.ptSubject,y),c.AddPaths(g,r.a.PolyType.ptClip,!0),c.Execute(r.a.ClipType.ctIntersection,d,r.a.PolyFillType.pftEvenOdd,r.a.PolyFillType.pftEvenOdd),function(r){var o=r.GetFirst();for(;o;)f.strokeClipperContour(t,o.Contour(),o.IsOpen,i,e,n,s,t.currentVpId,l,!1),o=o.GetNext()}(d)}else h.strokeFlattedPath(t,o,e,i,n,s,a,l)}))}else this.strokeFlattedPath(t,p,e,i,n,s,a,l)},d.prototype.strokeFlattedPath=function(t,e,i,n,r,s,o,a){var l,h=e.segData,u=e.segTypes;o&&(l=t.getCurrentTransform());for(var p=0,d=0,f=0,c=0,y=0,v=0;v<u.length;v++){var x=u[v];switch(x){case 0:var P=h[p++],g=h[p++];o?(c=t.tx(P,g,l),y=t.ty(P,g,l)):(c=P,y=g),d=c,f=y;break;case 7:case 1:var m=void 0,C=void 0;if(7===x)m=c,C=y;else{var _=h[p++],I=h[p++];o?(m=t.tx(_,I,l),C=t.ty(_,I,l)):(m=_,C=I)}m===d&&C===f||(t.flushBuffer(4),t.currentVbb.addSegment(d,f,m,C,0,i,n,r,s,t.currentVpId||0,a),d=m,f=C);break;default:console.error("Path must be flattened before rendering")}}},d.prototype.strokeClipperContour=function(t,e,i,n,r,s,o,a,l,h){var u,p=e.length,d=i?0:p-1,f=i?1:0;h&&(u=t.getCurrentTransform());for(var c=h?t.tx(e[d].X,e[d].Y,u):e[d].X,y=h?t.ty(e[d].X,e[d].Y,u):e[d].Y,v=f;v<p;v++){var x=h?t.tx(e[v].X,e[v].Y,u):e[v].X,P=h?t.ty(e[v].X,e[v].Y,u):e[v].Y;t.flushBuffer(4),t.currentVbb.addSegment(c,y,x,P,0,r,n,s,o,a,l),c=x,y=P}},d.prototype.isAABB=function(){var t=this.segTypes;if(6!==t.length&&5!==t.length)return!1;if(0!==t[0])return!1;if(6===t.length&&7!==t[5])return!1;if(5===t.length&&7!==t[4]&&1!==t[4])return!1;for(var e=1;e<t.length-1;e++)if(1!==t[e])return!1;var i=this.segData,n=i[2]-i[0],r=i[3]-i[1],s=i[6]-i[4],o=i[7]-i[5],a=Math.sqrt(n*n+r*r),l=Math.sqrt(s*s+o*o);if(Math.abs(a-l)>1e-10)return!1;var h=(n/=a)*(s/=l)+(r/=a)*(o/=l);if(Math.abs(1+h)>.001)return!1;var u=i[4]-i[2],p=i[5]-i[3],d=i[8]-i[6],f=i[9]-i[7],c=Math.sqrt(u*u+p*p),y=Math.sqrt(d*d+f*f);return!(Math.abs(c-y)>1e-10)&&(h=(u/=c)*(d/=y)+(p/=c)*(f/=y),!(Math.abs(1+h)>.001)&&(h=n*u+r*p,!(Math.abs(h)>.001)&&!(Math.abs(n)>1e-10&&Math.abs(r))))};d.prototype.isAABBContain=function(t){return this.isAABB()?function(t,e,i){if(t.containsBox(e))return 1;var n=i;return void 0===n&&(n=.001/t.size().length()),e.min.x-t.max.x>n||e.min.y-t.min.y>n||e.max.x-t.max.x<-n||e.max.y-t.max.y<-n?2:e.min.x-t.min.x<-n||e.min.y-t.min.y<-n||e.max.x-t.max.x>n||e.max.y-t.max.y>n?4:1}(this.bbox,t,this.precisionTolerance):4},d.prototype.clip=function(t,e){var i=t.flattened||t.flatten(!0),n=this.flattened||this.flatten(!0),s=this.preCheckForClipping(null,i,n,!1,!1);if(s.needCancel)return console.warn("No overlap between nested clip regions."),null;if(0==s.needClipping)return s.needSwapSubject?t:this;var o=i.toClipperPath(null,!1),a=n.toClipperPath(null,!1),l=new r.a.PolyTree,h=new r.a.Clipper;h.AddPaths(a,r.a.PolyType.ptSubject,!0),h.AddPaths(o,r.a.PolyType.ptClip,!0),h.Execute(r.a.ClipType.ctIntersection,l,r.a.PolyFillType.pftEvenOdd,r.a.PolyFillType.pftEvenOdd);for(var u=new d(this.precisionTolerance),p=l.GetFirst();p;){for(var f=p.Contour(),c=0;c<f.length;c++)0==c?u.moveTo(f[c].X,f[c].Y):u.lineTo(f[c].X,f[c].Y);f[f.length-1].X==f[0].X&&f[f.length-1].Y==f[0].Y||u.lineTo(f[0].X,f[0].Y),p=p.GetNext()}return u},d.prototype.isFillable=function(){var t=this.flattened||this.flatten(!0);if(t.segTypes.length<3)return!1;if(3!==t.segTypes.length){for(var e=!1,i=0;i<t.segTypes.length;i+=2)if(0!=t.segTypes[i]||1!=t.segTypes[i+1]){e=!0;break}return e}return(7!==t.segTypes[2]||1!==t.segTypes[1]||0!==t.segTypes[0])&&void 0},d.prototype.fill=function(t,e,i,n,s,o,a){if(this.isFillable()){var l=this.flattened||this.flatten(!0),h=this,u=function(){var e,i=null!=s,n=!1;if(i){var a=s.flattened||s.flatten(!0),u=h.preCheckForClipping(t,a,l,o,!1);if(u.needCancel)return;i=u.needClipping,n=u.needSwapSubject}if(i){var p=(a=s.flattened||s.flatten(!0)).toClipperPath(t,!1),d=l.toClipperPath(t,o),f=new r.a.PolyTree;return(e=new r.a.Clipper).AddPaths(d,r.a.PolyType.ptSubject,!0),e.AddPaths(p,r.a.PolyType.ptClip,!0),e.Execute(r.a.ClipType.ctIntersection,f,r.a.PolyFillType.pftEvenOdd,r.a.PolyFillType.pftEvenOdd),{polygons:c=h.getPolygonFromClipperSolution(f),appliedTransform:o,needClipping:i}}if(l=n?a:l,h.cached)return{polygons:h.cached,appliedTransform:!1,needClipping:i,subjFlatted:l};d=l.toClipperPath(t,!1),f=new r.a.PolyTree,(e=new r.a.Clipper).AddPaths(d,r.a.PolyType.ptSubject,!0),e.Execute(r.a.ClipType.ctUnion,f,r.a.PolyFillType.pftEvenOdd,r.a.PolyFillType.pftEvenOdd);var c=h.getPolygonFromClipperSolution(f);return n||(h.cached=c),{polygons:c,appliedTransform:n,needClipping:i,subjFlatted:l}}();u&&u.polygons.map((function(r){!function(r,s,o){var l=r.vertices;if(s){for(var p=t.getCurrentTransform(),d=[],f=0;f<l.length;f+=2){var c=t.tx(l[f],l[f+1],p),y=t.ty(l[f],l[f+1],p);d.push(c,y)}l=d}if(t.addPolyTriangle(l,r.indices,e,i,n,!1),!a)if(o||!h.isFontChar)for(var v in r.contours)h.strokeClipperContour(t,r.contours[v],!0,e,-.5,i,n,t.currentVpId,0,s);else h.strokeFlattedPath(t,u.subjFlatted,-.5,e,i,n,s,0)}(r,o&&!u.appliedTransform,u.needClipping)}))}},d.prototype.toClipperPath=function(t,e){var i,n=[],r=[],s=this.segTypes,o=this.segData,a=0;function l(n,r){if(e){var s=t.tx(r.X,r.Y,i),o=t.ty(r.X,r.Y,i);r.X=s,r.Y=o}(n.length>0&&(n[n.length-1].X!=r.X||n[n.length-1].Y!=r.Y)||0==n.length)&&n.push(r)}e&&(i=t.getCurrentTransform());for(var h=0;h<s.length;h++)0==s[h]?(r&&r.length>1&&n.push(r),l(r=[],{X:o[a++],Y:o[a++]})):1==s[h]?l(r,{X:o[a++],Y:o[a++]}):7==s[h]&&(r.push({X:r[0].X,Y:r[0].Y}),n.push(r),r=[]);return r&&r.length>1&&n.push(r),n},d.prototype.hasIntersection=function(t,e,i){return!(t.max.x-e.min.x<=-i||t.max.y-e.min.y<=-i||t.min.x-e.max.x>=i||t.min.y-e.max.y>=i)},d.prototype.preCheckForClipping=function(t,e,i,n,r){var s=e.bbox,o=i.bbox;if(n){var a=t.getCurrentTransform();o=t.transformBox(o,a,h)}return this.hasIntersection(s,o,this.precisionTolerance)?e.isAABB()&&s.containsBox(o)?{needClipping:!1}:i.isAABB()&&o.containsBox(s)?r?{needCancel:!0}:{needClipping:!1,needSwapSubject:!0}:{needClipping:!0}:{needCancel:!0}},d.prototype.getPolygonFromClipperSolution=function(t){function e(t,e,i){for(var n=0;n<i.length;n++)e.push(i[n].X,i[n].Y);t.push(i)}return r.a.JS.PolyTreeToExPolygons(t).map((function(t){var i=[],n=[],s=[];if(1==t.holes.length&&Math.abs(r.a.JS.AreaOfPolygons(t.holes))>Math.abs(r.a.JS.AreaOfPolygon(t.outer))){var a=t.holes[0];t.holes[0]=t.outer,t.outer=a}e(s,i,t.outer),t.holes.map((function(t){n.push(i.length/2),e(s,i,t)}));var l=o()(i,n);return{vertices:i,indices:l,holeIndices:n,contours:s}}))},d.prototype.msdfClipping=function(t){var e=(this.flattened||this.flatten(!0)).toClipperPath(null,!1),i=t.toClipperPath(null,!1),n=new r.a.PolyTree,s=new r.a.Clipper;return s.AddPaths(e,r.a.PolyType.ptSubject,!0),s.AddPaths(i,r.a.PolyType.ptClip,!0),s.Execute(r.a.ClipType.ctIntersection,n,r.a.PolyFillType.pftEvenOdd,r.a.PolyFillType.pftEvenOdd),this.getPolygonFromClipperSolution(n)}},9:function(t,e,i){"use strict";i.r(e),i.d(e,"TOL",(function(){return n})),i.d(e,"isZero",(function(){return r})),i.d(e,"isEqual",(function(){return s}));var n=1e-6;function r(t){return Math.abs(t)<n}function s(t,e){return r(t-e)}},97:function(t,e,i){"use strict";i.r(e),i.d(e,"xTrianglePlane",(function(){return h}));var n=i(9),r=i(69),s=Autodesk.Viewing.Private.logger;function o(t,e,i,n,r,s,o){this.v1=t.clone(),this.v2=e.clone()}var a=new THREE.Vector3,l=new THREE.Vector3;function h(t,e,i,h,u,p,d,f,c){var y=t.distanceToPoint(e),v=t.distanceToPoint(i),x=t.distanceToPoint(h);if(y<-n.TOL&&v<-n.TOL&&x<-n.TOL)return null;if(y>n.TOL&&v>n.TOL&&x>n.TOL)return null;var P,g,m,C,_,I,E=Math.sign(y),b=Math.sign(v),T=Math.sign(x);if(0===E&&0===b&&0===T)return null;if(E!==b){var L=Object(r.xPlaneSegment)(t,e,i,a,l);if(2===L)return void f.push(new o(e,i,u,u,p,p,c));1===L?(m=u,C=p,P=a.clone()):s.warn("Unexpected zero intersections where at least one was expected")}if(b!==T){var S=Object(r.xPlaneSegment)(t,i,h,a,l);if(2===S)return void f.push(new o(i,h,p,p,d,d,c));1===S?P?a.distanceTo(P)>n.TOL&&(_=p,I=d,g=a.clone()):(m=p,C=d,P=a.clone()):s.warn("Unexpected zero intersections where at least one was expected")}if(T!==E){var O=Object(r.xPlaneSegment)(t,h,e,a,l);if(2===O)return void f.push(new o(h,e,d,d,u,u,c));1===O?P?a.distanceTo(P)>n.TOL&&(_=d,I=u,g=a.clone()):s.warn("Unexpected single intersection point"):s.warn("Unexpected zero intersections where at least one was expected")}P&&g&&f.push(new o(P,g,m,C,_,I,c))}}});
//# sourceMappingURL=CompGeom.min.js.map